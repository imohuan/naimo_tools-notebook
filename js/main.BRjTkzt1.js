(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const f of document.querySelectorAll('link[rel="modulepreload"]'))c(f);new MutationObserver(f=>{for(const g of f)if(g.type==="childList")for(const b of g.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&c(b)}).observe(document,{childList:!0,subtree:!0});function l(f){const g={};return f.integrity&&(g.integrity=f.integrity),f.referrerPolicy&&(g.referrerPolicy=f.referrerPolicy),f.crossOrigin==="use-credentials"?g.credentials="include":f.crossOrigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function c(f){if(f.ep)return;f.ep=!0;const g=l(f);fetch(f.href,g)}})();/**
* @vue/shared v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ao(r){const i=Object.create(null);for(const l of r.split(","))i[l]=1;return l=>l in i}const Fe={},jn=[],Ut=()=>{},Qa=()=>!1,ei=r=>r.charCodeAt(0)===111&&r.charCodeAt(1)===110&&(r.charCodeAt(2)>122||r.charCodeAt(2)<97),so=r=>r.startsWith("onUpdate:"),et=Object.assign,lo=(r,i)=>{const l=r.indexOf(i);l>-1&&r.splice(l,1)},Wc=Object.prototype.hasOwnProperty,Ne=(r,i)=>Wc.call(r,i),Te=Array.isArray,Bn=r=>ti(r)==="[object Map]",es=r=>ti(r)==="[object Set]",_e=r=>typeof r=="function",ze=r=>typeof r=="string",en=r=>typeof r=="symbol",Ke=r=>r!==null&&typeof r=="object",ts=r=>(Ke(r)||_e(r))&&_e(r.then)&&_e(r.catch),ns=Object.prototype.toString,ti=r=>ns.call(r),Kc=r=>ti(r).slice(8,-1),rs=r=>ti(r)==="[object Object]",co=r=>ze(r)&&r!=="NaN"&&r[0]!=="-"&&""+parseInt(r,10)===r,rr=ao(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ni=r=>{const i=Object.create(null);return(l=>i[l]||(i[l]=r(l)))},qc=/-\w/g,xt=ni(r=>r.replace(qc,i=>i.slice(1).toUpperCase())),$c=/\B([A-Z])/g,_n=ni(r=>r.replace($c,"-$1").toLowerCase()),ri=ni(r=>r.charAt(0).toUpperCase()+r.slice(1)),Oi=ni(r=>r?`on${ri(r)}`:""),fn=(r,i)=>!Object.is(r,i),Ir=(r,...i)=>{for(let l=0;l<r.length;l++)r[l](...i)},is=(r,i,l,c=!1)=>{Object.defineProperty(r,i,{configurable:!0,enumerable:!1,writable:c,value:l})},qi=r=>{const i=parseFloat(r);return isNaN(i)?r:i},zc=r=>{const i=ze(r)?Number(r):NaN;return isNaN(i)?r:i};let ua;const ii=()=>ua||(ua=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Cn(r){if(Te(r)){const i={};for(let l=0;l<r.length;l++){const c=r[l],f=ze(c)?Xc(c):Cn(c);if(f)for(const g in f)i[g]=f[g]}return i}else if(ze(r)||Ke(r))return r}const Gc=/;(?![^(]*\))/g,Jc=/:([^]+)/,Zc=/\/\*[^]*?\*\//g;function Xc(r){const i={};return r.replace(Zc,"").split(Gc).forEach(l=>{if(l){const c=l.split(Jc);c.length>1&&(i[c[0].trim()]=c[1].trim())}}),i}function zt(r){let i="";if(ze(r))i=r;else if(Te(r))for(let l=0;l<r.length;l++){const c=zt(r[l]);c&&(i+=c+" ")}else if(Ke(r))for(const l in r)r[l]&&(i+=l+" ");return i.trim()}const Yc="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Qc=ao(Yc);function os(r){return!!r||r===""}const as=r=>!!(r&&r.__v_isRef===!0),En=r=>ze(r)?r:r==null?"":Te(r)||Ke(r)&&(r.toString===ns||!_e(r.toString))?as(r)?En(r.value):JSON.stringify(r,ss,2):String(r),ss=(r,i)=>as(i)?ss(r,i.value):Bn(i)?{[`Map(${i.size})`]:[...i.entries()].reduce((l,[c,f],g)=>(l[Hi(c,g)+" =>"]=f,l),{})}:es(i)?{[`Set(${i.size})`]:[...i.values()].map(l=>Hi(l))}:en(i)?Hi(i):Ke(i)&&!Te(i)&&!rs(i)?String(i):i,Hi=(r,i="")=>{var l;return en(r)?`Symbol(${(l=r.description)!=null?l:i})`:r};/**
* @vue/reactivity v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let wt;class eu{constructor(i=!1){this.detached=i,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=wt,!i&&wt&&(this.index=(wt.scopes||(wt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let i,l;if(this.scopes)for(i=0,l=this.scopes.length;i<l;i++)this.scopes[i].pause();for(i=0,l=this.effects.length;i<l;i++)this.effects[i].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let i,l;if(this.scopes)for(i=0,l=this.scopes.length;i<l;i++)this.scopes[i].resume();for(i=0,l=this.effects.length;i<l;i++)this.effects[i].resume()}}run(i){if(this._active){const l=wt;try{return wt=this,i()}finally{wt=l}}}on(){++this._on===1&&(this.prevScope=wt,wt=this)}off(){this._on>0&&--this._on===0&&(wt=this.prevScope,this.prevScope=void 0)}stop(i){if(this._active){this._active=!1;let l,c;for(l=0,c=this.effects.length;l<c;l++)this.effects[l].stop();for(this.effects.length=0,l=0,c=this.cleanups.length;l<c;l++)this.cleanups[l]();if(this.cleanups.length=0,this.scopes){for(l=0,c=this.scopes.length;l<c;l++)this.scopes[l].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!i){const f=this.parent.scopes.pop();f&&f!==this&&(this.parent.scopes[this.index]=f,f.index=this.index)}this.parent=void 0}}}function tu(){return wt}let Ve;const Ni=new WeakSet;class ls{constructor(i){this.fn=i,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,wt&&wt.active&&wt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Ni.has(this)&&(Ni.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||us(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,fa(this),fs(this);const i=Ve,l=Ot;Ve=this,Ot=!0;try{return this.fn()}finally{ds(this),Ve=i,Ot=l,this.flags&=-3}}stop(){if(this.flags&1){for(let i=this.deps;i;i=i.nextDep)po(i);this.deps=this.depsTail=void 0,fa(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Ni.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){$i(this)&&this.run()}get dirty(){return $i(this)}}let cs=0,ir,or;function us(r,i=!1){if(r.flags|=8,i){r.next=or,or=r;return}r.next=ir,ir=r}function uo(){cs++}function fo(){if(--cs>0)return;if(or){let i=or;for(or=void 0;i;){const l=i.next;i.next=void 0,i.flags&=-9,i=l}}let r;for(;ir;){let i=ir;for(ir=void 0;i;){const l=i.next;if(i.next=void 0,i.flags&=-9,i.flags&1)try{i.trigger()}catch(c){r||(r=c)}i=l}}if(r)throw r}function fs(r){for(let i=r.deps;i;i=i.nextDep)i.version=-1,i.prevActiveLink=i.dep.activeLink,i.dep.activeLink=i}function ds(r){let i,l=r.depsTail,c=l;for(;c;){const f=c.prevDep;c.version===-1?(c===l&&(l=f),po(c),nu(c)):i=c,c.dep.activeLink=c.prevActiveLink,c.prevActiveLink=void 0,c=f}r.deps=i,r.depsTail=l}function $i(r){for(let i=r.deps;i;i=i.nextDep)if(i.dep.version!==i.version||i.dep.computed&&(ps(i.dep.computed)||i.dep.version!==i.version))return!0;return!!r._dirty}function ps(r){if(r.flags&4&&!(r.flags&16)||(r.flags&=-17,r.globalVersion===fr)||(r.globalVersion=fr,!r.isSSR&&r.flags&128&&(!r.deps&&!r._dirty||!$i(r))))return;r.flags|=2;const i=r.dep,l=Ve,c=Ot;Ve=r,Ot=!0;try{fs(r);const f=r.fn(r._value);(i.version===0||fn(f,r._value))&&(r.flags|=128,r._value=f,i.version++)}catch(f){throw i.version++,f}finally{Ve=l,Ot=c,ds(r),r.flags&=-3}}function po(r,i=!1){const{dep:l,prevSub:c,nextSub:f}=r;if(c&&(c.nextSub=f,r.prevSub=void 0),f&&(f.prevSub=c,r.nextSub=void 0),l.subs===r&&(l.subs=c,!c&&l.computed)){l.computed.flags&=-5;for(let g=l.computed.deps;g;g=g.nextDep)po(g,!0)}!i&&!--l.sc&&l.map&&l.map.delete(l.key)}function nu(r){const{prevDep:i,nextDep:l}=r;i&&(i.nextDep=l,r.prevDep=void 0),l&&(l.prevDep=i,r.nextDep=void 0)}let Ot=!0;const hs=[];function Yt(){hs.push(Ot),Ot=!1}function Qt(){const r=hs.pop();Ot=r===void 0?!0:r}function fa(r){const{cleanup:i}=r;if(r.cleanup=void 0,i){const l=Ve;Ve=void 0;try{i()}finally{Ve=l}}}let fr=0;class ru{constructor(i,l){this.sub=i,this.dep=l,this.version=l.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class ho{constructor(i){this.computed=i,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(i){if(!Ve||!Ot||Ve===this.computed)return;let l=this.activeLink;if(l===void 0||l.sub!==Ve)l=this.activeLink=new ru(Ve,this),Ve.deps?(l.prevDep=Ve.depsTail,Ve.depsTail.nextDep=l,Ve.depsTail=l):Ve.deps=Ve.depsTail=l,ms(l);else if(l.version===-1&&(l.version=this.version,l.nextDep)){const c=l.nextDep;c.prevDep=l.prevDep,l.prevDep&&(l.prevDep.nextDep=c),l.prevDep=Ve.depsTail,l.nextDep=void 0,Ve.depsTail.nextDep=l,Ve.depsTail=l,Ve.deps===l&&(Ve.deps=c)}return l}trigger(i){this.version++,fr++,this.notify(i)}notify(i){uo();try{for(let l=this.subs;l;l=l.prevSub)l.sub.notify()&&l.sub.dep.notify()}finally{fo()}}}function ms(r){if(r.dep.sc++,r.sub.flags&4){const i=r.dep.computed;if(i&&!r.dep.subs){i.flags|=20;for(let c=i.deps;c;c=c.nextDep)ms(c)}const l=r.dep.subs;l!==r&&(r.prevSub=l,l&&(l.nextSub=r)),r.dep.subs=r}}const zi=new WeakMap,Sn=Symbol(""),Gi=Symbol(""),dr=Symbol("");function st(r,i,l){if(Ot&&Ve){let c=zi.get(r);c||zi.set(r,c=new Map);let f=c.get(l);f||(c.set(l,f=new ho),f.map=c,f.key=l),f.track()}}function Zt(r,i,l,c,f,g){const b=zi.get(r);if(!b){fr++;return}const h=y=>{y&&y.trigger()};if(uo(),i==="clear")b.forEach(h);else{const y=Te(r),H=y&&co(l);if(y&&l==="length"){const _=Number(c);b.forEach((p,d)=>{(d==="length"||d===dr||!en(d)&&d>=_)&&h(p)})}else switch((l!==void 0||b.has(void 0))&&h(b.get(l)),H&&h(b.get(dr)),i){case"add":y?H&&h(b.get("length")):(h(b.get(Sn)),Bn(r)&&h(b.get(Gi)));break;case"delete":y||(h(b.get(Sn)),Bn(r)&&h(b.get(Gi)));break;case"set":Bn(r)&&h(b.get(Sn));break}}fo()}function Nn(r){const i=He(r);return i===r?i:(st(i,"iterate",dr),kt(r)?i:i.map(it))}function oi(r){return st(r=He(r),"iterate",dr),r}const iu={__proto__:null,[Symbol.iterator](){return Pi(this,Symbol.iterator,it)},concat(...r){return Nn(this).concat(...r.map(i=>Te(i)?Nn(i):i))},entries(){return Pi(this,"entries",r=>(r[1]=it(r[1]),r))},every(r,i){return Kt(this,"every",r,i,void 0,arguments)},filter(r,i){return Kt(this,"filter",r,i,l=>l.map(it),arguments)},find(r,i){return Kt(this,"find",r,i,it,arguments)},findIndex(r,i){return Kt(this,"findIndex",r,i,void 0,arguments)},findLast(r,i){return Kt(this,"findLast",r,i,it,arguments)},findLastIndex(r,i){return Kt(this,"findLastIndex",r,i,void 0,arguments)},forEach(r,i){return Kt(this,"forEach",r,i,void 0,arguments)},includes(...r){return Ii(this,"includes",r)},indexOf(...r){return Ii(this,"indexOf",r)},join(r){return Nn(this).join(r)},lastIndexOf(...r){return Ii(this,"lastIndexOf",r)},map(r,i){return Kt(this,"map",r,i,void 0,arguments)},pop(){return Qn(this,"pop")},push(...r){return Qn(this,"push",r)},reduce(r,...i){return da(this,"reduce",r,i)},reduceRight(r,...i){return da(this,"reduceRight",r,i)},shift(){return Qn(this,"shift")},some(r,i){return Kt(this,"some",r,i,void 0,arguments)},splice(...r){return Qn(this,"splice",r)},toReversed(){return Nn(this).toReversed()},toSorted(r){return Nn(this).toSorted(r)},toSpliced(...r){return Nn(this).toSpliced(...r)},unshift(...r){return Qn(this,"unshift",r)},values(){return Pi(this,"values",it)}};function Pi(r,i,l){const c=oi(r),f=c[i]();return c!==r&&!kt(r)&&(f._next=f.next,f.next=()=>{const g=f._next();return g.done||(g.value=l(g.value)),g}),f}const ou=Array.prototype;function Kt(r,i,l,c,f,g){const b=oi(r),h=b!==r&&!kt(r),y=b[i];if(y!==ou[i]){const p=y.apply(r,g);return h?it(p):p}let H=l;b!==r&&(h?H=function(p,d){return l.call(this,it(p),d,r)}:l.length>2&&(H=function(p,d){return l.call(this,p,d,r)}));const _=y.call(b,H,c);return h&&f?f(_):_}function da(r,i,l,c){const f=oi(r);let g=l;return f!==r&&(kt(r)?l.length>3&&(g=function(b,h,y){return l.call(this,b,h,y,r)}):g=function(b,h,y){return l.call(this,b,it(h),y,r)}),f[i](g,...c)}function Ii(r,i,l){const c=He(r);st(c,"iterate",dr);const f=c[i](...l);return(f===-1||f===!1)&&bo(l[0])?(l[0]=He(l[0]),c[i](...l)):f}function Qn(r,i,l=[]){Yt(),uo();const c=He(r)[i].apply(r,l);return fo(),Qt(),c}const au=ao("__proto__,__v_isRef,__isVue"),gs=new Set(Object.getOwnPropertyNames(Symbol).filter(r=>r!=="arguments"&&r!=="caller").map(r=>Symbol[r]).filter(en));function su(r){en(r)||(r=String(r));const i=He(this);return st(i,"has",r),i.hasOwnProperty(r)}class ys{constructor(i=!1,l=!1){this._isReadonly=i,this._isShallow=l}get(i,l,c){if(l==="__v_skip")return i.__v_skip;const f=this._isReadonly,g=this._isShallow;if(l==="__v_isReactive")return!f;if(l==="__v_isReadonly")return f;if(l==="__v_isShallow")return g;if(l==="__v_raw")return c===(f?g?yu:Es:g?ws:vs).get(i)||Object.getPrototypeOf(i)===Object.getPrototypeOf(c)?i:void 0;const b=Te(i);if(!f){let y;if(b&&(y=iu[l]))return y;if(l==="hasOwnProperty")return su}const h=Reflect.get(i,l,dt(i)?i:c);if((en(l)?gs.has(l):au(l))||(f||st(i,"get",l),g))return h;if(dt(h)){const y=b&&co(l)?h:h.value;return f&&Ke(y)?Zi(y):y}return Ke(h)?f?Zi(h):go(h):h}}class bs extends ys{constructor(i=!1){super(!1,i)}set(i,l,c,f){let g=i[l];if(!this._isShallow){const y=dn(g);if(!kt(c)&&!dn(c)&&(g=He(g),c=He(c)),!Te(i)&&dt(g)&&!dt(c))return y||(g.value=c),!0}const b=Te(i)&&co(l)?Number(l)<i.length:Ne(i,l),h=Reflect.set(i,l,c,dt(i)?i:f);return i===He(f)&&(b?fn(c,g)&&Zt(i,"set",l,c):Zt(i,"add",l,c)),h}deleteProperty(i,l){const c=Ne(i,l);i[l];const f=Reflect.deleteProperty(i,l);return f&&c&&Zt(i,"delete",l,void 0),f}has(i,l){const c=Reflect.has(i,l);return(!en(l)||!gs.has(l))&&st(i,"has",l),c}ownKeys(i){return st(i,"iterate",Te(i)?"length":Sn),Reflect.ownKeys(i)}}class lu extends ys{constructor(i=!1){super(!0,i)}set(i,l){return!0}deleteProperty(i,l){return!0}}const cu=new bs,uu=new lu,fu=new bs(!0);const Ji=r=>r,Dr=r=>Reflect.getPrototypeOf(r);function du(r,i,l){return function(...c){const f=this.__v_raw,g=He(f),b=Bn(g),h=r==="entries"||r===Symbol.iterator&&b,y=r==="keys"&&b,H=f[r](...c),_=l?Ji:i?Vr:it;return!i&&st(g,"iterate",y?Gi:Sn),{next(){const{value:p,done:d}=H.next();return d?{value:p,done:d}:{value:h?[_(p[0]),_(p[1])]:_(p),done:d}},[Symbol.iterator](){return this}}}}function Or(r){return function(...i){return r==="delete"?!1:r==="clear"?void 0:this}}function pu(r,i){const l={get(f){const g=this.__v_raw,b=He(g),h=He(f);r||(fn(f,h)&&st(b,"get",f),st(b,"get",h));const{has:y}=Dr(b),H=i?Ji:r?Vr:it;if(y.call(b,f))return H(g.get(f));if(y.call(b,h))return H(g.get(h));g!==b&&g.get(f)},get size(){const f=this.__v_raw;return!r&&st(He(f),"iterate",Sn),f.size},has(f){const g=this.__v_raw,b=He(g),h=He(f);return r||(fn(f,h)&&st(b,"has",f),st(b,"has",h)),f===h?g.has(f):g.has(f)||g.has(h)},forEach(f,g){const b=this,h=b.__v_raw,y=He(h),H=i?Ji:r?Vr:it;return!r&&st(y,"iterate",Sn),h.forEach((_,p)=>f.call(g,H(_),H(p),b))}};return et(l,r?{add:Or("add"),set:Or("set"),delete:Or("delete"),clear:Or("clear")}:{add(f){!i&&!kt(f)&&!dn(f)&&(f=He(f));const g=He(this);return Dr(g).has.call(g,f)||(g.add(f),Zt(g,"add",f,f)),this},set(f,g){!i&&!kt(g)&&!dn(g)&&(g=He(g));const b=He(this),{has:h,get:y}=Dr(b);let H=h.call(b,f);H||(f=He(f),H=h.call(b,f));const _=y.call(b,f);return b.set(f,g),H?fn(g,_)&&Zt(b,"set",f,g):Zt(b,"add",f,g),this},delete(f){const g=He(this),{has:b,get:h}=Dr(g);let y=b.call(g,f);y||(f=He(f),y=b.call(g,f)),h&&h.call(g,f);const H=g.delete(f);return y&&Zt(g,"delete",f,void 0),H},clear(){const f=He(this),g=f.size!==0,b=f.clear();return g&&Zt(f,"clear",void 0,void 0),b}}),["keys","values","entries",Symbol.iterator].forEach(f=>{l[f]=du(f,r,i)}),l}function mo(r,i){const l=pu(r,i);return(c,f,g)=>f==="__v_isReactive"?!r:f==="__v_isReadonly"?r:f==="__v_raw"?c:Reflect.get(Ne(l,f)&&f in c?l:c,f,g)}const hu={get:mo(!1,!1)},mu={get:mo(!1,!0)},gu={get:mo(!0,!1)};const vs=new WeakMap,ws=new WeakMap,Es=new WeakMap,yu=new WeakMap;function bu(r){switch(r){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function vu(r){return r.__v_skip||!Object.isExtensible(r)?0:bu(Kc(r))}function go(r){return dn(r)?r:yo(r,!1,cu,hu,vs)}function wu(r){return yo(r,!1,fu,mu,ws)}function Zi(r){return yo(r,!0,uu,gu,Es)}function yo(r,i,l,c,f){if(!Ke(r)||r.__v_raw&&!(i&&r.__v_isReactive))return r;const g=vu(r);if(g===0)return r;const b=f.get(r);if(b)return b;const h=new Proxy(r,g===2?c:l);return f.set(r,h),h}function Fn(r){return dn(r)?Fn(r.__v_raw):!!(r&&r.__v_isReactive)}function dn(r){return!!(r&&r.__v_isReadonly)}function kt(r){return!!(r&&r.__v_isShallow)}function bo(r){return r?!!r.__v_raw:!1}function He(r){const i=r&&r.__v_raw;return i?He(i):r}function Eu(r){return!Ne(r,"__v_skip")&&Object.isExtensible(r)&&is(r,"__v_skip",!0),r}const it=r=>Ke(r)?go(r):r,Vr=r=>Ke(r)?Zi(r):r;function dt(r){return r?r.__v_isRef===!0:!1}function ct(r){return Su(r,!1)}function Su(r,i){return dt(r)?r:new Cu(r,i)}class Cu{constructor(i,l){this.dep=new ho,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=l?i:He(i),this._value=l?i:it(i),this.__v_isShallow=l}get value(){return this.dep.track(),this._value}set value(i){const l=this._rawValue,c=this.__v_isShallow||kt(i)||dn(i);i=c?i:He(i),fn(i,l)&&(this._rawValue=i,this._value=c?i:it(i),this.dep.trigger())}}function Tu(r){return dt(r)?r.value:r}const _u={get:(r,i,l)=>i==="__v_raw"?r:Tu(Reflect.get(r,i,l)),set:(r,i,l,c)=>{const f=r[i];return dt(f)&&!dt(l)?(f.value=l,!0):Reflect.set(r,i,l,c)}};function Ss(r){return Fn(r)?r:new Proxy(r,_u)}class Lu{constructor(i,l,c){this.fn=i,this.setter=l,this._value=void 0,this.dep=new ho(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=fr-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!l,this.isSSR=c}notify(){if(this.flags|=16,!(this.flags&8)&&Ve!==this)return us(this,!0),!0}get value(){const i=this.dep.track();return ps(this),i&&(i.version=this.dep.version),this._value}set value(i){this.setter&&this.setter(i)}}function Mu(r,i,l=!1){let c,f;return _e(r)?c=r:(c=r.get,f=r.set),new Lu(c,f,l)}const Hr={},Wr=new WeakMap;let vn;function Au(r,i=!1,l=vn){if(l){let c=Wr.get(l);c||Wr.set(l,c=[]),c.push(r)}}function ku(r,i,l=Fe){const{immediate:c,deep:f,once:g,scheduler:b,augmentJob:h,call:y}=l,H=L=>f?L:kt(L)||f===!1||f===0?Xt(L,1):Xt(L);let _,p,d,E,v=!1,S=!1;if(dt(r)?(p=()=>r.value,v=kt(r)):Fn(r)?(p=()=>H(r),v=!0):Te(r)?(S=!0,v=r.some(L=>Fn(L)||kt(L)),p=()=>r.map(L=>{if(dt(L))return L.value;if(Fn(L))return H(L);if(_e(L))return y?y(L,2):L()})):_e(r)?i?p=y?()=>y(r,2):r:p=()=>{if(d){Yt();try{d()}finally{Qt()}}const L=vn;vn=_;try{return y?y(r,3,[E]):r(E)}finally{vn=L}}:p=Ut,i&&f){const L=p,u=f===!0?1/0:f;p=()=>Xt(L(),u)}const w=tu(),D=()=>{_.stop(),w&&w.active&&lo(w.effects,_)};if(g&&i){const L=i;i=(...u)=>{L(...u),D()}}let A=S?new Array(r.length).fill(Hr):Hr;const M=L=>{if(!(!(_.flags&1)||!_.dirty&&!L))if(i){const u=_.run();if(f||v||(S?u.some((k,U)=>fn(k,A[U])):fn(u,A))){d&&d();const k=vn;vn=_;try{const U=[u,A===Hr?void 0:S&&A[0]===Hr?[]:A,E];A=u,y?y(i,3,U):i(...U)}finally{vn=k}}}else _.run()};return h&&h(M),_=new ls(p),_.scheduler=b?()=>b(M,!1):M,E=L=>Au(L,!1,_),d=_.onStop=()=>{const L=Wr.get(_);if(L){if(y)y(L,4);else for(const u of L)u();Wr.delete(_)}},i?c?M(!0):A=_.run():b?b(M.bind(null,!0),!0):_.run(),D.pause=_.pause.bind(_),D.resume=_.resume.bind(_),D.stop=D,D}function Xt(r,i=1/0,l){if(i<=0||!Ke(r)||r.__v_skip||(l=l||new Map,(l.get(r)||0)>=i))return r;if(l.set(r,i),i--,dt(r))Xt(r.value,i,l);else if(Te(r))for(let c=0;c<r.length;c++)Xt(r[c],i,l);else if(es(r)||Bn(r))r.forEach(c=>{Xt(c,i,l)});else if(rs(r)){for(const c in r)Xt(r[c],i,l);for(const c of Object.getOwnPropertySymbols(r))Object.prototype.propertyIsEnumerable.call(r,c)&&Xt(r[c],i,l)}return r}/**
* @vue/runtime-core v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function vr(r,i,l,c){try{return c?r(...c):r()}catch(f){ai(f,i,l)}}function Ht(r,i,l,c){if(_e(r)){const f=vr(r,i,l,c);return f&&ts(f)&&f.catch(g=>{ai(g,i,l)}),f}if(Te(r)){const f=[];for(let g=0;g<r.length;g++)f.push(Ht(r[g],i,l,c));return f}}function ai(r,i,l,c=!0){const f=i?i.vnode:null,{errorHandler:g,throwUnhandledErrorInProduction:b}=i&&i.appContext.config||Fe;if(i){let h=i.parent;const y=i.proxy,H=`https://vuejs.org/error-reference/#runtime-${l}`;for(;h;){const _=h.ec;if(_){for(let p=0;p<_.length;p++)if(_[p](r,y,H)===!1)return}h=h.parent}if(g){Yt(),vr(g,null,10,[r,y,H]),Qt();return}}xu(r,l,f,c,b)}function xu(r,i,l,c=!0,f=!1){if(f)throw r;console.error(r)}const gt=[];let Bt=-1;const Un=[];let cn=null,Pn=0;const Cs=Promise.resolve();let Kr=null;function Ts(r){const i=Kr||Cs;return r?i.then(this?r.bind(this):r):i}function Du(r){let i=Bt+1,l=gt.length;for(;i<l;){const c=i+l>>>1,f=gt[c],g=pr(f);g<r||g===r&&f.flags&2?i=c+1:l=c}return i}function vo(r){if(!(r.flags&1)){const i=pr(r),l=gt[gt.length-1];!l||!(r.flags&2)&&i>=pr(l)?gt.push(r):gt.splice(Du(i),0,r),r.flags|=1,_s()}}function _s(){Kr||(Kr=Cs.then(Ms))}function Ou(r){Te(r)?Un.push(...r):cn&&r.id===-1?cn.splice(Pn+1,0,r):r.flags&1||(Un.push(r),r.flags|=1),_s()}function pa(r,i,l=Bt+1){for(;l<gt.length;l++){const c=gt[l];if(c&&c.flags&2){if(r&&c.id!==r.uid)continue;gt.splice(l,1),l--,c.flags&4&&(c.flags&=-2),c(),c.flags&4||(c.flags&=-2)}}}function Ls(r){if(Un.length){const i=[...new Set(Un)].sort((l,c)=>pr(l)-pr(c));if(Un.length=0,cn){cn.push(...i);return}for(cn=i,Pn=0;Pn<cn.length;Pn++){const l=cn[Pn];l.flags&4&&(l.flags&=-2),l.flags&8||l(),l.flags&=-2}cn=null,Pn=0}}const pr=r=>r.id==null?r.flags&2?-1:1/0:r.id;function Ms(r){try{for(Bt=0;Bt<gt.length;Bt++){const i=gt[Bt];i&&!(i.flags&8)&&(i.flags&4&&(i.flags&=-2),vr(i,i.i,i.i?15:14),i.flags&4||(i.flags&=-2))}}finally{for(;Bt<gt.length;Bt++){const i=gt[Bt];i&&(i.flags&=-2)}Bt=-1,gt.length=0,Ls(),Kr=null,(gt.length||Un.length)&&Ms()}}let ot=null,As=null;function qr(r){const i=ot;return ot=r,As=r&&r.type.__scopeId||null,i}function $r(r,i=ot,l){if(!i||r._n)return r;const c=(...f)=>{c._d&&Zr(-1);const g=qr(i);let b;try{b=r(...f)}finally{qr(g),c._d&&Zr(1)}return b};return c._n=!0,c._c=!0,c._d=!0,c}function zr(r,i){if(ot===null)return r;const l=di(ot),c=r.dirs||(r.dirs=[]);for(let f=0;f<i.length;f++){let[g,b,h,y=Fe]=i[f];g&&(_e(g)&&(g={mounted:g,updated:g}),g.deep&&Xt(b),c.push({dir:g,instance:l,value:b,oldValue:void 0,arg:h,modifiers:y}))}return r}function mn(r,i,l,c){const f=r.dirs,g=i&&i.dirs;for(let b=0;b<f.length;b++){const h=f[b];g&&(h.oldValue=g[b].value);let y=h.dir[c];y&&(Yt(),Ht(y,l,8,[r.el,h,r,i]),Qt())}}const ks=Symbol("_vte"),xs=r=>r.__isTeleport,ar=r=>r&&(r.disabled||r.disabled===""),ha=r=>r&&(r.defer||r.defer===""),ma=r=>typeof SVGElement<"u"&&r instanceof SVGElement,ga=r=>typeof MathMLElement=="function"&&r instanceof MathMLElement,Xi=(r,i)=>{const l=r&&r.to;return ze(l)?i?i(l):null:l},Ds={name:"Teleport",__isTeleport:!0,process(r,i,l,c,f,g,b,h,y,H){const{mc:_,pc:p,pbc:d,o:{insert:E,querySelector:v,createText:S,createComment:w}}=H,D=ar(i.props);let{shapeFlag:A,children:M,dynamicChildren:L}=i;if(r==null){const u=i.el=S(""),k=i.anchor=S("");E(u,l,c),E(k,l,c);const U=(N,B)=>{A&16&&_(M,N,B,f,g,b,h,y)},R=()=>{const N=i.target=Xi(i.props,v),B=Os(N,i,S,E);N&&(b!=="svg"&&ma(N)?b="svg":b!=="mathml"&&ga(N)&&(b="mathml"),f&&f.isCE&&(f.ce._teleportTargets||(f.ce._teleportTargets=new Set)).add(N),D||(U(N,B),Rr(i,!1)))};D&&(U(l,k),Rr(i,!0)),ha(i.props)?(i.el.__isMounted=!1,mt(()=>{R(),delete i.el.__isMounted},g)):R()}else{if(ha(i.props)&&r.el.__isMounted===!1){mt(()=>{Ds.process(r,i,l,c,f,g,b,h,y,H)},g);return}i.el=r.el,i.targetStart=r.targetStart;const u=i.anchor=r.anchor,k=i.target=r.target,U=i.targetAnchor=r.targetAnchor,R=ar(r.props),N=R?l:k,B=R?u:U;if(b==="svg"||ma(k)?b="svg":(b==="mathml"||ga(k))&&(b="mathml"),L?(d(r.dynamicChildren,L,N,f,g,b,h),Co(r,i,!0)):y||p(r,i,N,B,f,g,b,h,!1),D)R?i.props&&r.props&&i.props.to!==r.props.to&&(i.props.to=r.props.to):Nr(i,l,u,H,1);else if((i.props&&i.props.to)!==(r.props&&r.props.to)){const q=i.target=Xi(i.props,v);q&&Nr(i,q,null,H,0)}else R&&Nr(i,k,U,H,1);Rr(i,D)}},remove(r,i,l,{um:c,o:{remove:f}},g){const{shapeFlag:b,children:h,anchor:y,targetStart:H,targetAnchor:_,target:p,props:d}=r;if(p&&(f(H),f(_)),g&&f(y),b&16){const E=g||!ar(d);for(let v=0;v<h.length;v++){const S=h[v];c(S,i,l,E,!!S.dynamicChildren)}}},move:Nr,hydrate:Hu};function Nr(r,i,l,{o:{insert:c},m:f},g=2){g===0&&c(r.targetAnchor,i,l);const{el:b,anchor:h,shapeFlag:y,children:H,props:_}=r,p=g===2;if(p&&c(b,i,l),(!p||ar(_))&&y&16)for(let d=0;d<H.length;d++)f(H[d],i,l,2);p&&c(h,i,l)}function Hu(r,i,l,c,f,g,{o:{nextSibling:b,parentNode:h,querySelector:y,insert:H,createText:_}},p){function d(S,w,D,A){w.anchor=p(b(S),w,h(S),l,c,f,g),w.targetStart=D,w.targetAnchor=A}const E=i.target=Xi(i.props,y),v=ar(i.props);if(E){const S=E._lpa||E.firstChild;if(i.shapeFlag&16)if(v)d(r,i,S,S&&b(S));else{i.anchor=b(r);let w=S;for(;w;){if(w&&w.nodeType===8){if(w.data==="teleport start anchor")i.targetStart=w;else if(w.data==="teleport anchor"){i.targetAnchor=w,E._lpa=i.targetAnchor&&b(i.targetAnchor);break}}w=b(w)}i.targetAnchor||Os(E,i,_,H),p(S&&b(S),i,E,l,c,f,g)}Rr(i,v)}else v&&i.shapeFlag&16&&d(r,i,r,b(r));return i.anchor&&b(i.anchor)}const Nu=Ds;function Rr(r,i){const l=r.ctx;if(l&&l.ut){let c,f;for(i?(c=r.el,f=r.anchor):(c=r.targetStart,f=r.targetAnchor);c&&c!==f;)c.nodeType===1&&c.setAttribute("data-v-owner",l.uid),c=c.nextSibling;l.ut()}}function Os(r,i,l,c){const f=i.targetStart=l(""),g=i.targetAnchor=l("");return f[ks]=g,r&&(c(f,r),c(g,r)),g}const Gt=Symbol("_leaveCb"),Pr=Symbol("_enterCb");function Pu(){const r={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return wr(()=>{r.isMounted=!0}),wo(()=>{r.isUnmounting=!0}),r}const At=[Function,Array],Hs={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:At,onEnter:At,onAfterEnter:At,onEnterCancelled:At,onBeforeLeave:At,onLeave:At,onAfterLeave:At,onLeaveCancelled:At,onBeforeAppear:At,onAppear:At,onAfterAppear:At,onAppearCancelled:At},Ns=r=>{const i=r.subTree;return i.component?Ns(i.component):i},Iu={name:"BaseTransition",props:Hs,setup(r,{slots:i}){const l=al(),c=Pu();return()=>{const f=i.default&&Rs(i.default(),!0);if(!f||!f.length)return;const g=Ps(f),b=He(r),{mode:h}=b;if(c.isLeaving)return Ri(g);const y=ya(g);if(!y)return Ri(g);let H=Yi(y,b,c,l,p=>H=p);y.type!==ut&&hr(y,H);let _=l.subTree&&ya(l.subTree);if(_&&_.type!==ut&&!wn(_,y)&&Ns(l).type!==ut){let p=Yi(_,b,c,l);if(hr(_,p),h==="out-in"&&y.type!==ut)return c.isLeaving=!0,p.afterLeave=()=>{c.isLeaving=!1,l.job.flags&8||l.update(),delete p.afterLeave,_=void 0},Ri(g);h==="in-out"&&y.type!==ut?p.delayLeave=(d,E,v)=>{const S=Is(c,_);S[String(_.key)]=_,d[Gt]=()=>{E(),d[Gt]=void 0,delete H.delayedLeave,_=void 0},H.delayedLeave=()=>{v(),delete H.delayedLeave,_=void 0}}:_=void 0}else _&&(_=void 0);return g}}};function Ps(r){let i=r[0];if(r.length>1){for(const l of r)if(l.type!==ut){i=l;break}}return i}const Ru=Iu;function Is(r,i){const{leavingVNodes:l}=r;let c=l.get(i.type);return c||(c=Object.create(null),l.set(i.type,c)),c}function Yi(r,i,l,c,f){const{appear:g,mode:b,persisted:h=!1,onBeforeEnter:y,onEnter:H,onAfterEnter:_,onEnterCancelled:p,onBeforeLeave:d,onLeave:E,onAfterLeave:v,onLeaveCancelled:S,onBeforeAppear:w,onAppear:D,onAfterAppear:A,onAppearCancelled:M}=i,L=String(r.key),u=Is(l,r),k=(N,B)=>{N&&Ht(N,c,9,B)},U=(N,B)=>{const q=B[1];k(N,B),Te(N)?N.every(J=>J.length<=1)&&q():N.length<=1&&q()},R={mode:b,persisted:h,beforeEnter(N){let B=y;if(!l.isMounted)if(g)B=w||y;else return;N[Gt]&&N[Gt](!0);const q=u[L];q&&wn(r,q)&&q.el[Gt]&&q.el[Gt](),k(B,[N])},enter(N){let B=H,q=_,J=p;if(!l.isMounted)if(g)B=D||H,q=A||_,J=M||p;else return;let se=!1;const he=N[Pr]=Ce=>{se||(se=!0,Ce?k(J,[N]):k(q,[N]),R.delayedLeave&&R.delayedLeave(),N[Pr]=void 0)};B?U(B,[N,he]):he()},leave(N,B){const q=String(r.key);if(N[Pr]&&N[Pr](!0),l.isUnmounting)return B();k(d,[N]);let J=!1;const se=N[Gt]=he=>{J||(J=!0,B(),he?k(S,[N]):k(v,[N]),N[Gt]=void 0,u[q]===r&&delete u[q])};u[q]=r,E?U(E,[N,se]):se()},clone(N){const B=Yi(N,i,l,c,f);return f&&f(B),B}};return R}function Ri(r){if(si(r))return r=pn(r),r.children=null,r}function ya(r){if(!si(r))return xs(r.type)&&r.children?Ps(r.children):r;if(r.component)return r.component.subTree;const{shapeFlag:i,children:l}=r;if(l){if(i&16)return l[0];if(i&32&&_e(l.default))return l.default()}}function hr(r,i){r.shapeFlag&6&&r.component?(r.transition=i,hr(r.component.subTree,i)):r.shapeFlag&128?(r.ssContent.transition=i.clone(r.ssContent),r.ssFallback.transition=i.clone(r.ssFallback)):r.transition=i}function Rs(r,i=!1,l){let c=[],f=0;for(let g=0;g<r.length;g++){let b=r[g];const h=l==null?b.key:String(l)+String(b.key!=null?b.key:g);b.type===lt?(b.patchFlag&128&&f++,c=c.concat(Rs(b.children,i,h))):(i||b.type!==ut)&&c.push(h!=null?pn(b,{key:h}):b)}if(f>1)for(let g=0;g<c.length;g++)c[g].patchFlag=-2;return c}function Kn(r,i){return _e(r)?et({name:r.name},i,{setup:r}):r}function js(r){r.ids=[r.ids[0]+r.ids[2]+++"-",0,0]}const Gr=new WeakMap;function sr(r,i,l,c,f=!1){if(Te(r)){r.forEach((v,S)=>sr(v,i&&(Te(i)?i[S]:i),l,c,f));return}if(Vn(c)&&!f){c.shapeFlag&512&&c.type.__asyncResolved&&c.component.subTree.component&&sr(r,i,l,c.component.subTree);return}const g=c.shapeFlag&4?di(c.component):c.el,b=f?null:g,{i:h,r:y}=r,H=i&&i.r,_=h.refs===Fe?h.refs={}:h.refs,p=h.setupState,d=He(p),E=p===Fe?Qa:v=>Ne(d,v);if(H!=null&&H!==y){if(ba(i),ze(H))_[H]=null,E(H)&&(p[H]=null);else if(dt(H)){H.value=null;const v=i;v.k&&(_[v.k]=null)}}if(_e(y))vr(y,h,12,[b,_]);else{const v=ze(y),S=dt(y);if(v||S){const w=()=>{if(r.f){const D=v?E(y)?p[y]:_[y]:y.value;if(f)Te(D)&&lo(D,g);else if(Te(D))D.includes(g)||D.push(g);else if(v)_[y]=[g],E(y)&&(p[y]=_[y]);else{const A=[g];y.value=A,r.k&&(_[r.k]=A)}}else v?(_[y]=b,E(y)&&(p[y]=b)):S&&(y.value=b,r.k&&(_[r.k]=b))};if(b){const D=()=>{w(),Gr.delete(r)};D.id=-1,Gr.set(r,D),mt(D,l)}else ba(r),w()}}}function ba(r){const i=Gr.get(r);i&&(i.flags|=8,Gr.delete(r))}ii().requestIdleCallback;ii().cancelIdleCallback;const Vn=r=>!!r.type.__asyncLoader,si=r=>r.type.__isKeepAlive;function ju(r,i){Bs(r,"a",i)}function Bu(r,i){Bs(r,"da",i)}function Bs(r,i,l=ft){const c=r.__wdc||(r.__wdc=()=>{let f=l;for(;f;){if(f.isDeactivated)return;f=f.parent}return r()});if(li(i,c,l),l){let f=l.parent;for(;f&&f.parent;)si(f.parent.vnode)&&Fu(c,i,l,f),f=f.parent}}function Fu(r,i,l,c){const f=li(i,r,c,!0);ci(()=>{lo(c[i],f)},l)}function li(r,i,l=ft,c=!1){if(l){const f=l[r]||(l[r]=[]),g=i.__weh||(i.__weh=(...b)=>{Yt();const h=Er(l),y=Ht(i,l,r,b);return h(),Qt(),y});return c?f.unshift(g):f.push(g),g}}const tn=r=>(i,l=ft)=>{(!yr||r==="sp")&&li(r,(...c)=>i(...c),l)},Uu=tn("bm"),wr=tn("m"),Vu=tn("bu"),Wu=tn("u"),wo=tn("bum"),ci=tn("um"),Ku=tn("sp"),qu=tn("rtg"),$u=tn("rtc");function zu(r,i=ft){li("ec",r,i)}const Gu="components";function Ju(r,i){return Xu(Gu,r,!0,i)||r}const Zu=Symbol.for("v-ndc");function Xu(r,i,l=!0,c=!1){const f=ot||ft;if(f){const g=f.type;{const h=Ff(g,!1);if(h&&(h===i||h===xt(i)||h===ri(xt(i))))return g}const b=va(f[r]||g[r],i)||va(f.appContext[r],i);return!b&&c?g:b}}function va(r,i){return r&&(r[i]||r[xt(i)]||r[ri(xt(i))])}function Qi(r,i,l,c){let f;const g=l,b=Te(r);if(b||ze(r)){const h=b&&Fn(r);let y=!1,H=!1;h&&(y=!kt(r),H=dn(r),r=oi(r)),f=new Array(r.length);for(let _=0,p=r.length;_<p;_++)f[_]=i(y?H?Vr(it(r[_])):it(r[_]):r[_],_,void 0,g)}else if(typeof r=="number"){f=new Array(r);for(let h=0;h<r;h++)f[h]=i(h+1,h,void 0,g)}else if(Ke(r))if(r[Symbol.iterator])f=Array.from(r,(h,y)=>i(h,y,void 0,g));else{const h=Object.keys(r);f=new Array(h.length);for(let y=0,H=h.length;y<H;y++){const _=h[y];f[y]=i(r[_],_,y,g)}}else f=[];return f}function wa(r,i,l={},c,f){if(ot.ce||ot.parent&&Vn(ot.parent)&&ot.parent.ce){const H=Object.keys(l).length>0;return i!=="default"&&(l.name=i),De(),Tn(lt,null,[Qe("slot",l,c)],H?-2:64)}let g=r[i];g&&g._c&&(g._d=!1),De();const b=g&&Fs(g(l)),h=l.key||b&&b.key,y=Tn(lt,{key:(h&&!en(h)?h:`_${i}`)+(!b&&c?"_fb":"")},b||[],b&&r._===1?64:-2);return g&&g._c&&(g._d=!0),y}function Fs(r){return r.some(i=>gr(i)?!(i.type===ut||i.type===lt&&!Fs(i.children)):!0)?r:null}const eo=r=>r?sl(r)?di(r):eo(r.parent):null,lr=et(Object.create(null),{$:r=>r,$el:r=>r.vnode.el,$data:r=>r.data,$props:r=>r.props,$attrs:r=>r.attrs,$slots:r=>r.slots,$refs:r=>r.refs,$parent:r=>eo(r.parent),$root:r=>eo(r.root),$host:r=>r.ce,$emit:r=>r.emit,$options:r=>Vs(r),$forceUpdate:r=>r.f||(r.f=()=>{vo(r.update)}),$nextTick:r=>r.n||(r.n=Ts.bind(r.proxy)),$watch:r=>wf.bind(r)}),ji=(r,i)=>r!==Fe&&!r.__isScriptSetup&&Ne(r,i),Yu={get({_:r},i){if(i==="__v_skip")return!0;const{ctx:l,setupState:c,data:f,props:g,accessCache:b,type:h,appContext:y}=r;let H;if(i[0]!=="$"){const E=b[i];if(E!==void 0)switch(E){case 1:return c[i];case 2:return f[i];case 4:return l[i];case 3:return g[i]}else{if(ji(c,i))return b[i]=1,c[i];if(f!==Fe&&Ne(f,i))return b[i]=2,f[i];if((H=r.propsOptions[0])&&Ne(H,i))return b[i]=3,g[i];if(l!==Fe&&Ne(l,i))return b[i]=4,l[i];to&&(b[i]=0)}}const _=lr[i];let p,d;if(_)return i==="$attrs"&&st(r.attrs,"get",""),_(r);if((p=h.__cssModules)&&(p=p[i]))return p;if(l!==Fe&&Ne(l,i))return b[i]=4,l[i];if(d=y.config.globalProperties,Ne(d,i))return d[i]},set({_:r},i,l){const{data:c,setupState:f,ctx:g}=r;return ji(f,i)?(f[i]=l,!0):c!==Fe&&Ne(c,i)?(c[i]=l,!0):Ne(r.props,i)||i[0]==="$"&&i.slice(1)in r?!1:(g[i]=l,!0)},has({_:{data:r,setupState:i,accessCache:l,ctx:c,appContext:f,propsOptions:g,type:b}},h){let y,H;return!!(l[h]||r!==Fe&&h[0]!=="$"&&Ne(r,h)||ji(i,h)||(y=g[0])&&Ne(y,h)||Ne(c,h)||Ne(lr,h)||Ne(f.config.globalProperties,h)||(H=b.__cssModules)&&H[h])},defineProperty(r,i,l){return l.get!=null?r._.accessCache[i]=0:Ne(l,"value")&&this.set(r,i,l.value,null),Reflect.defineProperty(r,i,l)}};function Ea(r){return Te(r)?r.reduce((i,l)=>(i[l]=null,i),{}):r}let to=!0;function Qu(r){const i=Vs(r),l=r.proxy,c=r.ctx;to=!1,i.beforeCreate&&Sa(i.beforeCreate,r,"bc");const{data:f,computed:g,methods:b,watch:h,provide:y,inject:H,created:_,beforeMount:p,mounted:d,beforeUpdate:E,updated:v,activated:S,deactivated:w,beforeDestroy:D,beforeUnmount:A,destroyed:M,unmounted:L,render:u,renderTracked:k,renderTriggered:U,errorCaptured:R,serverPrefetch:N,expose:B,inheritAttrs:q,components:J,directives:se,filters:he}=i;if(H&&ef(H,c,null),b)for(const Se in b){const ye=b[Se];_e(ye)&&(c[Se]=ye.bind(l))}if(f){const Se=f.call(l,l);Ke(Se)&&(r.data=go(Se))}if(to=!0,g)for(const Se in g){const ye=g[Se],Pe=_e(ye)?ye.bind(l,l):_e(ye.get)?ye.get.bind(l,l):Ut,qe=!_e(ye)&&_e(ye.set)?ye.set.bind(l):Ut,Ie=Yr({get:Pe,set:qe});Object.defineProperty(c,Se,{enumerable:!0,configurable:!0,get:()=>Ie.value,set:F=>Ie.value=F})}if(h)for(const Se in h)Us(h[Se],c,l,Se);if(y){const Se=_e(y)?y.call(l):y;Reflect.ownKeys(Se).forEach(ye=>{sf(ye,Se[ye])})}_&&Sa(_,r,"c");function Le(Se,ye){Te(ye)?ye.forEach(Pe=>Se(Pe.bind(l))):ye&&Se(ye.bind(l))}if(Le(Uu,p),Le(wr,d),Le(Vu,E),Le(Wu,v),Le(ju,S),Le(Bu,w),Le(zu,R),Le($u,k),Le(qu,U),Le(wo,A),Le(ci,L),Le(Ku,N),Te(B))if(B.length){const Se=r.exposed||(r.exposed={});B.forEach(ye=>{Object.defineProperty(Se,ye,{get:()=>l[ye],set:Pe=>l[ye]=Pe,enumerable:!0})})}else r.exposed||(r.exposed={});u&&r.render===Ut&&(r.render=u),q!=null&&(r.inheritAttrs=q),J&&(r.components=J),se&&(r.directives=se),N&&js(r)}function ef(r,i,l=Ut){Te(r)&&(r=no(r));for(const c in r){const f=r[c];let g;Ke(f)?"default"in f?g=jr(f.from||c,f.default,!0):g=jr(f.from||c):g=jr(f),dt(g)?Object.defineProperty(i,c,{enumerable:!0,configurable:!0,get:()=>g.value,set:b=>g.value=b}):i[c]=g}}function Sa(r,i,l){Ht(Te(r)?r.map(c=>c.bind(i.proxy)):r.bind(i.proxy),i,l)}function Us(r,i,l,c){let f=c.includes(".")?el(l,c):()=>l[c];if(ze(r)){const g=i[r];_e(g)&&cr(f,g)}else if(_e(r))cr(f,r.bind(l));else if(Ke(r))if(Te(r))r.forEach(g=>Us(g,i,l,c));else{const g=_e(r.handler)?r.handler.bind(l):i[r.handler];_e(g)&&cr(f,g,r)}}function Vs(r){const i=r.type,{mixins:l,extends:c}=i,{mixins:f,optionsCache:g,config:{optionMergeStrategies:b}}=r.appContext,h=g.get(i);let y;return h?y=h:!f.length&&!l&&!c?y=i:(y={},f.length&&f.forEach(H=>Jr(y,H,b,!0)),Jr(y,i,b)),Ke(i)&&g.set(i,y),y}function Jr(r,i,l,c=!1){const{mixins:f,extends:g}=i;g&&Jr(r,g,l,!0),f&&f.forEach(b=>Jr(r,b,l,!0));for(const b in i)if(!(c&&b==="expose")){const h=tf[b]||l&&l[b];r[b]=h?h(r[b],i[b]):i[b]}return r}const tf={data:Ca,props:Ta,emits:Ta,methods:nr,computed:nr,beforeCreate:ht,created:ht,beforeMount:ht,mounted:ht,beforeUpdate:ht,updated:ht,beforeDestroy:ht,beforeUnmount:ht,destroyed:ht,unmounted:ht,activated:ht,deactivated:ht,errorCaptured:ht,serverPrefetch:ht,components:nr,directives:nr,watch:rf,provide:Ca,inject:nf};function Ca(r,i){return i?r?function(){return et(_e(r)?r.call(this,this):r,_e(i)?i.call(this,this):i)}:i:r}function nf(r,i){return nr(no(r),no(i))}function no(r){if(Te(r)){const i={};for(let l=0;l<r.length;l++)i[r[l]]=r[l];return i}return r}function ht(r,i){return r?[...new Set([].concat(r,i))]:i}function nr(r,i){return r?et(Object.create(null),r,i):i}function Ta(r,i){return r?Te(r)&&Te(i)?[...new Set([...r,...i])]:et(Object.create(null),Ea(r),Ea(i??{})):i}function rf(r,i){if(!r)return i;if(!i)return r;const l=et(Object.create(null),r);for(const c in i)l[c]=ht(r[c],i[c]);return l}function Ws(){return{app:null,config:{isNativeTag:Qa,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let of=0;function af(r,i){return function(c,f=null){_e(c)||(c=et({},c)),f!=null&&!Ke(f)&&(f=null);const g=Ws(),b=new WeakSet,h=[];let y=!1;const H=g.app={_uid:of++,_component:c,_props:f,_container:null,_context:g,_instance:null,version:Wf,get config(){return g.config},set config(_){},use(_,...p){return b.has(_)||(_&&_e(_.install)?(b.add(_),_.install(H,...p)):_e(_)&&(b.add(_),_(H,...p))),H},mixin(_){return g.mixins.includes(_)||g.mixins.push(_),H},component(_,p){return p?(g.components[_]=p,H):g.components[_]},directive(_,p){return p?(g.directives[_]=p,H):g.directives[_]},mount(_,p,d){if(!y){const E=H._ceVNode||Qe(c,f);return E.appContext=g,d===!0?d="svg":d===!1&&(d=void 0),r(E,_,d),y=!0,H._container=_,_.__vue_app__=H,di(E.component)}},onUnmount(_){h.push(_)},unmount(){y&&(Ht(h,H._instance,16),r(null,H._container),delete H._container.__vue_app__)},provide(_,p){return g.provides[_]=p,H},runWithContext(_){const p=Wn;Wn=H;try{return _()}finally{Wn=p}}};return H}}let Wn=null;function sf(r,i){if(ft){let l=ft.provides;const c=ft.parent&&ft.parent.provides;c===l&&(l=ft.provides=Object.create(c)),l[r]=i}}function jr(r,i,l=!1){const c=al();if(c||Wn){let f=Wn?Wn._context.provides:c?c.parent==null||c.ce?c.vnode.appContext&&c.vnode.appContext.provides:c.parent.provides:void 0;if(f&&r in f)return f[r];if(arguments.length>1)return l&&_e(i)?i.call(c&&c.proxy):i}}const Ks={},qs=()=>Object.create(Ks),$s=r=>Object.getPrototypeOf(r)===Ks;function lf(r,i,l,c=!1){const f={},g=qs();r.propsDefaults=Object.create(null),zs(r,i,f,g);for(const b in r.propsOptions[0])b in f||(f[b]=void 0);l?r.props=c?f:wu(f):r.type.props?r.props=f:r.props=g,r.attrs=g}function cf(r,i,l,c){const{props:f,attrs:g,vnode:{patchFlag:b}}=r,h=He(f),[y]=r.propsOptions;let H=!1;if((c||b>0)&&!(b&16)){if(b&8){const _=r.vnode.dynamicProps;for(let p=0;p<_.length;p++){let d=_[p];if(ui(r.emitsOptions,d))continue;const E=i[d];if(y)if(Ne(g,d))E!==g[d]&&(g[d]=E,H=!0);else{const v=xt(d);f[v]=ro(y,h,v,E,r,!1)}else E!==g[d]&&(g[d]=E,H=!0)}}}else{zs(r,i,f,g)&&(H=!0);let _;for(const p in h)(!i||!Ne(i,p)&&((_=_n(p))===p||!Ne(i,_)))&&(y?l&&(l[p]!==void 0||l[_]!==void 0)&&(f[p]=ro(y,h,p,void 0,r,!0)):delete f[p]);if(g!==h)for(const p in g)(!i||!Ne(i,p))&&(delete g[p],H=!0)}H&&Zt(r.attrs,"set","")}function zs(r,i,l,c){const[f,g]=r.propsOptions;let b=!1,h;if(i)for(let y in i){if(rr(y))continue;const H=i[y];let _;f&&Ne(f,_=xt(y))?!g||!g.includes(_)?l[_]=H:(h||(h={}))[_]=H:ui(r.emitsOptions,y)||(!(y in c)||H!==c[y])&&(c[y]=H,b=!0)}if(g){const y=He(l),H=h||Fe;for(let _=0;_<g.length;_++){const p=g[_];l[p]=ro(f,y,p,H[p],r,!Ne(H,p))}}return b}function ro(r,i,l,c,f,g){const b=r[l];if(b!=null){const h=Ne(b,"default");if(h&&c===void 0){const y=b.default;if(b.type!==Function&&!b.skipFactory&&_e(y)){const{propsDefaults:H}=f;if(l in H)c=H[l];else{const _=Er(f);c=H[l]=y.call(null,i),_()}}else c=y;f.ce&&f.ce._setProp(l,c)}b[0]&&(g&&!h?c=!1:b[1]&&(c===""||c===_n(l))&&(c=!0))}return c}const uf=new WeakMap;function Gs(r,i,l=!1){const c=l?uf:i.propsCache,f=c.get(r);if(f)return f;const g=r.props,b={},h=[];let y=!1;if(!_e(r)){const _=p=>{y=!0;const[d,E]=Gs(p,i,!0);et(b,d),E&&h.push(...E)};!l&&i.mixins.length&&i.mixins.forEach(_),r.extends&&_(r.extends),r.mixins&&r.mixins.forEach(_)}if(!g&&!y)return Ke(r)&&c.set(r,jn),jn;if(Te(g))for(let _=0;_<g.length;_++){const p=xt(g[_]);_a(p)&&(b[p]=Fe)}else if(g)for(const _ in g){const p=xt(_);if(_a(p)){const d=g[_],E=b[p]=Te(d)||_e(d)?{type:d}:et({},d),v=E.type;let S=!1,w=!0;if(Te(v))for(let D=0;D<v.length;++D){const A=v[D],M=_e(A)&&A.name;if(M==="Boolean"){S=!0;break}else M==="String"&&(w=!1)}else S=_e(v)&&v.name==="Boolean";E[0]=S,E[1]=w,(S||Ne(E,"default"))&&h.push(p)}}const H=[b,h];return Ke(r)&&c.set(r,H),H}function _a(r){return r[0]!=="$"&&!rr(r)}const Eo=r=>r==="_"||r==="_ctx"||r==="$stable",So=r=>Te(r)?r.map(Ft):[Ft(r)],ff=(r,i,l)=>{if(i._n)return i;const c=$r((...f)=>So(i(...f)),l);return c._c=!1,c},Js=(r,i,l)=>{const c=r._ctx;for(const f in r){if(Eo(f))continue;const g=r[f];if(_e(g))i[f]=ff(f,g,c);else if(g!=null){const b=So(g);i[f]=()=>b}}},Zs=(r,i)=>{const l=So(i);r.slots.default=()=>l},Xs=(r,i,l)=>{for(const c in i)(l||!Eo(c))&&(r[c]=i[c])},df=(r,i,l)=>{const c=r.slots=qs();if(r.vnode.shapeFlag&32){const f=i._;f?(Xs(c,i,l),l&&is(c,"_",f,!0)):Js(i,c)}else i&&Zs(r,i)},pf=(r,i,l)=>{const{vnode:c,slots:f}=r;let g=!0,b=Fe;if(c.shapeFlag&32){const h=i._;h?l&&h===1?g=!1:Xs(f,i,l):(g=!i.$stable,Js(i,f)),b=i}else i&&(Zs(r,i),b={default:1});if(g)for(const h in f)!Eo(h)&&b[h]==null&&delete f[h]},mt=Af;function hf(r){return mf(r)}function mf(r,i){const l=ii();l.__VUE__=!0;const{insert:c,remove:f,patchProp:g,createElement:b,createText:h,createComment:y,setText:H,setElementText:_,parentNode:p,nextSibling:d,setScopeId:E=Ut,insertStaticContent:v}=r,S=(O,I,V,Y=null,G=null,X=null,oe=void 0,ie=null,ae=!!I.dynamicChildren)=>{if(O===I)return;O&&!wn(O,I)&&(Y=j(O),F(O,G,X,!0),O=null),I.patchFlag===-2&&(ae=!1,I.dynamicChildren=null);const{type:re,ref:we,shapeFlag:de}=I;switch(re){case fi:w(O,I,V,Y);break;case ut:D(O,I,V,Y);break;case Fi:O==null&&A(I,V,Y,oe);break;case lt:J(O,I,V,Y,G,X,oe,ie,ae);break;default:de&1?u(O,I,V,Y,G,X,oe,ie,ae):de&6?se(O,I,V,Y,G,X,oe,ie,ae):(de&64||de&128)&&re.process(O,I,V,Y,G,X,oe,ie,ae,$)}we!=null&&G?sr(we,O&&O.ref,X,I||O,!I):we==null&&O&&O.ref!=null&&sr(O.ref,null,X,O,!0)},w=(O,I,V,Y)=>{if(O==null)c(I.el=h(I.children),V,Y);else{const G=I.el=O.el;I.children!==O.children&&H(G,I.children)}},D=(O,I,V,Y)=>{O==null?c(I.el=y(I.children||""),V,Y):I.el=O.el},A=(O,I,V,Y)=>{[O.el,O.anchor]=v(O.children,I,V,Y,O.el,O.anchor)},M=({el:O,anchor:I},V,Y)=>{let G;for(;O&&O!==I;)G=d(O),c(O,V,Y),O=G;c(I,V,Y)},L=({el:O,anchor:I})=>{let V;for(;O&&O!==I;)V=d(O),f(O),O=V;f(I)},u=(O,I,V,Y,G,X,oe,ie,ae)=>{I.type==="svg"?oe="svg":I.type==="math"&&(oe="mathml"),O==null?k(I,V,Y,G,X,oe,ie,ae):N(O,I,G,X,oe,ie,ae)},k=(O,I,V,Y,G,X,oe,ie)=>{let ae,re;const{props:we,shapeFlag:de,transition:be,dirs:fe}=O;if(ae=O.el=b(O.type,X,we&&we.is,we),de&8?_(ae,O.children):de&16&&R(O.children,ae,null,Y,G,Bi(O,X),oe,ie),fe&&mn(O,null,Y,"created"),U(ae,O,O.scopeId,oe,Y),we){for(const je in we)je!=="value"&&!rr(je)&&g(ae,je,null,we[je],X,Y);"value"in we&&g(ae,"value",null,we.value,X),(re=we.onVnodeBeforeMount)&&jt(re,Y,O)}fe&&mn(O,null,Y,"beforeMount");const xe=gf(G,be);xe&&be.beforeEnter(ae),c(ae,I,V),((re=we&&we.onVnodeMounted)||xe||fe)&&mt(()=>{re&&jt(re,Y,O),xe&&be.enter(ae),fe&&mn(O,null,Y,"mounted")},G)},U=(O,I,V,Y,G)=>{if(V&&E(O,V),Y)for(let X=0;X<Y.length;X++)E(O,Y[X]);if(G){let X=G.subTree;if(I===X||nl(X.type)&&(X.ssContent===I||X.ssFallback===I)){const oe=G.vnode;U(O,oe,oe.scopeId,oe.slotScopeIds,G.parent)}}},R=(O,I,V,Y,G,X,oe,ie,ae=0)=>{for(let re=ae;re<O.length;re++){const we=O[re]=ie?un(O[re]):Ft(O[re]);S(null,we,I,V,Y,G,X,oe,ie)}},N=(O,I,V,Y,G,X,oe)=>{const ie=I.el=O.el;let{patchFlag:ae,dynamicChildren:re,dirs:we}=I;ae|=O.patchFlag&16;const de=O.props||Fe,be=I.props||Fe;let fe;if(V&&gn(V,!1),(fe=be.onVnodeBeforeUpdate)&&jt(fe,V,I,O),we&&mn(I,O,V,"beforeUpdate"),V&&gn(V,!0),(de.innerHTML&&be.innerHTML==null||de.textContent&&be.textContent==null)&&_(ie,""),re?B(O.dynamicChildren,re,ie,V,Y,Bi(I,G),X):oe||ye(O,I,ie,null,V,Y,Bi(I,G),X,!1),ae>0){if(ae&16)q(ie,de,be,V,G);else if(ae&2&&de.class!==be.class&&g(ie,"class",null,be.class,G),ae&4&&g(ie,"style",de.style,be.style,G),ae&8){const xe=I.dynamicProps;for(let je=0;je<xe.length;je++){const Oe=xe[je],tt=de[Oe],at=be[Oe];(at!==tt||Oe==="value")&&g(ie,Oe,tt,at,G,V)}}ae&1&&O.children!==I.children&&_(ie,I.children)}else!oe&&re==null&&q(ie,de,be,V,G);((fe=be.onVnodeUpdated)||we)&&mt(()=>{fe&&jt(fe,V,I,O),we&&mn(I,O,V,"updated")},Y)},B=(O,I,V,Y,G,X,oe)=>{for(let ie=0;ie<I.length;ie++){const ae=O[ie],re=I[ie],we=ae.el&&(ae.type===lt||!wn(ae,re)||ae.shapeFlag&198)?p(ae.el):V;S(ae,re,we,null,Y,G,X,oe,!0)}},q=(O,I,V,Y,G)=>{if(I!==V){if(I!==Fe)for(const X in I)!rr(X)&&!(X in V)&&g(O,X,I[X],null,G,Y);for(const X in V){if(rr(X))continue;const oe=V[X],ie=I[X];oe!==ie&&X!=="value"&&g(O,X,ie,oe,G,Y)}"value"in V&&g(O,"value",I.value,V.value,G)}},J=(O,I,V,Y,G,X,oe,ie,ae)=>{const re=I.el=O?O.el:h(""),we=I.anchor=O?O.anchor:h("");let{patchFlag:de,dynamicChildren:be,slotScopeIds:fe}=I;fe&&(ie=ie?ie.concat(fe):fe),O==null?(c(re,V,Y),c(we,V,Y),R(I.children||[],V,we,G,X,oe,ie,ae)):de>0&&de&64&&be&&O.dynamicChildren?(B(O.dynamicChildren,be,V,G,X,oe,ie),(I.key!=null||G&&I===G.subTree)&&Co(O,I,!0)):ye(O,I,V,we,G,X,oe,ie,ae)},se=(O,I,V,Y,G,X,oe,ie,ae)=>{I.slotScopeIds=ie,O==null?I.shapeFlag&512?G.ctx.activate(I,V,Y,oe,ae):he(I,V,Y,G,X,oe,ae):Ce(O,I,ae)},he=(O,I,V,Y,G,X,oe)=>{const ie=O.component=Pf(O,Y,G);if(si(O)&&(ie.ctx.renderer=$),If(ie,!1,oe),ie.asyncDep){if(G&&G.registerDep(ie,Le,oe),!O.el){const ae=ie.subTree=Qe(ut);D(null,ae,I,V),O.placeholder=ae.el}}else Le(ie,O,I,V,G,X,oe)},Ce=(O,I,V)=>{const Y=I.component=O.component;if(Lf(O,I,V))if(Y.asyncDep&&!Y.asyncResolved){Se(Y,I,V);return}else Y.next=I,Y.update();else I.el=O.el,Y.vnode=I},Le=(O,I,V,Y,G,X,oe)=>{const ie=()=>{if(O.isMounted){let{next:de,bu:be,u:fe,parent:xe,vnode:je}=O;{const yt=Ys(O);if(yt){de&&(de.el=je.el,Se(O,de,oe)),yt.asyncDep.then(()=>{O.isUnmounted||ie()});return}}let Oe=de,tt;gn(O,!1),de?(de.el=je.el,Se(O,de,oe)):de=je,be&&Ir(be),(tt=de.props&&de.props.onVnodeBeforeUpdate)&&jt(tt,xe,de,je),gn(O,!0);const at=Ma(O),Tt=O.subTree;O.subTree=at,S(Tt,at,p(Tt.el),j(Tt),O,G,X),de.el=at.el,Oe===null&&Mf(O,at.el),fe&&mt(fe,G),(tt=de.props&&de.props.onVnodeUpdated)&&mt(()=>jt(tt,xe,de,je),G)}else{let de;const{el:be,props:fe}=I,{bm:xe,m:je,parent:Oe,root:tt,type:at}=O,Tt=Vn(I);gn(O,!1),xe&&Ir(xe),!Tt&&(de=fe&&fe.onVnodeBeforeMount)&&jt(de,Oe,I),gn(O,!0);{tt.ce&&tt.ce._def.shadowRoot!==!1&&tt.ce._injectChildStyle(at);const yt=O.subTree=Ma(O);S(null,yt,V,Y,O,G,X),I.el=yt.el}if(je&&mt(je,G),!Tt&&(de=fe&&fe.onVnodeMounted)){const yt=I;mt(()=>jt(de,Oe,yt),G)}(I.shapeFlag&256||Oe&&Vn(Oe.vnode)&&Oe.vnode.shapeFlag&256)&&O.a&&mt(O.a,G),O.isMounted=!0,I=V=Y=null}};O.scope.on();const ae=O.effect=new ls(ie);O.scope.off();const re=O.update=ae.run.bind(ae),we=O.job=ae.runIfDirty.bind(ae);we.i=O,we.id=O.uid,ae.scheduler=()=>vo(we),gn(O,!0),re()},Se=(O,I,V)=>{I.component=O;const Y=O.vnode.props;O.vnode=I,O.next=null,cf(O,I.props,Y,V),pf(O,I.children,V),Yt(),pa(O),Qt()},ye=(O,I,V,Y,G,X,oe,ie,ae=!1)=>{const re=O&&O.children,we=O?O.shapeFlag:0,de=I.children,{patchFlag:be,shapeFlag:fe}=I;if(be>0){if(be&128){qe(re,de,V,Y,G,X,oe,ie,ae);return}else if(be&256){Pe(re,de,V,Y,G,X,oe,ie,ae);return}}fe&8?(we&16&&Z(re,G,X),de!==re&&_(V,de)):we&16?fe&16?qe(re,de,V,Y,G,X,oe,ie,ae):Z(re,G,X,!0):(we&8&&_(V,""),fe&16&&R(de,V,Y,G,X,oe,ie,ae))},Pe=(O,I,V,Y,G,X,oe,ie,ae)=>{O=O||jn,I=I||jn;const re=O.length,we=I.length,de=Math.min(re,we);let be;for(be=0;be<de;be++){const fe=I[be]=ae?un(I[be]):Ft(I[be]);S(O[be],fe,V,null,G,X,oe,ie,ae)}re>we?Z(O,G,X,!0,!1,de):R(I,V,Y,G,X,oe,ie,ae,de)},qe=(O,I,V,Y,G,X,oe,ie,ae)=>{let re=0;const we=I.length;let de=O.length-1,be=we-1;for(;re<=de&&re<=be;){const fe=O[re],xe=I[re]=ae?un(I[re]):Ft(I[re]);if(wn(fe,xe))S(fe,xe,V,null,G,X,oe,ie,ae);else break;re++}for(;re<=de&&re<=be;){const fe=O[de],xe=I[be]=ae?un(I[be]):Ft(I[be]);if(wn(fe,xe))S(fe,xe,V,null,G,X,oe,ie,ae);else break;de--,be--}if(re>de){if(re<=be){const fe=be+1,xe=fe<we?I[fe].el:Y;for(;re<=be;)S(null,I[re]=ae?un(I[re]):Ft(I[re]),V,xe,G,X,oe,ie,ae),re++}}else if(re>be)for(;re<=de;)F(O[re],G,X,!0),re++;else{const fe=re,xe=re,je=new Map;for(re=xe;re<=be;re++){const Ze=I[re]=ae?un(I[re]):Ft(I[re]);Ze.key!=null&&je.set(Ze.key,re)}let Oe,tt=0;const at=be-xe+1;let Tt=!1,yt=0;const Nt=new Array(at);for(re=0;re<at;re++)Nt[re]=0;for(re=fe;re<=de;re++){const Ze=O[re];if(tt>=at){F(Ze,G,X,!0);continue}let _t;if(Ze.key!=null)_t=je.get(Ze.key);else for(Oe=xe;Oe<=be;Oe++)if(Nt[Oe-xe]===0&&wn(Ze,I[Oe])){_t=Oe;break}_t===void 0?F(Ze,G,X,!0):(Nt[_t-xe]=re+1,_t>=yt?yt=_t:Tt=!0,S(Ze,I[_t],V,null,G,X,oe,ie,ae),tt++)}const Ln=Tt?yf(Nt):jn;for(Oe=Ln.length-1,re=at-1;re>=0;re--){const Ze=xe+re,_t=I[Ze],nt=I[Ze+1],Pt=Ze+1<we?nt.el||nt.placeholder:Y;Nt[re]===0?S(null,_t,V,Pt,G,X,oe,ie,ae):Tt&&(Oe<0||re!==Ln[Oe]?Ie(_t,V,Pt,2):Oe--)}}},Ie=(O,I,V,Y,G=null)=>{const{el:X,type:oe,transition:ie,children:ae,shapeFlag:re}=O;if(re&6){Ie(O.component.subTree,I,V,Y);return}if(re&128){O.suspense.move(I,V,Y);return}if(re&64){oe.move(O,I,V,$);return}if(oe===lt){c(X,I,V);for(let de=0;de<ae.length;de++)Ie(ae[de],I,V,Y);c(O.anchor,I,V);return}if(oe===Fi){M(O,I,V);return}if(Y!==2&&re&1&&ie)if(Y===0)ie.beforeEnter(X),c(X,I,V),mt(()=>ie.enter(X),G);else{const{leave:de,delayLeave:be,afterLeave:fe}=ie,xe=()=>{O.ctx.isUnmounted?f(X):c(X,I,V)},je=()=>{X._isLeaving&&X[Gt](!0),de(X,()=>{xe(),fe&&fe()})};be?be(X,xe,je):je()}else c(X,I,V)},F=(O,I,V,Y=!1,G=!1)=>{const{type:X,props:oe,ref:ie,children:ae,dynamicChildren:re,shapeFlag:we,patchFlag:de,dirs:be,cacheIndex:fe}=O;if(de===-2&&(G=!1),ie!=null&&(Yt(),sr(ie,null,V,O,!0),Qt()),fe!=null&&(I.renderCache[fe]=void 0),we&256){I.ctx.deactivate(O);return}const xe=we&1&&be,je=!Vn(O);let Oe;if(je&&(Oe=oe&&oe.onVnodeBeforeUnmount)&&jt(Oe,I,O),we&6)rn(O.component,V,Y);else{if(we&128){O.suspense.unmount(V,Y);return}xe&&mn(O,null,I,"beforeUnmount"),we&64?O.type.remove(O,I,V,$,Y):re&&!re.hasOnce&&(X!==lt||de>0&&de&64)?Z(re,I,V,!1,!0):(X===lt&&de&384||!G&&we&16)&&Z(ae,I,V),Y&&pt(O)}(je&&(Oe=oe&&oe.onVnodeUnmounted)||xe)&&mt(()=>{Oe&&jt(Oe,I,O),xe&&mn(O,null,I,"unmounted")},V)},pt=O=>{const{type:I,el:V,anchor:Y,transition:G}=O;if(I===lt){nn(V,Y);return}if(I===Fi){L(O);return}const X=()=>{f(V),G&&!G.persisted&&G.afterLeave&&G.afterLeave()};if(O.shapeFlag&1&&G&&!G.persisted){const{leave:oe,delayLeave:ie}=G,ae=()=>oe(V,X);ie?ie(O.el,X,ae):ae()}else X()},nn=(O,I)=>{let V;for(;O!==I;)V=d(O),f(O),O=V;f(I)},rn=(O,I,V)=>{const{bum:Y,scope:G,job:X,subTree:oe,um:ie,m:ae,a:re}=O;La(ae),La(re),Y&&Ir(Y),G.stop(),X&&(X.flags|=8,F(oe,O,I,V)),ie&&mt(ie,I),mt(()=>{O.isUnmounted=!0},I)},Z=(O,I,V,Y=!1,G=!1,X=0)=>{for(let oe=X;oe<O.length;oe++)F(O[oe],I,V,Y,G)},j=O=>{if(O.shapeFlag&6)return j(O.component.subTree);if(O.shapeFlag&128)return O.suspense.next();const I=d(O.anchor||O.el),V=I&&I[ks];return V?d(V):I};let z=!1;const K=(O,I,V)=>{O==null?I._vnode&&F(I._vnode,null,null,!0):S(I._vnode||null,O,I,null,null,null,V),I._vnode=O,z||(z=!0,pa(),Ls(),z=!1)},$={p:S,um:F,m:Ie,r:pt,mt:he,mc:R,pc:ye,pbc:B,n:j,o:r};return{render:K,hydrate:void 0,createApp:af(K)}}function Bi({type:r,props:i},l){return l==="svg"&&r==="foreignObject"||l==="mathml"&&r==="annotation-xml"&&i&&i.encoding&&i.encoding.includes("html")?void 0:l}function gn({effect:r,job:i},l){l?(r.flags|=32,i.flags|=4):(r.flags&=-33,i.flags&=-5)}function gf(r,i){return(!r||r&&!r.pendingBranch)&&i&&!i.persisted}function Co(r,i,l=!1){const c=r.children,f=i.children;if(Te(c)&&Te(f))for(let g=0;g<c.length;g++){const b=c[g];let h=f[g];h.shapeFlag&1&&!h.dynamicChildren&&((h.patchFlag<=0||h.patchFlag===32)&&(h=f[g]=un(f[g]),h.el=b.el),!l&&h.patchFlag!==-2&&Co(b,h)),h.type===fi&&h.patchFlag!==-1&&(h.el=b.el),h.type===ut&&!h.el&&(h.el=b.el)}}function yf(r){const i=r.slice(),l=[0];let c,f,g,b,h;const y=r.length;for(c=0;c<y;c++){const H=r[c];if(H!==0){if(f=l[l.length-1],r[f]<H){i[c]=f,l.push(c);continue}for(g=0,b=l.length-1;g<b;)h=g+b>>1,r[l[h]]<H?g=h+1:b=h;H<r[l[g]]&&(g>0&&(i[c]=l[g-1]),l[g]=c)}}for(g=l.length,b=l[g-1];g-- >0;)l[g]=b,b=i[b];return l}function Ys(r){const i=r.subTree.component;if(i)return i.asyncDep&&!i.asyncResolved?i:Ys(i)}function La(r){if(r)for(let i=0;i<r.length;i++)r[i].flags|=8}const bf=Symbol.for("v-scx"),vf=()=>jr(bf);function cr(r,i,l){return Qs(r,i,l)}function Qs(r,i,l=Fe){const{immediate:c,deep:f,flush:g,once:b}=l,h=et({},l),y=i&&c||!i&&g!=="post";let H;if(yr){if(g==="sync"){const E=vf();H=E.__watcherHandles||(E.__watcherHandles=[])}else if(!y){const E=()=>{};return E.stop=Ut,E.resume=Ut,E.pause=Ut,E}}const _=ft;h.call=(E,v,S)=>Ht(E,_,v,S);let p=!1;g==="post"?h.scheduler=E=>{mt(E,_&&_.suspense)}:g!=="sync"&&(p=!0,h.scheduler=(E,v)=>{v?E():vo(E)}),h.augmentJob=E=>{i&&(E.flags|=4),p&&(E.flags|=2,_&&(E.id=_.uid,E.i=_))};const d=ku(r,i,h);return yr&&(H?H.push(d):y&&d()),d}function wf(r,i,l){const c=this.proxy,f=ze(r)?r.includes(".")?el(c,r):()=>c[r]:r.bind(c,c);let g;_e(i)?g=i:(g=i.handler,l=i);const b=Er(this),h=Qs(f,g.bind(c),l);return b(),h}function el(r,i){const l=i.split(".");return()=>{let c=r;for(let f=0;f<l.length&&c;f++)c=c[l[f]];return c}}const Ef=(r,i)=>i==="modelValue"||i==="model-value"?r.modelModifiers:r[`${i}Modifiers`]||r[`${xt(i)}Modifiers`]||r[`${_n(i)}Modifiers`];function Sf(r,i,...l){if(r.isUnmounted)return;const c=r.vnode.props||Fe;let f=l;const g=i.startsWith("update:"),b=g&&Ef(c,i.slice(7));b&&(b.trim&&(f=l.map(_=>ze(_)?_.trim():_)),b.number&&(f=l.map(qi)));let h,y=c[h=Oi(i)]||c[h=Oi(xt(i))];!y&&g&&(y=c[h=Oi(_n(i))]),y&&Ht(y,r,6,f);const H=c[h+"Once"];if(H){if(!r.emitted)r.emitted={};else if(r.emitted[h])return;r.emitted[h]=!0,Ht(H,r,6,f)}}const Cf=new WeakMap;function tl(r,i,l=!1){const c=l?Cf:i.emitsCache,f=c.get(r);if(f!==void 0)return f;const g=r.emits;let b={},h=!1;if(!_e(r)){const y=H=>{const _=tl(H,i,!0);_&&(h=!0,et(b,_))};!l&&i.mixins.length&&i.mixins.forEach(y),r.extends&&y(r.extends),r.mixins&&r.mixins.forEach(y)}return!g&&!h?(Ke(r)&&c.set(r,null),null):(Te(g)?g.forEach(y=>b[y]=null):et(b,g),Ke(r)&&c.set(r,b),b)}function ui(r,i){return!r||!ei(i)?!1:(i=i.slice(2).replace(/Once$/,""),Ne(r,i[0].toLowerCase()+i.slice(1))||Ne(r,_n(i))||Ne(r,i))}function Ma(r){const{type:i,vnode:l,proxy:c,withProxy:f,propsOptions:[g],slots:b,attrs:h,emit:y,render:H,renderCache:_,props:p,data:d,setupState:E,ctx:v,inheritAttrs:S}=r,w=qr(r);let D,A;try{if(l.shapeFlag&4){const L=f||c,u=L;D=Ft(H.call(u,L,_,p,E,d,v)),A=h}else{const L=i;D=Ft(L.length>1?L(p,{attrs:h,slots:b,emit:y}):L(p,null)),A=i.props?h:Tf(h)}}catch(L){ur.length=0,ai(L,r,1),D=Qe(ut)}let M=D;if(A&&S!==!1){const L=Object.keys(A),{shapeFlag:u}=M;L.length&&u&7&&(g&&L.some(so)&&(A=_f(A,g)),M=pn(M,A,!1,!0))}return l.dirs&&(M=pn(M,null,!1,!0),M.dirs=M.dirs?M.dirs.concat(l.dirs):l.dirs),l.transition&&hr(M,l.transition),D=M,qr(w),D}const Tf=r=>{let i;for(const l in r)(l==="class"||l==="style"||ei(l))&&((i||(i={}))[l]=r[l]);return i},_f=(r,i)=>{const l={};for(const c in r)(!so(c)||!(c.slice(9)in i))&&(l[c]=r[c]);return l};function Lf(r,i,l){const{props:c,children:f,component:g}=r,{props:b,children:h,patchFlag:y}=i,H=g.emitsOptions;if(i.dirs||i.transition)return!0;if(l&&y>=0){if(y&1024)return!0;if(y&16)return c?Aa(c,b,H):!!b;if(y&8){const _=i.dynamicProps;for(let p=0;p<_.length;p++){const d=_[p];if(b[d]!==c[d]&&!ui(H,d))return!0}}}else return(f||h)&&(!h||!h.$stable)?!0:c===b?!1:c?b?Aa(c,b,H):!0:!!b;return!1}function Aa(r,i,l){const c=Object.keys(i);if(c.length!==Object.keys(r).length)return!0;for(let f=0;f<c.length;f++){const g=c[f];if(i[g]!==r[g]&&!ui(l,g))return!0}return!1}function Mf({vnode:r,parent:i},l){for(;i;){const c=i.subTree;if(c.suspense&&c.suspense.activeBranch===r&&(c.el=r.el),c===r)(r=i.vnode).el=l,i=i.parent;else break}}const nl=r=>r.__isSuspense;function Af(r,i){i&&i.pendingBranch?Te(r)?i.effects.push(...r):i.effects.push(r):Ou(r)}const lt=Symbol.for("v-fgt"),fi=Symbol.for("v-txt"),ut=Symbol.for("v-cmt"),Fi=Symbol.for("v-stc"),ur=[];let Ct=null;function De(r=!1){ur.push(Ct=r?null:[])}function kf(){ur.pop(),Ct=ur[ur.length-1]||null}let mr=1;function Zr(r,i=!1){mr+=r,r<0&&Ct&&i&&(Ct.hasOnce=!0)}function rl(r){return r.dynamicChildren=mr>0?Ct||jn:null,kf(),mr>0&&Ct&&Ct.push(r),r}function We(r,i,l,c,f,g){return rl(ve(r,i,l,c,f,g,!0))}function Tn(r,i,l,c,f){return rl(Qe(r,i,l,c,f,!0))}function gr(r){return r?r.__v_isVNode===!0:!1}function wn(r,i){return r.type===i.type&&r.key===i.key}const il=({key:r})=>r??null,Br=({ref:r,ref_key:i,ref_for:l})=>(typeof r=="number"&&(r=""+r),r!=null?ze(r)||dt(r)||_e(r)?{i:ot,r,k:i,f:!!l}:r:null);function ve(r,i=null,l=null,c=0,f=null,g=r===lt?0:1,b=!1,h=!1){const y={__v_isVNode:!0,__v_skip:!0,type:r,props:i,key:i&&il(i),ref:i&&Br(i),scopeId:As,slotScopeIds:null,children:l,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:g,patchFlag:c,dynamicProps:f,dynamicChildren:null,appContext:null,ctx:ot};return h?(To(y,l),g&128&&r.normalize(y)):l&&(y.shapeFlag|=ze(l)?8:16),mr>0&&!b&&Ct&&(y.patchFlag>0||g&6)&&y.patchFlag!==32&&Ct.push(y),y}const Qe=xf;function xf(r,i=null,l=null,c=0,f=null,g=!1){if((!r||r===Zu)&&(r=ut),gr(r)){const h=pn(r,i,!0);return l&&To(h,l),mr>0&&!g&&Ct&&(h.shapeFlag&6?Ct[Ct.indexOf(r)]=h:Ct.push(h)),h.patchFlag=-2,h}if(Uf(r)&&(r=r.__vccOpts),i){i=Df(i);let{class:h,style:y}=i;h&&!ze(h)&&(i.class=zt(h)),Ke(y)&&(bo(y)&&!Te(y)&&(y=et({},y)),i.style=Cn(y))}const b=ze(r)?1:nl(r)?128:xs(r)?64:Ke(r)?4:_e(r)?2:0;return ve(r,i,l,c,f,b,g,!0)}function Df(r){return r?bo(r)||$s(r)?et({},r):r:null}function pn(r,i,l=!1,c=!1){const{props:f,ref:g,patchFlag:b,children:h,transition:y}=r,H=i?Of(f||{},i):f,_={__v_isVNode:!0,__v_skip:!0,type:r.type,props:H,key:H&&il(H),ref:i&&i.ref?l&&g?Te(g)?g.concat(Br(i)):[g,Br(i)]:Br(i):g,scopeId:r.scopeId,slotScopeIds:r.slotScopeIds,children:h,target:r.target,targetStart:r.targetStart,targetAnchor:r.targetAnchor,staticCount:r.staticCount,shapeFlag:r.shapeFlag,patchFlag:i&&r.type!==lt?b===-1?16:b|16:b,dynamicProps:r.dynamicProps,dynamicChildren:r.dynamicChildren,appContext:r.appContext,dirs:r.dirs,transition:y,component:r.component,suspense:r.suspense,ssContent:r.ssContent&&pn(r.ssContent),ssFallback:r.ssFallback&&pn(r.ssFallback),placeholder:r.placeholder,el:r.el,anchor:r.anchor,ctx:r.ctx,ce:r.ce};return y&&c&&hr(_,y.clone(_)),_}function ol(r=" ",i=0){return Qe(fi,null,r,i)}function Jt(r="",i=!1){return i?(De(),Tn(ut,null,r)):Qe(ut,null,r)}function Ft(r){return r==null||typeof r=="boolean"?Qe(ut):Te(r)?Qe(lt,null,r.slice()):gr(r)?un(r):Qe(fi,null,String(r))}function un(r){return r.el===null&&r.patchFlag!==-1||r.memo?r:pn(r)}function To(r,i){let l=0;const{shapeFlag:c}=r;if(i==null)i=null;else if(Te(i))l=16;else if(typeof i=="object")if(c&65){const f=i.default;f&&(f._c&&(f._d=!1),To(r,f()),f._c&&(f._d=!0));return}else{l=32;const f=i._;!f&&!$s(i)?i._ctx=ot:f===3&&ot&&(ot.slots._===1?i._=1:(i._=2,r.patchFlag|=1024))}else _e(i)?(i={default:i,_ctx:ot},l=32):(i=String(i),c&64?(l=16,i=[ol(i)]):l=8);r.children=i,r.shapeFlag|=l}function Of(...r){const i={};for(let l=0;l<r.length;l++){const c=r[l];for(const f in c)if(f==="class")i.class!==c.class&&(i.class=zt([i.class,c.class]));else if(f==="style")i.style=Cn([i.style,c.style]);else if(ei(f)){const g=i[f],b=c[f];b&&g!==b&&!(Te(g)&&g.includes(b))&&(i[f]=g?[].concat(g,b):b)}else f!==""&&(i[f]=c[f])}return i}function jt(r,i,l,c=null){Ht(r,i,7,[l,c])}const Hf=Ws();let Nf=0;function Pf(r,i,l){const c=r.type,f=(i?i.appContext:r.appContext)||Hf,g={uid:Nf++,vnode:r,type:c,parent:i,appContext:f,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new eu(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:i?i.provides:Object.create(f.provides),ids:i?i.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Gs(c,f),emitsOptions:tl(c,f),emit:null,emitted:null,propsDefaults:Fe,inheritAttrs:c.inheritAttrs,ctx:Fe,data:Fe,props:Fe,attrs:Fe,slots:Fe,refs:Fe,setupState:Fe,setupContext:null,suspense:l,suspenseId:l?l.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return g.ctx={_:g},g.root=i?i.root:g,g.emit=Sf.bind(null,g),r.ce&&r.ce(g),g}let ft=null;const al=()=>ft||ot;let Xr,io;{const r=ii(),i=(l,c)=>{let f;return(f=r[l])||(f=r[l]=[]),f.push(c),g=>{f.length>1?f.forEach(b=>b(g)):f[0](g)}};Xr=i("__VUE_INSTANCE_SETTERS__",l=>ft=l),io=i("__VUE_SSR_SETTERS__",l=>yr=l)}const Er=r=>{const i=ft;return Xr(r),r.scope.on(),()=>{r.scope.off(),Xr(i)}},ka=()=>{ft&&ft.scope.off(),Xr(null)};function sl(r){return r.vnode.shapeFlag&4}let yr=!1;function If(r,i=!1,l=!1){i&&io(i);const{props:c,children:f}=r.vnode,g=sl(r);lf(r,c,g,i),df(r,f,l||i);const b=g?Rf(r,i):void 0;return i&&io(!1),b}function Rf(r,i){const l=r.type;r.accessCache=Object.create(null),r.proxy=new Proxy(r.ctx,Yu);const{setup:c}=l;if(c){Yt();const f=r.setupContext=c.length>1?Bf(r):null,g=Er(r),b=vr(c,r,0,[r.props,f]),h=ts(b);if(Qt(),g(),(h||r.sp)&&!Vn(r)&&js(r),h){if(b.then(ka,ka),i)return b.then(y=>{xa(r,y)}).catch(y=>{ai(y,r,0)});r.asyncDep=b}else xa(r,b)}else ll(r)}function xa(r,i,l){_e(i)?r.type.__ssrInlineRender?r.ssrRender=i:r.render=i:Ke(i)&&(r.setupState=Ss(i)),ll(r)}function ll(r,i,l){const c=r.type;r.render||(r.render=c.render||Ut);{const f=Er(r);Yt();try{Qu(r)}finally{Qt(),f()}}}const jf={get(r,i){return st(r,"get",""),r[i]}};function Bf(r){const i=l=>{r.exposed=l||{}};return{attrs:new Proxy(r.attrs,jf),slots:r.slots,emit:r.emit,expose:i}}function di(r){return r.exposed?r.exposeProxy||(r.exposeProxy=new Proxy(Ss(Eu(r.exposed)),{get(i,l){if(l in i)return i[l];if(l in lr)return lr[l](r)},has(i,l){return l in i||l in lr}})):r.proxy}function Ff(r,i=!0){return _e(r)?r.displayName||r.name:r.name||i&&r.__name}function Uf(r){return _e(r)&&"__vccOpts"in r}const Yr=(r,i)=>Mu(r,i,yr);function Vf(r,i,l){try{Zr(-1);const c=arguments.length;return c===2?Ke(i)&&!Te(i)?gr(i)?Qe(r,null,[i]):Qe(r,i):Qe(r,null,i):(c>3?l=Array.prototype.slice.call(arguments,2):c===3&&gr(l)&&(l=[l]),Qe(r,i,l))}finally{Zr(1)}}const Wf="3.5.22";/**
* @vue/runtime-dom v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let oo;const Da=typeof window<"u"&&window.trustedTypes;if(Da)try{oo=Da.createPolicy("vue",{createHTML:r=>r})}catch{}const cl=oo?r=>oo.createHTML(r):r=>r,Kf="http://www.w3.org/2000/svg",qf="http://www.w3.org/1998/Math/MathML",$t=typeof document<"u"?document:null,Oa=$t&&$t.createElement("template"),$f={insert:(r,i,l)=>{i.insertBefore(r,l||null)},remove:r=>{const i=r.parentNode;i&&i.removeChild(r)},createElement:(r,i,l,c)=>{const f=i==="svg"?$t.createElementNS(Kf,r):i==="mathml"?$t.createElementNS(qf,r):l?$t.createElement(r,{is:l}):$t.createElement(r);return r==="select"&&c&&c.multiple!=null&&f.setAttribute("multiple",c.multiple),f},createText:r=>$t.createTextNode(r),createComment:r=>$t.createComment(r),setText:(r,i)=>{r.nodeValue=i},setElementText:(r,i)=>{r.textContent=i},parentNode:r=>r.parentNode,nextSibling:r=>r.nextSibling,querySelector:r=>$t.querySelector(r),setScopeId(r,i){r.setAttribute(i,"")},insertStaticContent(r,i,l,c,f,g){const b=l?l.previousSibling:i.lastChild;if(f&&(f===g||f.nextSibling))for(;i.insertBefore(f.cloneNode(!0),l),!(f===g||!(f=f.nextSibling)););else{Oa.innerHTML=cl(c==="svg"?`<svg>${r}</svg>`:c==="mathml"?`<math>${r}</math>`:r);const h=Oa.content;if(c==="svg"||c==="mathml"){const y=h.firstChild;for(;y.firstChild;)h.appendChild(y.firstChild);h.removeChild(y)}i.insertBefore(h,l)}return[b?b.nextSibling:i.firstChild,l?l.previousSibling:i.lastChild]}},ln="transition",er="animation",br=Symbol("_vtc"),ul={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},zf=et({},Hs,ul),Gf=r=>(r.displayName="Transition",r.props=zf,r),Jf=Gf((r,{slots:i})=>Vf(Ru,Zf(r),i)),yn=(r,i=[])=>{Te(r)?r.forEach(l=>l(...i)):r&&r(...i)},Ha=r=>r?Te(r)?r.some(i=>i.length>1):r.length>1:!1;function Zf(r){const i={};for(const J in r)J in ul||(i[J]=r[J]);if(r.css===!1)return i;const{name:l="v",type:c,duration:f,enterFromClass:g=`${l}-enter-from`,enterActiveClass:b=`${l}-enter-active`,enterToClass:h=`${l}-enter-to`,appearFromClass:y=g,appearActiveClass:H=b,appearToClass:_=h,leaveFromClass:p=`${l}-leave-from`,leaveActiveClass:d=`${l}-leave-active`,leaveToClass:E=`${l}-leave-to`}=r,v=Xf(f),S=v&&v[0],w=v&&v[1],{onBeforeEnter:D,onEnter:A,onEnterCancelled:M,onLeave:L,onLeaveCancelled:u,onBeforeAppear:k=D,onAppear:U=A,onAppearCancelled:R=M}=i,N=(J,se,he,Ce)=>{J._enterCancelled=Ce,bn(J,se?_:h),bn(J,se?H:b),he&&he()},B=(J,se)=>{J._isLeaving=!1,bn(J,p),bn(J,E),bn(J,d),se&&se()},q=J=>(se,he)=>{const Ce=J?U:A,Le=()=>N(se,J,he);yn(Ce,[se,Le]),Na(()=>{bn(se,J?y:g),qt(se,J?_:h),Ha(Ce)||Pa(se,c,S,Le)})};return et(i,{onBeforeEnter(J){yn(D,[J]),qt(J,g),qt(J,b)},onBeforeAppear(J){yn(k,[J]),qt(J,y),qt(J,H)},onEnter:q(!1),onAppear:q(!0),onLeave(J,se){J._isLeaving=!0;const he=()=>B(J,se);qt(J,p),J._enterCancelled?(qt(J,d),ja(J)):(ja(J),qt(J,d)),Na(()=>{J._isLeaving&&(bn(J,p),qt(J,E),Ha(L)||Pa(J,c,w,he))}),yn(L,[J,he])},onEnterCancelled(J){N(J,!1,void 0,!0),yn(M,[J])},onAppearCancelled(J){N(J,!0,void 0,!0),yn(R,[J])},onLeaveCancelled(J){B(J),yn(u,[J])}})}function Xf(r){if(r==null)return null;if(Ke(r))return[Ui(r.enter),Ui(r.leave)];{const i=Ui(r);return[i,i]}}function Ui(r){return zc(r)}function qt(r,i){i.split(/\s+/).forEach(l=>l&&r.classList.add(l)),(r[br]||(r[br]=new Set)).add(i)}function bn(r,i){i.split(/\s+/).forEach(c=>c&&r.classList.remove(c));const l=r[br];l&&(l.delete(i),l.size||(r[br]=void 0))}function Na(r){requestAnimationFrame(()=>{requestAnimationFrame(r)})}let Yf=0;function Pa(r,i,l,c){const f=r._endId=++Yf,g=()=>{f===r._endId&&c()};if(l!=null)return setTimeout(g,l);const{type:b,timeout:h,propCount:y}=Qf(r,i);if(!b)return c();const H=b+"end";let _=0;const p=()=>{r.removeEventListener(H,d),g()},d=E=>{E.target===r&&++_>=y&&p()};setTimeout(()=>{_<y&&p()},h+1),r.addEventListener(H,d)}function Qf(r,i){const l=window.getComputedStyle(r),c=v=>(l[v]||"").split(", "),f=c(`${ln}Delay`),g=c(`${ln}Duration`),b=Ia(f,g),h=c(`${er}Delay`),y=c(`${er}Duration`),H=Ia(h,y);let _=null,p=0,d=0;i===ln?b>0&&(_=ln,p=b,d=g.length):i===er?H>0&&(_=er,p=H,d=y.length):(p=Math.max(b,H),_=p>0?b>H?ln:er:null,d=_?_===ln?g.length:y.length:0);const E=_===ln&&/\b(?:transform|all)(?:,|$)/.test(c(`${ln}Property`).toString());return{type:_,timeout:p,propCount:d,hasTransform:E}}function Ia(r,i){for(;r.length<i.length;)r=r.concat(r);return Math.max(...i.map((l,c)=>Ra(l)+Ra(r[c])))}function Ra(r){return r==="auto"?0:Number(r.slice(0,-1).replace(",","."))*1e3}function ja(r){return(r?r.ownerDocument:document).body.offsetHeight}function ed(r,i,l){const c=r[br];c&&(i=(i?[i,...c]:[...c]).join(" ")),i==null?r.removeAttribute("class"):l?r.setAttribute("class",i):r.className=i}const Qr=Symbol("_vod"),fl=Symbol("_vsh"),Ba={name:"show",beforeMount(r,{value:i},{transition:l}){r[Qr]=r.style.display==="none"?"":r.style.display,l&&i?l.beforeEnter(r):tr(r,i)},mounted(r,{value:i},{transition:l}){l&&i&&l.enter(r)},updated(r,{value:i,oldValue:l},{transition:c}){!i!=!l&&(c?i?(c.beforeEnter(r),tr(r,!0),c.enter(r)):c.leave(r,()=>{tr(r,!1)}):tr(r,i))},beforeUnmount(r,{value:i}){tr(r,i)}};function tr(r,i){r.style.display=i?r[Qr]:"none",r[fl]=!i}const td=Symbol(""),nd=/(?:^|;)\s*display\s*:/;function rd(r,i,l){const c=r.style,f=ze(l);let g=!1;if(l&&!f){if(i)if(ze(i))for(const b of i.split(";")){const h=b.slice(0,b.indexOf(":")).trim();l[h]==null&&Fr(c,h,"")}else for(const b in i)l[b]==null&&Fr(c,b,"");for(const b in l)b==="display"&&(g=!0),Fr(c,b,l[b])}else if(f){if(i!==l){const b=c[td];b&&(l+=";"+b),c.cssText=l,g=nd.test(l)}}else i&&r.removeAttribute("style");Qr in r&&(r[Qr]=g?c.display:"",r[fl]&&(c.display="none"))}const Fa=/\s*!important$/;function Fr(r,i,l){if(Te(l))l.forEach(c=>Fr(r,i,c));else if(l==null&&(l=""),i.startsWith("--"))r.setProperty(i,l);else{const c=id(r,i);Fa.test(l)?r.setProperty(_n(c),l.replace(Fa,""),"important"):r[c]=l}}const Ua=["Webkit","Moz","ms"],Vi={};function id(r,i){const l=Vi[i];if(l)return l;let c=xt(i);if(c!=="filter"&&c in r)return Vi[i]=c;c=ri(c);for(let f=0;f<Ua.length;f++){const g=Ua[f]+c;if(g in r)return Vi[i]=g}return i}const Va="http://www.w3.org/1999/xlink";function Wa(r,i,l,c,f,g=Qc(i)){c&&i.startsWith("xlink:")?l==null?r.removeAttributeNS(Va,i.slice(6,i.length)):r.setAttributeNS(Va,i,l):l==null||g&&!os(l)?r.removeAttribute(i):r.setAttribute(i,g?"":en(l)?String(l):l)}function Ka(r,i,l,c,f){if(i==="innerHTML"||i==="textContent"){l!=null&&(r[i]=i==="innerHTML"?cl(l):l);return}const g=r.tagName;if(i==="value"&&g!=="PROGRESS"&&!g.includes("-")){const h=g==="OPTION"?r.getAttribute("value")||"":r.value,y=l==null?r.type==="checkbox"?"on":"":String(l);(h!==y||!("_value"in r))&&(r.value=y),l==null&&r.removeAttribute(i),r._value=l;return}let b=!1;if(l===""||l==null){const h=typeof r[i];h==="boolean"?l=os(l):l==null&&h==="string"?(l="",b=!0):h==="number"&&(l=0,b=!0)}try{r[i]=l}catch{}b&&r.removeAttribute(f||i)}function In(r,i,l,c){r.addEventListener(i,l,c)}function od(r,i,l,c){r.removeEventListener(i,l,c)}const qa=Symbol("_vei");function ad(r,i,l,c,f=null){const g=r[qa]||(r[qa]={}),b=g[i];if(c&&b)b.value=c;else{const[h,y]=sd(i);if(c){const H=g[i]=ud(c,f);In(r,h,H,y)}else b&&(od(r,h,b,y),g[i]=void 0)}}const $a=/(?:Once|Passive|Capture)$/;function sd(r){let i;if($a.test(r)){i={};let c;for(;c=r.match($a);)r=r.slice(0,r.length-c[0].length),i[c[0].toLowerCase()]=!0}return[r[2]===":"?r.slice(3):_n(r.slice(2)),i]}let Wi=0;const ld=Promise.resolve(),cd=()=>Wi||(ld.then(()=>Wi=0),Wi=Date.now());function ud(r,i){const l=c=>{if(!c._vts)c._vts=Date.now();else if(c._vts<=l.attached)return;Ht(fd(c,l.value),i,5,[c])};return l.value=r,l.attached=cd(),l}function fd(r,i){if(Te(i)){const l=r.stopImmediatePropagation;return r.stopImmediatePropagation=()=>{l.call(r),r._stopped=!0},i.map(c=>f=>!f._stopped&&c&&c(f))}else return i}const za=r=>r.charCodeAt(0)===111&&r.charCodeAt(1)===110&&r.charCodeAt(2)>96&&r.charCodeAt(2)<123,dd=(r,i,l,c,f,g)=>{const b=f==="svg";i==="class"?ed(r,c,b):i==="style"?rd(r,l,c):ei(i)?so(i)||ad(r,i,l,c,g):(i[0]==="."?(i=i.slice(1),!0):i[0]==="^"?(i=i.slice(1),!1):pd(r,i,c,b))?(Ka(r,i,c),!r.tagName.includes("-")&&(i==="value"||i==="checked"||i==="selected")&&Wa(r,i,c,b,g,i!=="value")):r._isVueCE&&(/[A-Z]/.test(i)||!ze(c))?Ka(r,xt(i),c,g,i):(i==="true-value"?r._trueValue=c:i==="false-value"&&(r._falseValue=c),Wa(r,i,c,b))};function pd(r,i,l,c){if(c)return!!(i==="innerHTML"||i==="textContent"||i in r&&za(i)&&_e(l));if(i==="spellcheck"||i==="draggable"||i==="translate"||i==="autocorrect"||i==="form"||i==="list"&&r.tagName==="INPUT"||i==="type"&&r.tagName==="TEXTAREA")return!1;if(i==="width"||i==="height"){const f=r.tagName;if(f==="IMG"||f==="VIDEO"||f==="CANVAS"||f==="SOURCE")return!1}return za(i)&&ze(l)?!1:i in r}const Ga=r=>{const i=r.props["onUpdate:modelValue"]||!1;return Te(i)?l=>Ir(i,l):i};function hd(r){r.target.composing=!0}function Ja(r){const i=r.target;i.composing&&(i.composing=!1,i.dispatchEvent(new Event("input")))}const Ki=Symbol("_assign"),Za={created(r,{modifiers:{lazy:i,trim:l,number:c}},f){r[Ki]=Ga(f);const g=c||f.props&&f.props.type==="number";In(r,i?"change":"input",b=>{if(b.target.composing)return;let h=r.value;l&&(h=h.trim()),g&&(h=qi(h)),r[Ki](h)}),l&&In(r,"change",()=>{r.value=r.value.trim()}),i||(In(r,"compositionstart",hd),In(r,"compositionend",Ja),In(r,"change",Ja))},mounted(r,{value:i}){r.value=i??""},beforeUpdate(r,{value:i,oldValue:l,modifiers:{lazy:c,trim:f,number:g}},b){if(r[Ki]=Ga(b),r.composing)return;const h=(g||r.type==="number")&&!/^0\d/.test(r.value)?qi(r.value):r.value,y=i??"";h!==y&&(document.activeElement===r&&r.type!=="range"&&(c&&i===l||f&&r.value.trim()===y)||(r.value=y))}},md=["ctrl","shift","alt","meta"],gd={stop:r=>r.stopPropagation(),prevent:r=>r.preventDefault(),self:r=>r.target!==r.currentTarget,ctrl:r=>!r.ctrlKey,shift:r=>!r.shiftKey,alt:r=>!r.altKey,meta:r=>!r.metaKey,left:r=>"button"in r&&r.button!==0,middle:r=>"button"in r&&r.button!==1,right:r=>"button"in r&&r.button!==2,exact:(r,i)=>md.some(l=>r[`${l}Key`]&&!i.includes(l))},Rn=(r,i)=>{const l=r._withMods||(r._withMods={}),c=i.join(".");return l[c]||(l[c]=((f,...g)=>{for(let b=0;b<i.length;b++){const h=gd[i[b]];if(h&&h(f,i))return}return r(f,...g)}))},yd=et({patchProp:dd},$f);let Xa;function bd(){return Xa||(Xa=hf(yd))}const vd=((...r)=>{const i=bd().createApp(...r),{mount:l}=i;return i.mount=c=>{const f=Ed(c);if(!f)return;const g=i._component;!_e(g)&&!g.render&&!g.template&&(g.template=f.innerHTML),f.nodeType===1&&(f.textContent="");const b=l(f,!1,wd(f));return f instanceof Element&&(f.removeAttribute("v-cloak"),f.setAttribute("data-v-app","")),b},i});function wd(r){if(r instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&r instanceof MathMLElement)return"mathml"}function Ed(r){return ze(r)?document.querySelector(r):r}const Sd={class:"tree-item"},Cd={key:0,class:"drop-indicator top"},Td={key:1,class:"label"},_d={class:"actions"},Ld={key:1,class:"drop-indicator bottom"},Md={key:2,class:"tree-children"},Ad={key:0,class:"drop-indicator top"},kd=["onClick","onKeydown","onDragstart","onDragenter","onDragover","onDrop"],xd={class:"chevron-spacer"},Dd=["onBlur","onKeydown"],Od={key:1,class:"label"},Hd={class:"actions"},Nd=["onClick"],Pd={key:1,class:"drop-indicator bottom"},Id=Kn({__name:"FolderItem",props:{folder:{},currentNoteId:{},level:{},draggingItem:{},dropTarget:{},dropPosition:{},renamingItem:{},isLastChild:{type:Boolean}},emits:["select-note","delete-note","delete-folder","rename-folder","rename-note","start-rename","create-note","toggle-folder","drag-start","drag-enter","drag-leave","drop"],setup(r,{emit:i}){const l=r,c=i,f=ct(""),g=Yr(()=>l.renamingItem?.type==="folder"&&l.renamingItem?.id===l.folder.id),b={mounted(u){Ts(()=>{u.focus(),u.select()})}};function h(){g.value||c("toggle-folder",l.folder)}function y(u){u.key==="F2"&&(u.preventDefault(),u.stopPropagation(),f.value=l.folder.name,c("start-rename","folder",l.folder.id))}function H(){f.value.trim()&&f.value!==l.folder.name?c("rename-folder",l.folder.id,f.value):c("rename-folder",l.folder.id,l.folder.name)}function _(u){u.key==="Enter"?(u.preventDefault(),H()):u.key==="Escape"&&(u.preventDefault(),c("rename-folder",l.folder.id,l.folder.name))}function p(u){return l.renamingItem?.type==="note"&&l.renamingItem?.id===u}function d(u,k){u.key==="F2"&&(u.preventDefault(),u.stopPropagation(),f.value=k.title||"无标题",c("start-rename","note",k.id))}function E(u,k){f.value.trim()?c("rename-note",u,f.value):c("rename-note",u,k||"无标题")}function v(u,k,U){u.key==="Enter"?(u.preventDefault(),E(k,U)):u.key==="Escape"&&(u.preventDefault(),c("rename-note",k,U||"无标题"))}function S(u,k,U){const R={type:k,id:U.id,name:k==="folder"?U.name:U.title||"无标题",data:U};c("drag-start",R,u)}function w(u){u.preventDefault(),u.stopPropagation(),A(u,"folder",l.folder)}function D(u,k){u.preventDefault(),u.stopPropagation(),A(u,"note",k)}function A(u,k,U){u.stopPropagation();const R=u.currentTarget.getBoundingClientRect(),N=u.clientY-R.top,B=R.height;let q;k==="folder"?N<B*.25?q="before":N>B*.75?q="after":q="inside":q=N<=B/2?"before":"after",c("drag-enter",{type:k,id:U.id,data:U},q,u)}function M(){}function L(u,k,U){u.preventDefault(),u.stopPropagation(),l.dropTarget&&l.dropPosition&&c("drop",l.dropTarget,l.dropPosition)}return(u,k)=>{const U=Ju("FolderItem",!0);return De(),We("div",Sd,[r.dropTarget?.id===r.folder.id&&r.dropPosition==="before"&&r.draggingItem?.id!==r.folder.id?(De(),We("div",Cd)):Jt("",!0),ve("div",{class:zt(["tree-row folder-row",{"drag-over-inside":r.dropTarget?.id===r.folder.id&&r.dropPosition==="inside"}]),style:Cn({paddingLeft:`${r.level*12+4}px`}),tabindex:0,onClick:h,onKeydown:y,draggable:"true",onDragstart:k[4]||(k[4]=R=>S(R,"folder",r.folder)),onDragenter:k[5]||(k[5]=R=>A(R,"folder",r.folder)),onDragleave:M,onDragover:w,onDrop:k[6]||(k[6]=R=>L(R,"folder",r.folder))},[ve("div",{class:zt(["chevron",{expanded:r.folder.expanded}])},[r.level>0?(De(),We("div",{key:0,class:zt(["vertical-line",{"is-last":r.isLastChild}])},null,2)):Jt("",!0),k[21]||(k[21]=ve("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},[ve("path",{d:"M6 5l4 3-4 3",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})],-1))],2),ve("div",{class:zt(["icon folder-icon",{expanded:r.folder.expanded}])},[...k[22]||(k[22]=[ve("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},[ve("path",{d:"M14.5 5.5v7a1 1 0 01-1 1h-11a1 1 0 01-1-1v-8a1 1 0 011-1h4l1.5 1.5h5.5a1 1 0 011 1z",fill:"#fbbf24"}),ve("path",{d:"M6.5 3.5h-4a1 1 0 00-1 1v1h6v-1.5a.5.5 0 00-.5-.5h-1l.5-.5z",fill:"#f59e0b"})],-1)])],2),g.value?zr((De(),We("input",{key:0,"onUpdate:modelValue":k[0]||(k[0]=R=>f.value=R),class:"rename-input",onBlur:H,onKeydown:_,onClick:k[1]||(k[1]=Rn(()=>{},["stop"]))},null,544)),[[b],[Za,f.value]]):(De(),We("div",Td,En(r.folder.name),1)),ve("div",_d,[ve("button",{onClick:k[2]||(k[2]=Rn(R=>u.$emit("create-note",r.folder.id),["stop"])),class:"action-btn",title:"新建笔记"},[...k[23]||(k[23]=[ve("svg",{width:"14",height:"14",viewBox:"0 0 16 16",fill:"currentColor"},[ve("path",{d:"M14 3H2a1 1 0 00-1 1v8a1 1 0 001 1h12a1 1 0 001-1V4a1 1 0 00-1-1zm-1 8H3V5h10v6z"})],-1)])]),ve("button",{onClick:k[3]||(k[3]=Rn(R=>u.$emit("delete-folder",r.folder.id),["stop"])),class:"action-btn delete",title:"删除文件夹"},[...k[24]||(k[24]=[ve("svg",{width:"14",height:"14",viewBox:"0 0 16 16",fill:"currentColor"},[ve("path",{d:"M11 3h3v1h-1v9a2 2 0 01-2 2H5a2 2 0 01-2-2V4H2V3h3V2a1 1 0 011-1h4a1 1 0 011 1v1zM6 6v6h1V6H6zm3 0v6h1V6H9z"})],-1)])])])],38),r.dropTarget?.id===r.folder.id&&r.dropPosition==="after"&&r.draggingItem?.id!==r.folder.id?(De(),We("div",Ld)):Jt("",!0),r.folder.expanded?(De(),We("div",Md,[(De(!0),We(lt,null,Qi(r.folder.notes,(R,N)=>(De(),We("div",{key:R.id,class:"note-item-wrapper"},[r.dropTarget?.id===R.id&&r.dropPosition==="before"&&r.draggingItem?.id!==R.id?(De(),We("div",Ad)):Jt("",!0),ve("div",{class:zt(["tree-row note-row",{active:R.id===r.currentNoteId,"drag-over":r.dropTarget?.id===R.id&&r.dropPosition==="inside"}]),style:Cn({paddingLeft:`${(r.level+1)*12+4}px`}),tabindex:0,onClick:B=>!p(R.id)&&u.$emit("select-note",R.id),onKeydown:B=>d(B,R),draggable:"true",onDragstart:B=>S(B,"note",R),onDragenter:B=>A(B,"note",R),onDragleave:M,onDragover:B=>D(B,R),onDrop:B=>L(B)},[ve("div",xd,[ve("div",{class:zt(["vertical-line-note",{"is-last":N===r.folder.notes.length-1&&(!r.folder.subfolders||r.folder.subfolders.length===0)}])},null,2),k[25]||(k[25]=ve("div",{class:"horizontal-line-note"},null,-1))]),k[27]||(k[27]=ve("div",{class:"icon"},[ve("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor"},[ve("path",{d:"M4 2a2 2 0 00-2 2v8a2 2 0 002 2h8a2 2 0 002-2V6.414A2 2 0 0013.414 5L11 2.586A2 2 0 009.586 2H4zm5 2v3h3l-3-3z"})])],-1)),p(R.id)?zr((De(),We("input",{key:0,"onUpdate:modelValue":k[7]||(k[7]=B=>f.value=B),class:"rename-input",onBlur:B=>E(R.id,R.title),onKeydown:B=>v(B,R.id,R.title),onClick:k[8]||(k[8]=Rn(()=>{},["stop"]))},null,40,Dd)),[[b],[Za,f.value]]):(De(),We("div",Od,En(R.title||"无标题"),1)),ve("div",Hd,[ve("button",{onClick:Rn(B=>u.$emit("delete-note",R.id),["stop"]),class:"action-btn delete",title:"删除"},[...k[26]||(k[26]=[ve("svg",{width:"14",height:"14",viewBox:"0 0 16 16",fill:"currentColor"},[ve("path",{d:"M11 3h3v1h-1v9a2 2 0 01-2 2H5a2 2 0 01-2-2V4H2V3h3V2a1 1 0 011-1h4a1 1 0 011 1v1zM6 6v6h1V6H6zm3 0v6h1V6H9z"})],-1)])],8,Nd)])],46,kd),r.dropTarget?.id===R.id&&r.dropPosition==="after"&&r.draggingItem?.id!==R.id?(De(),We("div",Pd)):Jt("",!0)]))),128)),(De(!0),We(lt,null,Qi(r.folder.subfolders,(R,N)=>(De(),Tn(U,{key:R.id,folder:R,currentNoteId:r.currentNoteId,level:r.level+1,draggingItem:r.draggingItem,dropTarget:r.dropTarget,dropPosition:r.dropPosition,renamingItem:r.renamingItem,isLastChild:N===(r.folder.subfolders?.length||0)-1,onSelectNote:k[9]||(k[9]=B=>u.$emit("select-note",B)),onDeleteNote:k[10]||(k[10]=B=>u.$emit("delete-note",B)),onDeleteFolder:k[11]||(k[11]=B=>u.$emit("delete-folder",B)),onRenameFolder:k[12]||(k[12]=(B,q)=>u.$emit("rename-folder",B,q)),onRenameNote:k[13]||(k[13]=(B,q)=>u.$emit("rename-note",B,q)),onStartRename:k[14]||(k[14]=(B,q)=>u.$emit("start-rename",B,q)),onCreateNote:k[15]||(k[15]=B=>u.$emit("create-note",B)),onToggleFolder:k[16]||(k[16]=B=>u.$emit("toggle-folder",B)),onDragStart:k[17]||(k[17]=(B,q)=>u.$emit("drag-start",B,q)),onDragEnter:k[18]||(k[18]=(B,q,J)=>u.$emit("drag-enter",B,q,J)),onDragLeave:k[19]||(k[19]=B=>u.$emit("drag-leave")),onDrop:k[20]||(k[20]=(B,q)=>u.$emit("drop",B,q))},null,8,["folder","currentNoteId","level","draggingItem","dropTarget","dropPosition","renamingItem","isLastChild"]))),128))])):Jt("",!0)])}}}),qn=(r,i)=>{const l=r.__vccOpts||r;for(const[c,f]of i)l[c]=f;return l},Rd=qn(Id,[["__scopeId","data-v-1f638377"]]),jd={class:"toolbar"},Bd={class:"toolbar-left"},Fd={class:"tree-content"},Ud={key:0,class:"drag-ghost"},Vd={width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",class:"ghost-icon"},Wd={key:0,d:"M7 3H2a1 1 0 00-1 1v8a1 1 0 001 1h12a1 1 0 001-1V5a1 1 0 00-1-1H8.5L7 3z"},Kd={key:1,d:"M4 2a2 2 0 00-2 2v8a2 2 0 002 2h8a2 2 0 002-2V6.414A2 2 0 0013.414 5L11 2.586A2 2 0 009.586 2H4zm5 2v3h3l-3-3z"},qd=Kn({__name:"FileTree",props:{folders:{},currentNoteId:{}},emits:["create-note","create-folder","select-note","delete-note","delete-folder","rename-folder","rename-note","toggle-collapse","move-item"],setup(r,{emit:i}){const l=i,c=ct(null),f=ct(null),g=ct(null),b=ct(null),h=ct(null);function y(A){A.expanded=!A.expanded}function H(A,M){h.value={type:A,id:M}}function _(){h.value=null}function p(A,M){l("rename-folder",A,M),_()}function d(A,M){l("rename-note",A,M),_()}function E(A,M){c.value=A;const L=document.createElement("div");L.style.opacity="0",document.body.appendChild(L),M.dataTransfer?.setDragImage(L,0,0),setTimeout(()=>document.body.removeChild(L),0);const u=()=>{c.value=null,f.value=null,g.value=null,document.removeEventListener("dragend",u),b.value&&(clearTimeout(b.value),b.value=null)};document.addEventListener("dragend",u)}function v(A){A.preventDefault()}function S(A,M,L){if(!c.value)return;if(c.value.id===A.id){f.value=null,g.value=null;return}let u=M;c.value.type==="note"&&A.type==="folder"&&(u="inside"),c.value.type==="folder"&&A.type==="note"&&(u="inside"),f.value=A,g.value=u,u==="inside"&&A.type==="folder"?(b.value&&clearTimeout(b.value),b.value=setTimeout(()=>{A.data.expanded||(A.data.expanded=!0)},800)):b.value&&(clearTimeout(b.value),b.value=null)}function w(){b.value&&(clearTimeout(b.value),b.value=null)}function D(A,M){c.value&&(l("move-item",c.value,A,M),c.value=null,f.value=null,g.value=null,b.value&&(clearTimeout(b.value),b.value=null))}return(A,M)=>(De(),We("div",{class:"file-tree-container",onDragover:v},[ve("div",jd,[ve("div",Bd,[ve("button",{onClick:M[0]||(M[0]=L=>A.$emit("create-note",r.folders[0]?.id)),class:"tool-btn",title:"新建笔记"},[...M[7]||(M[7]=[ve("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor"},[ve("path",{d:"M14 3H2a1 1 0 00-1 1v8a1 1 0 001 1h12a1 1 0 001-1V4a1 1 0 00-1-1zm-1 8H3V5h10v6z"}),ve("path",{d:"M8 6v4M6 8h4",stroke:"currentColor","stroke-width":"1.5"})],-1)])]),ve("button",{onClick:M[1]||(M[1]=L=>A.$emit("create-folder")),class:"tool-btn",title:"新建文件夹"},[...M[8]||(M[8]=[ve("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor"},[ve("path",{d:"M7 3H2a1 1 0 00-1 1v8a1 1 0 001 1h12a1 1 0 001-1V5a1 1 0 00-1-1H8.5L7 3z"})],-1)])])]),ve("button",{class:"tool-btn toggle-sidebar-btn",onClick:M[2]||(M[2]=L=>A.$emit("toggle-collapse")),title:"收起侧边栏"},[...M[9]||(M[9]=[ve("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[ve("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"})],-1)])])]),ve("div",Fd,[(De(!0),We(lt,null,Qi(r.folders,(L,u)=>(De(),Tn(Rd,{key:L.id,folder:L,currentNoteId:r.currentNoteId,level:0,draggingItem:c.value,dropTarget:f.value,dropPosition:g.value,renamingItem:h.value,isLastChild:u===r.folders.length-1,onSelectNote:M[3]||(M[3]=k=>A.$emit("select-note",k)),onDeleteNote:M[4]||(M[4]=k=>A.$emit("delete-note",k)),onDeleteFolder:M[5]||(M[5]=k=>A.$emit("delete-folder",k)),onRenameFolder:p,onRenameNote:d,onStartRename:H,onCreateNote:M[6]||(M[6]=k=>A.$emit("create-note",k)),onToggleFolder:y,onDragStart:E,onDragEnter:S,onDragLeave:w,onDrop:D},null,8,["folder","currentNoteId","draggingItem","dropTarget","dropPosition","renamingItem","isLastChild"]))),128))]),c.value?(De(),We("div",Ud,[(De(),We("svg",Vd,[c.value.type==="folder"?(De(),We("path",Wd)):(De(),We("path",Kd))])),ol(" "+En(c.value.name),1)])):Jt("",!0)],32))}}),$d=qn(qd,[["__scopeId","data-v-7ba19e7d"]]);function zd(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Ur={exports:{}};/*!
 * Vditor v3.11.2 - A markdown editor written in TypeScript.
 *
 * MIT License
 *
 * Copyright (c) 2018-present B3log 开源, b3log.org
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */var Gd=Ur.exports,Ya;function Jd(){return Ya||(Ya=1,(function(r,i){(function(c,f){r.exports=f()})(Gd,function(){return(()=>{var l={173:(b=>{var h=function(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32},y=-1,H=1,_=0;h.Diff=function(p,d){return[p,d]},h.prototype.diff_main=function(p,d,E,v){typeof v>"u"&&(this.Diff_Timeout<=0?v=Number.MAX_VALUE:v=new Date().getTime()+this.Diff_Timeout*1e3);var S=v;if(p==null||d==null)throw new Error("Null input. (diff_main)");if(p==d)return p?[new h.Diff(_,p)]:[];typeof E>"u"&&(E=!0);var w=E,D=this.diff_commonPrefix(p,d),A=p.substring(0,D);p=p.substring(D),d=d.substring(D),D=this.diff_commonSuffix(p,d);var M=p.substring(p.length-D);p=p.substring(0,p.length-D),d=d.substring(0,d.length-D);var L=this.diff_compute_(p,d,w,S);return A&&L.unshift(new h.Diff(_,A)),M&&L.push(new h.Diff(_,M)),this.diff_cleanupMerge(L),L},h.prototype.diff_compute_=function(p,d,E,v){var S;if(!p)return[new h.Diff(H,d)];if(!d)return[new h.Diff(y,p)];var w=p.length>d.length?p:d,D=p.length>d.length?d:p,A=w.indexOf(D);if(A!=-1)return S=[new h.Diff(H,w.substring(0,A)),new h.Diff(_,D),new h.Diff(H,w.substring(A+D.length))],p.length>d.length&&(S[0][0]=S[2][0]=y),S;if(D.length==1)return[new h.Diff(y,p),new h.Diff(H,d)];var M=this.diff_halfMatch_(p,d);if(M){var L=M[0],u=M[1],k=M[2],U=M[3],R=M[4],N=this.diff_main(L,k,E,v),B=this.diff_main(u,U,E,v);return N.concat([new h.Diff(_,R)],B)}return E&&p.length>100&&d.length>100?this.diff_lineMode_(p,d,v):this.diff_bisect_(p,d,v)},h.prototype.diff_lineMode_=function(p,d,E){var v=this.diff_linesToChars_(p,d);p=v.chars1,d=v.chars2;var S=v.lineArray,w=this.diff_main(p,d,!1,E);this.diff_charsToLines_(w,S),this.diff_cleanupSemantic(w),w.push(new h.Diff(_,""));for(var D=0,A=0,M=0,L="",u="";D<w.length;){switch(w[D][0]){case H:M++,u+=w[D][1];break;case y:A++,L+=w[D][1];break;case _:if(A>=1&&M>=1){w.splice(D-A-M,A+M),D=D-A-M;for(var k=this.diff_main(L,u,!1,E),U=k.length-1;U>=0;U--)w.splice(D,0,k[U]);D=D+k.length}M=0,A=0,L="",u="";break}D++}return w.pop(),w},h.prototype.diff_bisect_=function(p,d,E){for(var v=p.length,S=d.length,w=Math.ceil((v+S)/2),D=w,A=2*w,M=new Array(A),L=new Array(A),u=0;u<A;u++)M[u]=-1,L[u]=-1;M[D+1]=0,L[D+1]=0;for(var k=v-S,U=k%2!=0,R=0,N=0,B=0,q=0,J=0;J<w&&!(new Date().getTime()>E);J++){for(var se=-J+R;se<=J-N;se+=2){var he=D+se,Ce;se==-J||se!=J&&M[he-1]<M[he+1]?Ce=M[he+1]:Ce=M[he-1]+1;for(var Le=Ce-se;Ce<v&&Le<S&&p.charAt(Ce)==d.charAt(Le);)Ce++,Le++;if(M[he]=Ce,Ce>v)N+=2;else if(Le>S)R+=2;else if(U){var Se=D+k-se;if(Se>=0&&Se<A&&L[Se]!=-1){var ye=v-L[Se];if(Ce>=ye)return this.diff_bisectSplit_(p,d,Ce,Le,E)}}}for(var Pe=-J+B;Pe<=J-q;Pe+=2){var Se=D+Pe,ye;Pe==-J||Pe!=J&&L[Se-1]<L[Se+1]?ye=L[Se+1]:ye=L[Se-1]+1;for(var qe=ye-Pe;ye<v&&qe<S&&p.charAt(v-ye-1)==d.charAt(S-qe-1);)ye++,qe++;if(L[Se]=ye,ye>v)q+=2;else if(qe>S)B+=2;else if(!U){var he=D+k-Pe;if(he>=0&&he<A&&M[he]!=-1){var Ce=M[he],Le=D+Ce-he;if(ye=v-ye,Ce>=ye)return this.diff_bisectSplit_(p,d,Ce,Le,E)}}}}return[new h.Diff(y,p),new h.Diff(H,d)]},h.prototype.diff_bisectSplit_=function(p,d,E,v,S){var w=p.substring(0,E),D=d.substring(0,v),A=p.substring(E),M=d.substring(v),L=this.diff_main(w,D,!1,S),u=this.diff_main(A,M,!1,S);return L.concat(u)},h.prototype.diff_linesToChars_=function(p,d){var E=[],v={};E[0]="";function S(M){for(var L="",u=0,k=-1,U=E.length;k<M.length-1;){k=M.indexOf(`
`,u),k==-1&&(k=M.length-1);var R=M.substring(u,k+1);(v.hasOwnProperty?v.hasOwnProperty(R):v[R]!==void 0)?L+=String.fromCharCode(v[R]):(U==w&&(R=M.substring(u),k=M.length),L+=String.fromCharCode(U),v[R]=U,E[U++]=R),u=k+1}return L}var w=4e4,D=S(p);w=65535;var A=S(d);return{chars1:D,chars2:A,lineArray:E}},h.prototype.diff_charsToLines_=function(p,d){for(var E=0;E<p.length;E++){for(var v=p[E][1],S=[],w=0;w<v.length;w++)S[w]=d[v.charCodeAt(w)];p[E][1]=S.join("")}},h.prototype.diff_commonPrefix=function(p,d){if(!p||!d||p.charAt(0)!=d.charAt(0))return 0;for(var E=0,v=Math.min(p.length,d.length),S=v,w=0;E<S;)p.substring(w,S)==d.substring(w,S)?(E=S,w=E):v=S,S=Math.floor((v-E)/2+E);return S},h.prototype.diff_commonSuffix=function(p,d){if(!p||!d||p.charAt(p.length-1)!=d.charAt(d.length-1))return 0;for(var E=0,v=Math.min(p.length,d.length),S=v,w=0;E<S;)p.substring(p.length-S,p.length-w)==d.substring(d.length-S,d.length-w)?(E=S,w=E):v=S,S=Math.floor((v-E)/2+E);return S},h.prototype.diff_commonOverlap_=function(p,d){var E=p.length,v=d.length;if(E==0||v==0)return 0;E>v?p=p.substring(E-v):E<v&&(d=d.substring(0,E));var S=Math.min(E,v);if(p==d)return S;for(var w=0,D=1;;){var A=p.substring(S-D),M=d.indexOf(A);if(M==-1)return w;D+=M,(M==0||p.substring(S-D)==d.substring(0,D))&&(w=D,D++)}},h.prototype.diff_halfMatch_=function(p,d){if(this.Diff_Timeout<=0)return null;var E=p.length>d.length?p:d,v=p.length>d.length?d:p;if(E.length<4||v.length*2<E.length)return null;var S=this;function w(N,B,q){for(var J=N.substring(q,q+Math.floor(N.length/4)),se=-1,he="",Ce,Le,Se,ye;(se=B.indexOf(J,se+1))!=-1;){var Pe=S.diff_commonPrefix(N.substring(q),B.substring(se)),qe=S.diff_commonSuffix(N.substring(0,q),B.substring(0,se));he.length<qe+Pe&&(he=B.substring(se-qe,se)+B.substring(se,se+Pe),Ce=N.substring(0,q-qe),Le=N.substring(q+Pe),Se=B.substring(0,se-qe),ye=B.substring(se+Pe))}return he.length*2>=N.length?[Ce,Le,Se,ye,he]:null}var D=w(E,v,Math.ceil(E.length/4)),A=w(E,v,Math.ceil(E.length/2)),M;if(!D&&!A)return null;A?D?M=D[4].length>A[4].length?D:A:M=A:M=D;var L,u,k,U;p.length>d.length?(L=M[0],u=M[1],k=M[2],U=M[3]):(k=M[0],U=M[1],L=M[2],u=M[3]);var R=M[4];return[L,u,k,U,R]},h.prototype.diff_cleanupSemantic=function(p){for(var d=!1,E=[],v=0,S=null,w=0,D=0,A=0,M=0,L=0;w<p.length;)p[w][0]==_?(E[v++]=w,D=M,A=L,M=0,L=0,S=p[w][1]):(p[w][0]==H?M+=p[w][1].length:L+=p[w][1].length,S&&S.length<=Math.max(D,A)&&S.length<=Math.max(M,L)&&(p.splice(E[v-1],0,new h.Diff(y,S)),p[E[v-1]+1][0]=H,v--,v--,w=v>0?E[v-1]:-1,D=0,A=0,M=0,L=0,S=null,d=!0)),w++;for(d&&this.diff_cleanupMerge(p),this.diff_cleanupSemanticLossless(p),w=1;w<p.length;){if(p[w-1][0]==y&&p[w][0]==H){var u=p[w-1][1],k=p[w][1],U=this.diff_commonOverlap_(u,k),R=this.diff_commonOverlap_(k,u);U>=R?(U>=u.length/2||U>=k.length/2)&&(p.splice(w,0,new h.Diff(_,k.substring(0,U))),p[w-1][1]=u.substring(0,u.length-U),p[w+1][1]=k.substring(U),w++):(R>=u.length/2||R>=k.length/2)&&(p.splice(w,0,new h.Diff(_,u.substring(0,R))),p[w-1][0]=H,p[w-1][1]=k.substring(0,k.length-R),p[w+1][0]=y,p[w+1][1]=u.substring(R),w++),w++}w++}},h.prototype.diff_cleanupSemanticLossless=function(p){function d(R,N){if(!R||!N)return 6;var B=R.charAt(R.length-1),q=N.charAt(0),J=B.match(h.nonAlphaNumericRegex_),se=q.match(h.nonAlphaNumericRegex_),he=J&&B.match(h.whitespaceRegex_),Ce=se&&q.match(h.whitespaceRegex_),Le=he&&B.match(h.linebreakRegex_),Se=Ce&&q.match(h.linebreakRegex_),ye=Le&&R.match(h.blanklineEndRegex_),Pe=Se&&N.match(h.blanklineStartRegex_);return ye||Pe?5:Le||Se?4:J&&!he&&Ce?3:he||Ce?2:J||se?1:0}for(var E=1;E<p.length-1;){if(p[E-1][0]==_&&p[E+1][0]==_){var v=p[E-1][1],S=p[E][1],w=p[E+1][1],D=this.diff_commonSuffix(v,S);if(D){var A=S.substring(S.length-D);v=v.substring(0,v.length-D),S=A+S.substring(0,S.length-D),w=A+w}for(var M=v,L=S,u=w,k=d(v,S)+d(S,w);S.charAt(0)===w.charAt(0);){v+=S.charAt(0),S=S.substring(1)+w.charAt(0),w=w.substring(1);var U=d(v,S)+d(S,w);U>=k&&(k=U,M=v,L=S,u=w)}p[E-1][1]!=M&&(M?p[E-1][1]=M:(p.splice(E-1,1),E--),p[E][1]=L,u?p[E+1][1]=u:(p.splice(E+1,1),E--))}E++}},h.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,h.whitespaceRegex_=/\s/,h.linebreakRegex_=/[\r\n]/,h.blanklineEndRegex_=/\n\r?\n$/,h.blanklineStartRegex_=/^\r?\n\r?\n/,h.prototype.diff_cleanupEfficiency=function(p){for(var d=!1,E=[],v=0,S=null,w=0,D=!1,A=!1,M=!1,L=!1;w<p.length;)p[w][0]==_?(p[w][1].length<this.Diff_EditCost&&(M||L)?(E[v++]=w,D=M,A=L,S=p[w][1]):(v=0,S=null),M=L=!1):(p[w][0]==y?L=!0:M=!0,S&&(D&&A&&M&&L||S.length<this.Diff_EditCost/2&&D+A+M+L==3)&&(p.splice(E[v-1],0,new h.Diff(y,S)),p[E[v-1]+1][0]=H,v--,S=null,D&&A?(M=L=!0,v=0):(v--,w=v>0?E[v-1]:-1,M=L=!1),d=!0)),w++;d&&this.diff_cleanupMerge(p)},h.prototype.diff_cleanupMerge=function(p){p.push(new h.Diff(_,""));for(var d=0,E=0,v=0,S="",w="",D;d<p.length;)switch(p[d][0]){case H:v++,w+=p[d][1],d++;break;case y:E++,S+=p[d][1],d++;break;case _:E+v>1?(E!==0&&v!==0&&(D=this.diff_commonPrefix(w,S),D!==0&&(d-E-v>0&&p[d-E-v-1][0]==_?p[d-E-v-1][1]+=w.substring(0,D):(p.splice(0,0,new h.Diff(_,w.substring(0,D))),d++),w=w.substring(D),S=S.substring(D)),D=this.diff_commonSuffix(w,S),D!==0&&(p[d][1]=w.substring(w.length-D)+p[d][1],w=w.substring(0,w.length-D),S=S.substring(0,S.length-D))),d-=E+v,p.splice(d,E+v),S.length&&(p.splice(d,0,new h.Diff(y,S)),d++),w.length&&(p.splice(d,0,new h.Diff(H,w)),d++),d++):d!==0&&p[d-1][0]==_?(p[d-1][1]+=p[d][1],p.splice(d,1)):d++,v=0,E=0,S="",w="";break}p[p.length-1][1]===""&&p.pop();var A=!1;for(d=1;d<p.length-1;)p[d-1][0]==_&&p[d+1][0]==_&&(p[d][1].substring(p[d][1].length-p[d-1][1].length)==p[d-1][1]?(p[d][1]=p[d-1][1]+p[d][1].substring(0,p[d][1].length-p[d-1][1].length),p[d+1][1]=p[d-1][1]+p[d+1][1],p.splice(d-1,1),A=!0):p[d][1].substring(0,p[d+1][1].length)==p[d+1][1]&&(p[d-1][1]+=p[d+1][1],p[d][1]=p[d][1].substring(p[d+1][1].length)+p[d+1][1],p.splice(d+1,1),A=!0)),d++;A&&this.diff_cleanupMerge(p)},h.prototype.diff_xIndex=function(p,d){var E=0,v=0,S=0,w=0,D;for(D=0;D<p.length&&(p[D][0]!==H&&(E+=p[D][1].length),p[D][0]!==y&&(v+=p[D][1].length),!(E>d));D++)S=E,w=v;return p.length!=D&&p[D][0]===y?w:w+(d-S)},h.prototype.diff_prettyHtml=function(p){for(var d=[],E=/&/g,v=/</g,S=/>/g,w=/\n/g,D=0;D<p.length;D++){var A=p[D][0],M=p[D][1],L=M.replace(E,"&amp;").replace(v,"&lt;").replace(S,"&gt;").replace(w,"&para;<br>");switch(A){case H:d[D]='<ins style="background:#e6ffe6;">'+L+"</ins>";break;case y:d[D]='<del style="background:#ffe6e6;">'+L+"</del>";break;case _:d[D]="<span>"+L+"</span>";break}}return d.join("")},h.prototype.diff_text1=function(p){for(var d=[],E=0;E<p.length;E++)p[E][0]!==H&&(d[E]=p[E][1]);return d.join("")},h.prototype.diff_text2=function(p){for(var d=[],E=0;E<p.length;E++)p[E][0]!==y&&(d[E]=p[E][1]);return d.join("")},h.prototype.diff_levenshtein=function(p){for(var d=0,E=0,v=0,S=0;S<p.length;S++){var w=p[S][0],D=p[S][1];switch(w){case H:E+=D.length;break;case y:v+=D.length;break;case _:d+=Math.max(E,v),E=0,v=0;break}}return d+=Math.max(E,v),d},h.prototype.diff_toDelta=function(p){for(var d=[],E=0;E<p.length;E++)switch(p[E][0]){case H:d[E]="+"+encodeURI(p[E][1]);break;case y:d[E]="-"+p[E][1].length;break;case _:d[E]="="+p[E][1].length;break}return d.join("	").replace(/%20/g," ")},h.prototype.diff_fromDelta=function(p,d){for(var E=[],v=0,S=0,w=d.split(/\t/g),D=0;D<w.length;D++){var A=w[D].substring(1);switch(w[D].charAt(0)){case"+":try{E[v++]=new h.Diff(H,decodeURI(A))}catch{throw new Error("Illegal escape in diff_fromDelta: "+A)}break;case"-":case"=":var M=parseInt(A,10);if(isNaN(M)||M<0)throw new Error("Invalid number in diff_fromDelta: "+A);var L=p.substring(S,S+=M);w[D].charAt(0)=="="?E[v++]=new h.Diff(_,L):E[v++]=new h.Diff(y,L);break;default:if(w[D])throw new Error("Invalid diff operation in diff_fromDelta: "+w[D])}}if(S!=p.length)throw new Error("Delta length ("+S+") does not equal source text length ("+p.length+").");return E},h.prototype.match_main=function(p,d,E){if(p==null||d==null||E==null)throw new Error("Null input. (match_main)");return E=Math.max(0,Math.min(E,p.length)),p==d?0:p.length?p.substring(E,E+d.length)==d?E:this.match_bitap_(p,d,E):-1},h.prototype.match_bitap_=function(p,d,E){if(d.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var v=this.match_alphabet_(d),S=this;function w(Ce,Le){var Se=Ce/d.length,ye=Math.abs(E-Le);return S.Match_Distance?Se+ye/S.Match_Distance:ye?1:Se}var D=this.Match_Threshold,A=p.indexOf(d,E);A!=-1&&(D=Math.min(w(0,A),D),A=p.lastIndexOf(d,E+d.length),A!=-1&&(D=Math.min(w(0,A),D)));var M=1<<d.length-1;A=-1;for(var L,u,k=d.length+p.length,U,R=0;R<d.length;R++){for(L=0,u=k;L<u;)w(R,E+u)<=D?L=u:k=u,u=Math.floor((k-L)/2+L);k=u;var N=Math.max(1,E-u+1),B=Math.min(E+u,p.length)+d.length,q=Array(B+2);q[B+1]=(1<<R)-1;for(var J=B;J>=N;J--){var se=v[p.charAt(J-1)];if(R===0?q[J]=(q[J+1]<<1|1)&se:q[J]=(q[J+1]<<1|1)&se|((U[J+1]|U[J])<<1|1)|U[J+1],q[J]&M){var he=w(R,J-1);if(he<=D)if(D=he,A=J-1,A>E)N=Math.max(1,2*E-A);else break}}if(w(R+1,E)>D)break;U=q}return A},h.prototype.match_alphabet_=function(p){for(var d={},E=0;E<p.length;E++)d[p.charAt(E)]=0;for(var E=0;E<p.length;E++)d[p.charAt(E)]|=1<<p.length-E-1;return d},h.prototype.patch_addContext_=function(p,d){if(d.length!=0){if(p.start2===null)throw Error("patch not initialized");for(var E=d.substring(p.start2,p.start2+p.length1),v=0;d.indexOf(E)!=d.lastIndexOf(E)&&E.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)v+=this.Patch_Margin,E=d.substring(p.start2-v,p.start2+p.length1+v);v+=this.Patch_Margin;var S=d.substring(p.start2-v,p.start2);S&&p.diffs.unshift(new h.Diff(_,S));var w=d.substring(p.start2+p.length1,p.start2+p.length1+v);w&&p.diffs.push(new h.Diff(_,w)),p.start1-=S.length,p.start2-=S.length,p.length1+=S.length+w.length,p.length2+=S.length+w.length}},h.prototype.patch_make=function(p,d,E){var v,S;if(typeof p=="string"&&typeof d=="string"&&typeof E>"u")v=p,S=this.diff_main(v,d,!0),S.length>2&&(this.diff_cleanupSemantic(S),this.diff_cleanupEfficiency(S));else if(p&&typeof p=="object"&&typeof d>"u"&&typeof E>"u")S=p,v=this.diff_text1(S);else if(typeof p=="string"&&d&&typeof d=="object"&&typeof E>"u")v=p,S=d;else if(typeof p=="string"&&typeof d=="string"&&E&&typeof E=="object")v=p,S=E;else throw new Error("Unknown call format to patch_make.");if(S.length===0)return[];for(var w=[],D=new h.patch_obj,A=0,M=0,L=0,u=v,k=v,U=0;U<S.length;U++){var R=S[U][0],N=S[U][1];switch(!A&&R!==_&&(D.start1=M,D.start2=L),R){case H:D.diffs[A++]=S[U],D.length2+=N.length,k=k.substring(0,L)+N+k.substring(L);break;case y:D.length1+=N.length,D.diffs[A++]=S[U],k=k.substring(0,L)+k.substring(L+N.length);break;case _:N.length<=2*this.Patch_Margin&&A&&S.length!=U+1?(D.diffs[A++]=S[U],D.length1+=N.length,D.length2+=N.length):N.length>=2*this.Patch_Margin&&A&&(this.patch_addContext_(D,u),w.push(D),D=new h.patch_obj,A=0,u=k,M=L);break}R!==H&&(M+=N.length),R!==y&&(L+=N.length)}return A&&(this.patch_addContext_(D,u),w.push(D)),w},h.prototype.patch_deepCopy=function(p){for(var d=[],E=0;E<p.length;E++){var v=p[E],S=new h.patch_obj;S.diffs=[];for(var w=0;w<v.diffs.length;w++)S.diffs[w]=new h.Diff(v.diffs[w][0],v.diffs[w][1]);S.start1=v.start1,S.start2=v.start2,S.length1=v.length1,S.length2=v.length2,d[E]=S}return d},h.prototype.patch_apply=function(p,d){if(p.length==0)return[d,[]];p=this.patch_deepCopy(p);var E=this.patch_addPadding(p);d=E+d+E,this.patch_splitMax(p);for(var v=0,S=[],w=0;w<p.length;w++){var D=p[w].start2+v,A=this.diff_text1(p[w].diffs),M,L=-1;if(A.length>this.Match_MaxBits?(M=this.match_main(d,A.substring(0,this.Match_MaxBits),D),M!=-1&&(L=this.match_main(d,A.substring(A.length-this.Match_MaxBits),D+A.length-this.Match_MaxBits),(L==-1||M>=L)&&(M=-1))):M=this.match_main(d,A,D),M==-1)S[w]=!1,v-=p[w].length2-p[w].length1;else{S[w]=!0,v=M-D;var u;if(L==-1?u=d.substring(M,M+A.length):u=d.substring(M,L+this.Match_MaxBits),A==u)d=d.substring(0,M)+this.diff_text2(p[w].diffs)+d.substring(M+A.length);else{var k=this.diff_main(A,u,!1);if(A.length>this.Match_MaxBits&&this.diff_levenshtein(k)/A.length>this.Patch_DeleteThreshold)S[w]=!1;else{this.diff_cleanupSemanticLossless(k);for(var U=0,R,N=0;N<p[w].diffs.length;N++){var B=p[w].diffs[N];B[0]!==_&&(R=this.diff_xIndex(k,U)),B[0]===H?d=d.substring(0,M+R)+B[1]+d.substring(M+R):B[0]===y&&(d=d.substring(0,M+R)+d.substring(M+this.diff_xIndex(k,U+B[1].length))),B[0]!==y&&(U+=B[1].length)}}}}}return d=d.substring(E.length,d.length-E.length),[d,S]},h.prototype.patch_addPadding=function(p){for(var d=this.Patch_Margin,E="",v=1;v<=d;v++)E+=String.fromCharCode(v);for(var v=0;v<p.length;v++)p[v].start1+=d,p[v].start2+=d;var S=p[0],w=S.diffs;if(w.length==0||w[0][0]!=_)w.unshift(new h.Diff(_,E)),S.start1-=d,S.start2-=d,S.length1+=d,S.length2+=d;else if(d>w[0][1].length){var D=d-w[0][1].length;w[0][1]=E.substring(w[0][1].length)+w[0][1],S.start1-=D,S.start2-=D,S.length1+=D,S.length2+=D}if(S=p[p.length-1],w=S.diffs,w.length==0||w[w.length-1][0]!=_)w.push(new h.Diff(_,E)),S.length1+=d,S.length2+=d;else if(d>w[w.length-1][1].length){var D=d-w[w.length-1][1].length;w[w.length-1][1]+=E.substring(0,D),S.length1+=D,S.length2+=D}return E},h.prototype.patch_splitMax=function(p){for(var d=this.Match_MaxBits,E=0;E<p.length;E++)if(!(p[E].length1<=d)){var v=p[E];p.splice(E--,1);for(var S=v.start1,w=v.start2,D="";v.diffs.length!==0;){var A=new h.patch_obj,M=!0;for(A.start1=S-D.length,A.start2=w-D.length,D!==""&&(A.length1=A.length2=D.length,A.diffs.push(new h.Diff(_,D)));v.diffs.length!==0&&A.length1<d-this.Patch_Margin;){var L=v.diffs[0][0],u=v.diffs[0][1];L===H?(A.length2+=u.length,w+=u.length,A.diffs.push(v.diffs.shift()),M=!1):L===y&&A.diffs.length==1&&A.diffs[0][0]==_&&u.length>2*d?(A.length1+=u.length,S+=u.length,M=!1,A.diffs.push(new h.Diff(L,u)),v.diffs.shift()):(u=u.substring(0,d-A.length1-this.Patch_Margin),A.length1+=u.length,S+=u.length,L===_?(A.length2+=u.length,w+=u.length):M=!1,A.diffs.push(new h.Diff(L,u)),u==v.diffs[0][1]?v.diffs.shift():v.diffs[0][1]=v.diffs[0][1].substring(u.length))}D=this.diff_text2(A.diffs),D=D.substring(D.length-this.Patch_Margin);var k=this.diff_text1(v.diffs).substring(0,this.Patch_Margin);k!==""&&(A.length1+=k.length,A.length2+=k.length,A.diffs.length!==0&&A.diffs[A.diffs.length-1][0]===_?A.diffs[A.diffs.length-1][1]+=k:A.diffs.push(new h.Diff(_,k))),M||p.splice(++E,0,A)}}},h.prototype.patch_toText=function(p){for(var d=[],E=0;E<p.length;E++)d[E]=p[E];return d.join("")},h.prototype.patch_fromText=function(p){var d=[];if(!p)return d;for(var E=p.split(`
`),v=0,S=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;v<E.length;){var w=E[v].match(S);if(!w)throw new Error("Invalid patch string: "+E[v]);var D=new h.patch_obj;for(d.push(D),D.start1=parseInt(w[1],10),w[2]===""?(D.start1--,D.length1=1):w[2]=="0"?D.length1=0:(D.start1--,D.length1=parseInt(w[2],10)),D.start2=parseInt(w[3],10),w[4]===""?(D.start2--,D.length2=1):w[4]=="0"?D.length2=0:(D.start2--,D.length2=parseInt(w[4],10)),v++;v<E.length;){var A=E[v].charAt(0);try{var M=decodeURI(E[v].substring(1))}catch{throw new Error("Illegal escape in patch_fromText: "+M)}if(A=="-")D.diffs.push(new h.Diff(y,M));else if(A=="+")D.diffs.push(new h.Diff(H,M));else if(A==" ")D.diffs.push(new h.Diff(_,M));else{if(A=="@")break;if(A!=="")throw new Error('Invalid patch mode "'+A+'" in: '+M)}v++}}return d},h.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0},h.patch_obj.prototype.toString=function(){var p,d;this.length1===0?p=this.start1+",0":this.length1==1?p=this.start1+1:p=this.start1+1+","+this.length1,this.length2===0?d=this.start2+",0":this.length2==1?d=this.start2+1:d=this.start2+1+","+this.length2;for(var E=["@@ -"+p+" +"+d+` @@
`],v,S=0;S<this.diffs.length;S++){switch(this.diffs[S][0]){case H:v="+";break;case y:v="-";break;case _:v=" ";break}E[S+1]=v+encodeURI(this.diffs[S][1])+`
`}return E.join("").replace(/%20/g," ")},b.exports=h,b.exports.diff_match_patch=h,b.exports.DIFF_DELETE=y,b.exports.DIFF_INSERT=H,b.exports.DIFF_EQUAL=_}),408:((b,h,y)=>{y.d(h,{default:()=>Z});var H=y(135),_=y(840),p=y(775),d=y(428),E=y(325),v=y(483),S=y(999),w=function(j){j===void 0&&(j=document);var z=function(K){var $=document.createElement("img");$.src=K.getAttribute("data-src"),$.addEventListener("load",function(){!K.getAttribute("style")&&!K.getAttribute("class")&&!K.getAttribute("width")&&!K.getAttribute("height")&&$.naturalHeight>$.naturalWidth&&$.naturalWidth/$.naturalHeight<document.querySelector(".vditor-reset").clientWidth/(window.innerHeight-40)&&$.naturalHeight>window.innerHeight-40&&(K.style.height=window.innerHeight-40+"px"),K.src=$.src}),K.removeAttribute("data-src")};if(!("IntersectionObserver"in window))return j.querySelectorAll("img").forEach(function(K){K.getAttribute("data-src")&&z(K)}),!1;window.vditorImageIntersectionObserver?(window.vditorImageIntersectionObserver.disconnect(),j.querySelectorAll("img").forEach(function(K){window.vditorImageIntersectionObserver.observe(K)})):(window.vditorImageIntersectionObserver=new IntersectionObserver(function(K){K.forEach(function($){(typeof $.isIntersecting>"u"?$.intersectionRatio!==0:$.isIntersecting)&&$.target.getAttribute("data-src")&&z($.target)})}),j.querySelectorAll("img").forEach(function(K){window.vditorImageIntersectionObserver.observe(K)}))},D=y(472),A=y(280),M=y(637),L=y(825),u=y(11),k=y(194),U=y(436),R=y(229),N=y(145),B=y(538),q=y(413),J=y(106),se=y(673),he=function(j){document.querySelectorAll(".vditor-anchor").forEach(function(z){j===1&&z.classList.add("vditor-anchor--left"),z.onclick=function(){var K=z.getAttribute("href").substr(1),$=document.getElementById("vditorAnchor-"+K).offsetTop;document.querySelector("html").scrollTop=$}}),window.onhashchange=function(){var z=document.getElementById("vditorAnchor-"+decodeURIComponent(window.location.hash.substr(1)));z&&(document.querySelector("html").scrollTop=z.offsetTop)}},Ce=y(214),Le=y(810),Se=function(j,z){if(z===void 0&&(z="zh_CN"),!(typeof speechSynthesis>"u"||typeof SpeechSynthesisUtterance>"u")){var K=function(){var Y=speechSynthesis.getVoices(),G,X;return Y.forEach(function(oe){oe.lang===z.replace("_","-")&&(G=oe),oe.default&&(X=oe)}),G||(G=X),G},$='<svg><use xlink:href="#vditor-icon-play"></use></svg>',me='<svg><use xlink:href="#vditor-icon-pause"></use></svg>';document.getElementById("vditorIconScript")||($='<svg viewBox="0 0 32 32"><path d="M3.436 0l25.128 16-25.128 16v-32z"></path></svg>',me='<svg viewBox="0 0 32 32"><path d="M20.617 0h9.128v32h-9.128v-32zM2.255 32v-32h9.128v32h-9.128z"></path></svg>');var O=document.querySelector(".vditor-speech");O||(O=document.createElement("button"),O.className="vditor-speech",j.insertAdjacentElement("beforeend",O),speechSynthesis.onvoiceschanged!==void 0&&(speechSynthesis.onvoiceschanged=K));var I=K(),V=new SpeechSynthesisUtterance;V.voice=I,V.onend=V.onerror=function(){O.style.display="none",speechSynthesis.cancel(),O.classList.remove("vditor-speech--current"),O.innerHTML=$},j.addEventListener(window.ontouchstart!==void 0?"touchend":"click",function(Y){var G=Y.target;if(G.classList.contains("vditor-speech")||G.parentElement.classList.contains("vditor-speech")){O.classList.contains("vditor-speech--current")?speechSynthesis.speaking&&(speechSynthesis.paused?(speechSynthesis.resume(),O.innerHTML=me):(speechSynthesis.pause(),O.innerHTML=$)):(V.text=O.getAttribute("data-text"),speechSynthesis.speak(V),O.classList.add("vditor-speech--current"),O.innerHTML=me),(0,Le.Hc)(window.vditorSpeechRange),j.focus();return}if(O.style.display="none",speechSynthesis.cancel(),O.classList.remove("vditor-speech--current"),O.innerHTML=$,getSelection().rangeCount!==0){var X=getSelection().getRangeAt(0),oe=X.toString().trim();if(oe){window.vditorSpeechRange=X.cloneRange();var ie=X.getBoundingClientRect();O.innerHTML=$,O.style.display="block",O.style.top=ie.top+ie.height+document.querySelector("html").scrollTop-20+"px",window.ontouchstart!==void 0?O.style.left=Y.changedTouches[Y.changedTouches.length-1].pageX+2+"px":O.style.left=Y.clientX+2+"px",O.setAttribute("data-text",oe)}}})}},ye=function(j,z,K,$){function me(O){return O instanceof K?O:new K(function(I){I(O)})}return new(K||(K=Promise))(function(O,I){function V(X){try{G($.next(X))}catch(oe){I(oe)}}function Y(X){try{G($.throw(X))}catch(oe){I(oe)}}function G(X){X.done?O(X.value):me(X.value).then(V,Y)}G(($=$.apply(j,z||[])).next())})},Pe=function(j,z){var K={label:0,sent:function(){if(O[0]&1)throw O[1];return O[1]},trys:[],ops:[]},$,me,O,I;return I={next:V(0),throw:V(1),return:V(2)},typeof Symbol=="function"&&(I[Symbol.iterator]=function(){return this}),I;function V(G){return function(X){return Y([G,X])}}function Y(G){if($)throw new TypeError("Generator is already executing.");for(;I&&(I=0,G[0]&&(K=0)),K;)try{if($=1,me&&(O=G[0]&2?me.return:G[0]?me.throw||((O=me.return)&&O.call(me),0):me.next)&&!(O=O.call(me,G[1])).done)return O;switch(me=0,O&&(G=[G[0]&2,O.value]),G[0]){case 0:case 1:O=G;break;case 4:return K.label++,{value:G[1],done:!1};case 5:K.label++,me=G[1],G=[0];continue;case 7:G=K.ops.pop(),K.trys.pop();continue;default:if(O=K.trys,!(O=O.length>0&&O[O.length-1])&&(G[0]===6||G[0]===2)){K=0;continue}if(G[0]===3&&(!O||G[1]>O[0]&&G[1]<O[3])){K.label=G[1];break}if(G[0]===6&&K.label<O[1]){K.label=O[1],O=G;break}if(O&&K.label<O[2]){K.label=O[2],K.ops.push(G);break}O[2]&&K.ops.pop(),K.trys.pop();continue}G=z.call(j,K)}catch(X){G=[6,X],me=0}finally{$=O=0}if(G[0]&5)throw G[1];return{value:G[0]?G[1]:void 0,done:!0}}},qe=function(j){var z,K={anchor:0,cdn:N.g.CDN,customEmoji:{},emojiPath:"".concat(N.g.CDN,"/dist/images/emoji"),hljs:N.g.HLJS_OPTIONS,icon:"ant",lang:"zh_CN",markdown:N.g.MARKDOWN_OPTIONS,math:N.g.MATH_OPTIONS,mode:"light",speech:{enable:!1},render:{media:{enable:!0}},theme:N.g.THEME_OPTIONS};return j.cdn&&(!((z=j.theme)===null||z===void 0)&&z.path||(K.theme.path="".concat(j.cdn,"/dist/css/content-theme")),j.emojiPath||(K.emojiPath="".concat(j.cdn,"/dist/images/emoji"))),(0,se.T)(K,j)},Ie=function(j,z){var K=qe(z);return(0,q.G)("".concat(K.cdn,"/dist/js/lute/lute.min.js"),"vditorLuteScript").then(function(){var $=(0,Ce.X)({autoSpace:K.markdown.autoSpace,gfmAutoLink:K.markdown.gfmAutoLink,codeBlockPreview:K.markdown.codeBlockPreview,emojiSite:K.emojiPath,emojis:K.customEmoji,fixTermTypo:K.markdown.fixTermTypo,footnotes:K.markdown.footnotes,headingAnchor:K.anchor!==0,inlineMathDigit:K.math.inlineDigit,lazyLoadImage:K.lazyLoadImage,linkBase:K.markdown.linkBase,linkPrefix:K.markdown.linkPrefix,listStyle:K.markdown.listStyle,mark:K.markdown.mark,mathBlockPreview:K.markdown.mathBlockPreview,paragraphBeginningSpace:K.markdown.paragraphBeginningSpace,sanitize:K.markdown.sanitize,toc:K.markdown.toc});return z?.renderers&&$.SetJSRenderers({renderers:{Md2HTML:z.renderers}}),$.SetHeadingID(!0),$.Md2HTML(j)})},F=function(j,z,K){return ye(void 0,void 0,void 0,function(){var $,me,O,I;return Pe(this,function(V){switch(V.label){case 0:return $=qe(K),[4,Ie(z,$)];case 1:if(me=V.sent(),$.transform&&(me=$.transform(me)),j.innerHTML=me,j.classList.add("vditor-reset"),$.i18n)return[3,5];if(["de_DE","en_US","es_ES","fr_FR","ja_JP","ko_KR","pt_BR","ru_RU","sv_SE","vi_VN","zh_CN","zh_TW"].includes($.lang))return[3,2];throw new Error("options.lang error, see https://ld246.com/article/1549638745630#options");case 2:return O="vditorI18nScript",I=O+$.lang,document.querySelectorAll('head script[id^="'.concat(O,'"]')).forEach(function(Y){Y.id!==I&&document.head.removeChild(Y)}),[4,(0,q.G)("".concat($.cdn,"/dist/js/i18n/").concat($.lang,".js"),I)];case 3:V.sent(),V.label=4;case 4:return[3,6];case 5:window.VditorI18n=$.i18n,V.label=6;case 6:return $.icon?[4,(0,q.G)("".concat($.cdn,"/dist/js/icons/").concat($.icon,".js"),"vditorIconScript")]:[3,8];case 7:V.sent(),V.label=8;case 8:return(0,B.Z)($.theme.current,$.theme.path),$.anchor===1&&j.classList.add("vditor-reset--anchor"),(0,d.O)(j,$.hljs),(0,S.s)($.hljs,j,$.cdn),(0,D.H)(j,{cdn:$.cdn,math:$.math}),(0,M.i)(j,$.cdn,$.mode),(0,L.J)(j,$.cdn,$.mode),(0,u.K)(j,$.cdn),(0,E.P)(j,$.cdn),(0,v.v)(j,$.cdn),(0,p.p)(j,$.cdn,$.mode),(0,k.P)(j,$.cdn,$.mode),(0,R.B)(j,$.cdn),(0,H.Q)(j,$.cdn),$.render.media.enable&&(0,A.Y)(j),$.speech.enable&&Se(j),$.anchor!==0&&he($.anchor),$.after&&$.after(),$.lazyLoadImage&&w(j),j.addEventListener("click",function(Y){var G=(0,J.lG)(Y.target,"SPAN");if(G&&(0,J.fb)(G,"vditor-toc")){var X=j.querySelector("#"+G.getAttribute("data-target-id"));X&&window.scrollTo(window.scrollX,X.offsetTop);return}}),[2]}})})},pt=y(190),nn=y(580),rn=(function(){function j(){}return j.adapterRender=_,j.previewImage=pt.E,j.codeRender=d.O,j.graphvizRender=v.v,j.highlightRender=S.s,j.mathRender=D.H,j.mermaidRender=M.i,j.SMILESRender=L.J,j.markmapRender=u.K,j.flowchartRender=E.P,j.chartRender=p.p,j.abcRender=H.Q,j.mindmapRender=k.P,j.plantumlRender=R.B,j.outlineRender=U.k,j.mediaRender=A.Y,j.speechRender=Se,j.lazyLoadImageRender=w,j.md2html=Ie,j.preview=F,j.setCodeTheme=nn.Y,j.setContentTheme=B.Z,j})();const Z=rn}),145:((b,h,y)=>{y.d(h,{H:()=>H,g:()=>_});var H="3.11.2",_=(function(){function p(){}return p.ZWSP="​",p.DROP_EDITOR="application/editor",p.MOBILE_WIDTH=520,p.CLASS_MENU_DISABLED="vditor-menu--disabled",p.EDIT_TOOLBARS=["emoji","headings","bold","italic","strike","link","list","ordered-list","outdent","indent","check","line","quote","code","inline-code","insert-after","insert-before","upload","record","table"],p.CODE_THEME=["a11y-dark","agate","an-old-hope","androidstudio","arta","atom-one-dark","atom-one-dark-reasonable","base16/3024","base16/apathy","base16/apprentice","base16/ashes","base16/atelier-cave","base16/atelier-dune","base16/atelier-estuary","base16/atelier-forest","base16/atelier-heath","base16/atelier-lakeside","base16/atelier-plateau","base16/atelier-savanna","base16/atelier-seaside","base16/atelier-sulphurpool","base16/atlas","base16/bespin","base16/black-metal","base16/black-metal-bathory","base16/black-metal-burzum","base16/black-metal-dark-funeral","base16/black-metal-gorgoroth","base16/black-metal-immortal","base16/black-metal-khold","base16/black-metal-marduk","base16/black-metal-mayhem","base16/black-metal-nile","base16/black-metal-venom","base16/brewer","base16/bright","base16/brogrammer","base16/brush-trees-dark","base16/chalk","base16/circus","base16/classic-dark","base16/codeschool","base16/colors","base16/danqing","base16/darcula","base16/dark-violet","base16/darkmoss","base16/darktooth","base16/decaf","base16/default-dark","base16/dracula","base16/edge-dark","base16/eighties","base16/embers","base16/equilibrium-dark","base16/equilibrium-gray-dark","base16/espresso","base16/eva","base16/eva-dim","base16/flat","base16/framer","base16/gigavolt","base16/google-dark","base16/grayscale-dark","base16/green-screen","base16/gruvbox-dark-hard","base16/gruvbox-dark-medium","base16/gruvbox-dark-pale","base16/gruvbox-dark-soft","base16/hardcore","base16/harmonic16-dark","base16/heetch-dark","base16/helios","base16/hopscotch","base16/horizon-dark","base16/humanoid-dark","base16/ia-dark","base16/icy-dark","base16/ir-black","base16/isotope","base16/kimber","base16/london-tube","base16/macintosh","base16/marrakesh","base16/materia","base16/material","base16/material-darker","base16/material-palenight","base16/material-vivid","base16/mellow-purple","base16/mocha","base16/monokai","base16/nebula","base16/nord","base16/nova","base16/ocean","base16/oceanicnext","base16/onedark","base16/outrun-dark","base16/papercolor-dark","base16/paraiso","base16/pasque","base16/phd","base16/pico","base16/pop","base16/porple","base16/qualia","base16/railscasts","base16/rebecca","base16/ros-pine","base16/ros-pine-moon","base16/sandcastle","base16/seti-ui","base16/silk-dark","base16/snazzy","base16/solar-flare","base16/solarized-dark","base16/spacemacs","base16/summercamp","base16/summerfruit-dark","base16/synth-midnight-terminal-dark","base16/tango","base16/tender","base16/tomorrow-night","base16/twilight","base16/unikitty-dark","base16/vulcan","base16/windows-10","base16/windows-95","base16/windows-high-contrast","base16/windows-nt","base16/woodland","base16/xcode-dusk","base16/zenburn","codepen-embed","dark","devibeans","far","felipec","github-dark","github-dark-dimmed","gml","gradient-dark","hybrid","ir-black","isbl-editor-dark","kimbie-dark","lioshi","monokai","monokai-sublime","night-owl","nnfx-dark","nord","obsidian","panda-syntax-dark","paraiso-dark","pojoaque","qtcreator-dark","rainbow","shades-of-purple","srcery","stackoverflow-dark","sunburst","tomorrow-night-blue","tomorrow-night-bright","tokyo-night-dark","vs2015","xt256","ant-design","a11y-light","arduino-light","ascetic","atom-one-light","base16/atelier-cave-light","base16/atelier-dune-light","base16/atelier-estuary-light","base16/atelier-forest-light","base16/atelier-heath-light","base16/atelier-lakeside-light","base16/atelier-plateau-light","base16/atelier-savanna-light","base16/atelier-seaside-light","base16/atelier-sulphurpool-light","base16/brush-trees","base16/classic-light","base16/cupcake","base16/cupertino","base16/default-light","base16/dirtysea","base16/edge-light","base16/equilibrium-gray-light","base16/equilibrium-light","base16/fruit-soda","base16/github","base16/google-light","base16/grayscale-light","base16/gruvbox-light-hard","base16/gruvbox-light-medium","base16/gruvbox-light-soft","base16/harmonic16-light","base16/heetch-light","base16/humanoid-light","base16/horizon-light","base16/ia-light","base16/material-lighter","base16/mexico-light","base16/one-light","base16/papercolor-light","base16/ros-pine-dawn","base16/sagelight","base16/shapeshifter","base16/silk-light","base16/solar-flare-light","base16/solarized-light","base16/summerfruit-light","base16/synth-midnight-terminal-light","base16/tomorrow","base16/unikitty-light","base16/windows-10-light","base16/windows-95-light","base16/windows-high-contrast-light","brown-paper","base16/windows-nt-light","color-brewer","docco","foundation","github","googlecode","gradient-light","grayscale","idea","intellij-light","isbl-editor-light","kimbie-light","lightfair","magula","mono-blue","nnfx-light","panda-syntax-light","paraiso-light","purebasic","qtcreator-light","routeros","school-book","stackoverflow-light","tokyo-night-light","vs","xcode","default"],p.ALIAS_CODE_LANGUAGES=["abc","plantuml","mermaid","flowchart","echarts","mindmap","graphviz","math","markmap","smiles","js","ts","html","toml","c#","bat"],p.CDN="https://unpkg.com/vditor@".concat("3.11.2"),p.MARKDOWN_OPTIONS={autoSpace:!1,gfmAutoLink:!0,codeBlockPreview:!0,fixTermTypo:!1,footnotes:!0,linkBase:"",linkPrefix:"",listStyle:!1,mark:!1,mathBlockPreview:!0,paragraphBeginningSpace:!1,sanitize:!0,toc:!1},p.HLJS_OPTIONS={enable:!0,lineNumber:!1,defaultLang:"",style:"github"},p.MATH_OPTIONS={engine:"KaTeX",inlineDigit:!1,macros:{}},p.THEME_OPTIONS={current:"light",list:{"ant-design":"Ant Design",dark:"Dark",light:"Light",wechat:"WeChat"},path:"".concat(p.CDN,"/dist/css/content-theme")},p})()}),825:((b,h,y)=>{y.d(h,{J:()=>E});var H=y(145),_=y(413),p=y(840),d=y(494),E=function(v,S,w){v===void 0&&(v=document),S===void 0&&(S=H.g.CDN);var D=p.SMILESRenderAdapter.getElements(v);D.length>0&&(0,_.G)("".concat(S,"/dist/js/smiles-drawer/smiles-drawer.min.js?v=2.1.7"),"vditorAbcjsScript").then(function(){var A=new SmiDrawer({},{});D.forEach(function(M){var L=p.SMILESRenderAdapter.getCode(M).trim();if(!(M.getAttribute("data-processed")==="true"||L.trim()==="")){var u="smiles"+(0,d.Wb)();M.innerHTML='<svg id="'.concat(u,'"></svg>'),A.draw(L,"#"+u,w==="dark"?"dark":void 0),M.setAttribute("data-processed","true")}})})}}),135:((b,h,y)=>{y.d(h,{Q:()=>d});var H=y(145),_=y(413),p=y(840),d=function(E,v){E===void 0&&(E=document),v===void 0&&(v=H.g.CDN);var S=p.abcRenderAdapter.getElements(E);S.length>0&&(0,_.G)("".concat(v,"/dist/js/abcjs/abcjs_basic.min.js"),"vditorAbcjsScript").then(function(){S.forEach(function(w){w.parentElement.classList.contains("vditor-wysiwyg__pre")||w.parentElement.classList.contains("vditor-ir__marker--pre")||w.getAttribute("data-processed")!=="true"&&(ABCJS.renderAbc(w,p.abcRenderAdapter.getCode(w).trim()),w.style.overflowX="auto",w.setAttribute("data-processed","true"))})})}}),840:((b,h,y)=>{y.r(h),y.d(h,{mathRenderAdapter:()=>H,SMILESRenderAdapter:()=>_,mermaidRenderAdapter:()=>p,markmapRenderAdapter:()=>d,mindmapRenderAdapter:()=>E,chartRenderAdapter:()=>v,abcRenderAdapter:()=>S,graphvizRenderAdapter:()=>w,flowchartRenderAdapter:()=>D,plantumlRenderAdapter:()=>A});var H={getCode:function(M){return M.textContent},getElements:function(M){return M.querySelectorAll(".language-math")}},_={getCode:function(M){return M.textContent},getElements:function(M){return M.querySelectorAll(".language-smiles")}},p={getCode:function(M){return M.textContent},getElements:function(M){return M.querySelectorAll(".language-mermaid")}},d={getCode:function(M){return M.textContent},getElements:function(M){return M.querySelectorAll(".language-markmap")}},E={getCode:function(M){return M.getAttribute("data-code")},getElements:function(M){return M.querySelectorAll(".language-mindmap")}},v={getCode:function(M){return M.innerText},getElements:function(M){return M.querySelectorAll(".language-echarts")}},S={getCode:function(M){return M.textContent},getElements:function(M){return M.querySelectorAll(".language-abc")}},w={getCode:function(M){return M.textContent},getElements:function(M){return M.querySelectorAll(".language-graphviz")}},D={getCode:function(M){return M.textContent},getElements:function(M){return M.querySelectorAll(".language-flowchart")}},A={getCode:function(M){return M.textContent},getElements:function(M){return M.querySelectorAll(".language-plantuml")}}}),775:((b,h,y)=>{y.d(h,{p:()=>S});var H=y(145),_=y(413),p=y(840),d=y(494),E=function(w,D,A,M){function L(u){return u instanceof A?u:new A(function(k){k(u)})}return new(A||(A=Promise))(function(u,k){function U(B){try{N(M.next(B))}catch(q){k(q)}}function R(B){try{N(M.throw(B))}catch(q){k(q)}}function N(B){B.done?u(B.value):L(B.value).then(U,R)}N((M=M.apply(w,D||[])).next())})},v=function(w,D){var A={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},M,L,u,k;return k={next:U(0),throw:U(1),return:U(2)},typeof Symbol=="function"&&(k[Symbol.iterator]=function(){return this}),k;function U(N){return function(B){return R([N,B])}}function R(N){if(M)throw new TypeError("Generator is already executing.");for(;k&&(k=0,N[0]&&(A=0)),A;)try{if(M=1,L&&(u=N[0]&2?L.return:N[0]?L.throw||((u=L.return)&&u.call(L),0):L.next)&&!(u=u.call(L,N[1])).done)return u;switch(L=0,u&&(N=[N[0]&2,u.value]),N[0]){case 0:case 1:u=N;break;case 4:return A.label++,{value:N[1],done:!1};case 5:A.label++,L=N[1],N=[0];continue;case 7:N=A.ops.pop(),A.trys.pop();continue;default:if(u=A.trys,!(u=u.length>0&&u[u.length-1])&&(N[0]===6||N[0]===2)){A=0;continue}if(N[0]===3&&(!u||N[1]>u[0]&&N[1]<u[3])){A.label=N[1];break}if(N[0]===6&&A.label<u[1]){A.label=u[1],u=N;break}if(u&&A.label<u[2]){A.label=u[2],A.ops.push(N);break}u[2]&&A.ops.pop(),A.trys.pop();continue}N=D.call(w,A)}catch(B){N=[6,B],L=0}finally{M=u=0}if(N[0]&5)throw N[1];return{value:N[0]?N[1]:void 0,done:!0}}},S=function(w,D,A){w===void 0&&(w=document),D===void 0&&(D=H.g.CDN);var M=p.chartRenderAdapter.getElements(w);M.length>0&&(0,_.G)("".concat(D,"/dist/js/echarts/echarts.min.js?v=5.5.1"),"vditorEchartsScript").then(function(){M.forEach(function(L){return E(void 0,void 0,void 0,function(){var u,k,U;return v(this,function(R){switch(R.label){case 0:if(L.parentElement.classList.contains("vditor-wysiwyg__pre")||L.parentElement.classList.contains("vditor-ir__marker--pre"))return[2];if(u=p.chartRenderAdapter.getCode(L).trim(),!u)return[2];R.label=1;case 1:return R.trys.push([1,3,,4]),L.getAttribute("data-processed")==="true"?[2]:[4,(0,d.Qf)(u)];case 2:return k=R.sent(),echarts.init(L,A==="dark"?"dark":void 0).setOption(k),L.setAttribute("data-processed","true"),[3,4];case 3:return U=R.sent(),L.className="vditor-reset--error",L.innerHTML="echarts render error: <br>".concat(U),[3,4];case 4:return[2]}})})})})}}),428:((b,h,y)=>{y.d(h,{O:()=>p});var H=y(105),_=y(145),p=function(d,E){Array.from(d.querySelectorAll("pre > code")).filter(function(v,S){return!(v.parentElement.classList.contains("vditor-wysiwyg__pre")||v.parentElement.classList.contains("vditor-ir__marker--pre")||v.classList.contains("language-mermaid")||v.classList.contains("language-flowchart")||v.classList.contains("language-echarts")||v.classList.contains("language-mindmap")||v.classList.contains("language-plantuml")||v.classList.contains("language-markmap")||v.classList.contains("language-abc")||v.classList.contains("language-graphviz")||v.classList.contains("language-math")||v.classList.contains("language-smiles")||v.style.maxHeight.indexOf("px")>-1||d.classList.contains("vditor-preview")&&S>5)}).forEach(function(v){var S,w,D,A=v.innerText;if(v.classList.contains("highlight-chroma")){var M=v.cloneNode(!0);M.querySelectorAll(".highlight-ln").forEach(function(U){U.remove()}),A=M.innerText}else A.endsWith(`
`)&&(A=A.substr(0,A.length-1));var L='<svg><use xlink:href="#vditor-icon-copy"></use></svg>';document.getElementById("vditorIconScript")||(L='<svg viewBox="0 0 32 32"><path d="M22.545-0h-17.455c-1.6 0-2.909 1.309-2.909 2.909v20.364h2.909v-20.364h17.455v-2.909zM26.909 5.818h-16c-1.6 0-2.909 1.309-2.909 2.909v20.364c0 1.6 1.309 2.909 2.909 2.909h16c1.6 0 2.909-1.309 2.909-2.909v-20.364c0-1.6-1.309-2.909-2.909-2.909zM26.909 29.091h-16v-20.364h16v20.364z"></path></svg>');var u=document.createElement("div");u.className="vditor-copy",u.innerHTML='<span aria-label="'.concat(((S=window.VditorI18n)===null||S===void 0?void 0:S.copy)||"复制",`"
onmouseover="this.setAttribute('aria-label', '`).concat(((w=window.VditorI18n)===null||w===void 0?void 0:w.copy)||"复制",`')"
class="vditor-tooltipped vditor-tooltipped__w"
onclick="event.stopPropagation();this.previousElementSibling.select();document.execCommand('copy');this.setAttribute('aria-label', '`).concat(((D=window.VditorI18n)===null||D===void 0?void 0:D.copied)||"已复制",`');this.previousElementSibling.blur()">`).concat(L,"</span>");var k=document.createElement("textarea");k.value=(0,H.X)(A),u.insertAdjacentElement("afterbegin",k),E&&E.renderMenu&&E.renderMenu(v,u),v.before(u),v.style.maxHeight=window.outerHeight-40+"px",v.insertAdjacentHTML("afterend",'<span style="position: absolute">'.concat(_.g.ZWSP,"</span>"))})}}),325:((b,h,y)=>{y.d(h,{P:()=>d});var H=y(145),_=y(413),p=y(840),d=function(E,v){v===void 0&&(v=H.g.CDN);var S=p.flowchartRenderAdapter.getElements(E);S.length!==0&&(0,_.G)("".concat(v,"/dist/js/flowchart.js/flowchart.min.js"),"vditorFlowchartScript").then(function(){S.forEach(function(w){if(w.getAttribute("data-processed")!=="true"){var D=flowchart.parse(p.flowchartRenderAdapter.getCode(w));w.innerHTML="",D.drawSVG(w),w.setAttribute("data-processed","true")}})})}}),483:((b,h,y)=>{y.d(h,{v:()=>d});var H=y(145),_=y(413),p=y(840),d=function(E,v){v===void 0&&(v=H.g.CDN);var S=p.graphvizRenderAdapter.getElements(E);S.length!==0&&(0,_.G)("".concat(v,"/dist/js/graphviz/viz.js"),"vditorGraphVizScript").then(function(){S.forEach(function(w){var D=p.graphvizRenderAdapter.getCode(w);if(!(w.parentElement.classList.contains("vditor-wysiwyg__pre")||w.parentElement.classList.contains("vditor-ir__marker--pre"))&&!(w.getAttribute("data-processed")==="true"||D.trim()==="")){try{var A=new Blob(["importScripts('".concat(document.getElementById("vditorGraphVizScript").src.replace("viz.js","full.render.js"),"');")],{type:"application/javascript"}),M=window.URL||window.webkitURL,L=M.createObjectURL(A),u=new Worker(L);new Viz({worker:u}).renderSVGElement(D).then(function(k){w.innerHTML=k.outerHTML}).catch(function(k){w.innerHTML="graphviz render error: <br>".concat(k),w.className="vditor-reset--error"})}catch(k){console.error("graphviz error",k)}w.setAttribute("data-processed","true")}})})}}),999:((b,h,y)=>{y.d(h,{s:()=>d});var H=y(145),_=y(413),p=y(290),d=function(E,v,S){v===void 0&&(v=document),S===void 0&&(S=H.g.CDN);var w=E.style;H.g.CODE_THEME.includes(w)||(w="github");var D=document.getElementById("vditorHljsStyle"),A="".concat(S,"/dist/js/highlight.js/styles/").concat(w,".min.css");if(D&&D.getAttribute("href")!==A&&D.remove(),(0,p.c)("".concat(S,"/dist/js/highlight.js/styles/").concat(w,".min.css"),"vditorHljsStyle"),E.enable!==!1){var M=v.querySelectorAll("pre > code");M.length!==0&&(0,_.G)("".concat(S,"/dist/js/highlight.js/highlight.min.js?v=11.7.0"),"vditorHljsScript").then(function(){(0,_.G)("".concat(S,"/dist/js/highlight.js/third-languages.js?v=1.0.1"),"vditorHljsThirdScript").then(function(){v.querySelectorAll("pre > code").forEach(function(L){if(!(L.parentElement.classList.contains("vditor-ir__marker--pre")||L.parentElement.classList.contains("vditor-wysiwyg__pre"))&&!(L.classList.contains("language-mermaid")||L.classList.contains("language-flowchart")||L.classList.contains("language-echarts")||L.classList.contains("language-mindmap")||L.classList.contains("language-plantuml")||L.classList.contains("language-smiles")||L.classList.contains("language-abc")||L.classList.contains("language-graphviz")||L.classList.contains("language-math"))){E.defaultLang!==""&&L.className.indexOf("language-")===-1&&L.classList.add("language-"+E.defaultLang);var u=L.className.replace("language-","");if(window.hljs.getLanguage(u)||(u="plaintext"),L.innerHTML=window.hljs.highlight(L.textContent,{language:u,ignoreIllegals:!0}).value,L.classList.add("hljs"),!!E.lineNumber){L.classList.add("vditor-linenumber");var k=L.querySelector(".vditor-linenumber__temp");k||(k=document.createElement("div"),k.className="vditor-linenumber__temp",L.insertAdjacentElement("beforeend",k));var U=getComputedStyle(L).whiteSpace,R=!1;(U==="pre-wrap"||U==="pre-line")&&(R=!0);var N="",B=L.textContent.split(/\r\n|\r|\n/g);B.pop(),B.map(function(q){var J="";R&&(k.textContent=q||`
`,J=' style="height:'.concat(k.getBoundingClientRect().height,'px"')),N+="<span".concat(J,"></span>")}),k.style.display="none",N='<span class="vditor-linenumber__rows">'.concat(N,"</span>"),L.insertAdjacentHTML("beforeend",N)}}})})})}}}),11:((b,h,y)=>{y.d(h,{K:()=>S});var H=y(145),_=y(413),p=y(840),d={},E=function(w,D){var A=w.transform(D),M=Object.keys(A.features).filter(function(R){return!d[R]});M.forEach(function(R){d[R]=!0});var L=w.getAssets(M),u=L.styles,k=L.scripts,U=window.markmap;return u&&U.loadCSS(u),k&&U.loadJS(k),A},v=function(w,D){var A=window.markmap,M=A.Transformer,L=A.Markmap,u=A.deriveOptions;A.globalCSS;var k=new M;w.innerHTML='<svg style="width:100%"></svg>';var U=w.firstChild,R=L.create(U,null),N=E(k,D),B=N.root,q=N.frontmatter,J=q?.markmap,se=u(J);R.setData(B,se),R.fit()},S=function(w,D){w===void 0&&(w=document),D===void 0&&(D=H.g.CDN);var A=p.markmapRenderAdapter.getElements(w);A.length!==0&&(0,_.G)("".concat(D,"/dist/js/markmap/markmap.min.js"),"vditorMarkerScript").then(function(){A.forEach(function(M){var L=p.markmapRenderAdapter.getCode(M);if(!(M.getAttribute("data-processed")==="true"||L.trim()==="")){var u=document.createElement("div");u.className="language-markmap",M.parentNode.appendChild(u),v(u,L),M.parentNode.childNodes[0].nodeName=="CODE"&&M.parentNode.removeChild(M.parentNode.childNodes[0])}})})}}),472:((b,h,y)=>{y.d(h,{H:()=>v});var H=y(145),_=y(413),p=y(290),d=y(105),E=y(840),v=function(S,w){S===void 0&&(S=document);var D=E.mathRenderAdapter.getElements(S);if(D.length!==0){var A={cdn:H.g.CDN,math:{engine:"KaTeX",inlineDigit:!1,macros:{}}};if(w&&w.math&&(w.math=Object.assign({},A.math,w.math)),w=Object.assign({},A,w),w.math.engine==="KaTeX")(0,p.c)("".concat(w.cdn,"/dist/js/katex/katex.min.css?v=0.16.9"),"vditorKatexStyle"),(0,_.G)("".concat(w.cdn,"/dist/js/katex/katex.min.js?v=0.16.9"),"vditorKatexScript").then(function(){(0,_.G)("".concat(w.cdn,"/dist/js/katex/mhchem.min.js?v=0.16.9"),"vditorKatexChemScript").then(function(){D.forEach(function(u){if(!(u.parentElement.classList.contains("vditor-wysiwyg__pre")||u.parentElement.classList.contains("vditor-ir__marker--pre"))&&!u.getAttribute("data-math")){var k=(0,d.X)(E.mathRenderAdapter.getCode(u));u.setAttribute("data-math",k);try{u.innerHTML=katex.renderToString(k,{displayMode:u.tagName==="DIV",output:"html",macros:w.math.macros})}catch(U){u.innerHTML=U.message,u.className="language-math vditor-reset--error"}u.addEventListener("copy",function(U){U.stopPropagation(),U.preventDefault();var R=U.currentTarget.closest(".language-math");U.clipboardData.setData("text/html",R.innerHTML),U.clipboardData.setData("text/plain",R.getAttribute("data-math"))})}})})});else if(w.math.engine==="MathJax"){var M=function(u){if(u.length!==0){var k=0,U=u[u.length-1],R=function(){var N=u[k++];N===U?N():N(R)};R()}};window.MathJax||(window.MathJax={loader:{paths:{mathjax:"".concat(w.cdn,"/dist/js/mathjax")}},startup:{typeset:!1},tex:{macros:w.math.macros}},Object.assign(window.MathJax,w.math.mathJaxOptions)),(0,_.J)("".concat(w.cdn,"/dist/js/mathjax/tex-svg-full.js"),"protyleMathJaxScript");var L=function(u,k){var U=(0,d.X)(u.textContent).trim(),R=window.MathJax.getMetricsFor(u);R.display=u.tagName==="DIV",window.MathJax.tex2svgPromise(U,R).then(function(N){u.innerHTML="",u.setAttribute("data-math",U),u.append(N),window.MathJax.startup.document.clear(),window.MathJax.startup.document.updateDocument();var B=N.querySelector('[data-mml-node="merror"]');B&&B.textContent.trim()!==""&&(u.innerHTML=B.textContent.trim(),u.className="vditor-reset--error"),k&&k()})};window.MathJax.startup.promise.then(function(){for(var u=[],k=function(R){var N=D[R];!N.parentElement.classList.contains("vditor-wysiwyg__pre")&&!N.parentElement.classList.contains("vditor-ir__marker--pre")&&!N.getAttribute("data-math")&&(0,d.X)(N.textContent).trim()&&u.push(function(B){R===D.length-1?L(N):L(N,B)})},U=0;U<D.length;U++)k(U);M(u)})}}}}),280:((b,h,y)=>{y.d(h,{Y:()=>E});var H=y(494),_=function(v,S){v.insertAdjacentHTML("afterend",'<video controls="controls" src="'.concat(S,'"></video>')),v.remove()},p=function(v,S){v.insertAdjacentHTML("afterend",'<audio controls="controls" src="'.concat(S,'"></audio>')),v.remove()},d=function(v,S){var w=S.match(/\/\/(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))([\w|-]{11})(?:(?:[\?&]t=)(\S+))?/),D=S.match(/\/\/v\.youku\.com\/v_show\/id_(\w+)=*\.html/),A=S.match(/\/\/v\.qq\.com\/x\/cover\/.*\/([^\/]+)\.html\??.*/),M=S.match(/(?:www\.|\/\/)coub\.com\/view\/(\w+)/),L=S.match(/(?:www\.|\/\/)facebook\.com\/([^\/]+)\/videos\/([0-9]+)/),u=S.match(/.+dailymotion.com\/(video|hub)\/(\w+)\?/),k=S.match(/(?:www\.|\/\/)bilibili\.com\/video\/(\w+)/),U=S.match(/(?:www\.|\/\/)ted\.com\/talks\/(\w+)/);if(w&&w[1].length===11)v.insertAdjacentHTML("afterend",'<iframe class="iframe__video" src="//www.youtube.com/embed/'.concat(w[1]+(w[2]?"?start="+w[2]:""),'"></iframe>')),v.remove();else if(D&&D[1])v.insertAdjacentHTML("afterend",'<iframe class="iframe__video" src="//player.youku.com/embed/'.concat(D[1],'"></iframe>')),v.remove();else if(A&&A[1])v.insertAdjacentHTML("afterend",'<iframe class="iframe__video" src="https://v.qq.com/txp/iframe/player.html?vid='.concat(A[1],'"></iframe>')),v.remove();else if(M&&M[1])v.insertAdjacentHTML("afterend",`<iframe class="iframe__video"
 src="//coub.com/embed/`.concat(M[1],'?muted=false&autostart=false&originalSize=true&startWithHD=true"></iframe>')),v.remove();else if(L&&L[0])v.insertAdjacentHTML("afterend",`<iframe class="iframe__video"
 src="https://www.facebook.com/plugins/video.php?href=`.concat(encodeURIComponent(L[0]),'"></iframe>')),v.remove();else if(u&&u[2])v.insertAdjacentHTML("afterend",`<iframe class="iframe__video"
 src="https://www.dailymotion.com/embed/video/`.concat(u[2],'"></iframe>')),v.remove();else if(S.indexOf("bilibili.com")>-1&&(S.indexOf("bvid=")>-1||k&&k[1])){var R={bvid:(0,H.on)("bvid",S)||k&&k[1],page:"1",high_quality:"1",as_wide:"1",allowfullscreen:"true",autoplay:"0"};new URL(S.startsWith("http")?S:"https:"+S).search.split("&").forEach(function(q,J){if(q){J===0&&(q=q.substr(1));var se=q.split("=");R[se[0]]=se[1]}});var N="https://player.bilibili.com/player.html?",B=Object.keys(R);B.forEach(function(q,J){N+="".concat(q,"=").concat(R[q]),J<B.length-1&&(N+="&")}),v.insertAdjacentHTML("afterend",'<iframe class="iframe__video" src="'.concat(N,'"></iframe>')),v.remove()}else U&&U[1]&&(v.insertAdjacentHTML("afterend",'<iframe class="iframe__video" src="//embed.ted.com/talks/'.concat(U[1],'"></iframe>')),v.remove())},E=function(v){v&&v.querySelectorAll("a").forEach(function(S){var w=S.getAttribute("href");w&&(w.match(/^.+.(mp4|m4v|ogg|ogv|webm)$/)?_(S,w):w.match(/^.+.(mp3|wav|flac)$/)?p(S,w):d(S,w))})}}),637:((b,h,y)=>{y.d(h,{i:()=>S});var H=y(145),_=y(413),p=y(840),d=y(494),E=function(w,D,A,M){function L(u){return u instanceof A?u:new A(function(k){k(u)})}return new(A||(A=Promise))(function(u,k){function U(B){try{N(M.next(B))}catch(q){k(q)}}function R(B){try{N(M.throw(B))}catch(q){k(q)}}function N(B){B.done?u(B.value):L(B.value).then(U,R)}N((M=M.apply(w,D||[])).next())})},v=function(w,D){var A={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},M,L,u,k;return k={next:U(0),throw:U(1),return:U(2)},typeof Symbol=="function"&&(k[Symbol.iterator]=function(){return this}),k;function U(N){return function(B){return R([N,B])}}function R(N){if(M)throw new TypeError("Generator is already executing.");for(;k&&(k=0,N[0]&&(A=0)),A;)try{if(M=1,L&&(u=N[0]&2?L.return:N[0]?L.throw||((u=L.return)&&u.call(L),0):L.next)&&!(u=u.call(L,N[1])).done)return u;switch(L=0,u&&(N=[N[0]&2,u.value]),N[0]){case 0:case 1:u=N;break;case 4:return A.label++,{value:N[1],done:!1};case 5:A.label++,L=N[1],N=[0];continue;case 7:N=A.ops.pop(),A.trys.pop();continue;default:if(u=A.trys,!(u=u.length>0&&u[u.length-1])&&(N[0]===6||N[0]===2)){A=0;continue}if(N[0]===3&&(!u||N[1]>u[0]&&N[1]<u[3])){A.label=N[1];break}if(N[0]===6&&A.label<u[1]){A.label=u[1],u=N;break}if(u&&A.label<u[2]){A.label=u[2],A.ops.push(N);break}u[2]&&A.ops.pop(),A.trys.pop();continue}N=D.call(w,A)}catch(B){N=[6,B],L=0}finally{M=u=0}if(N[0]&5)throw N[1];return{value:N[0]?N[1]:void 0,done:!0}}},S=function(w,D,A){w===void 0&&(w=document),D===void 0&&(D=H.g.CDN);var M=p.mermaidRenderAdapter.getElements(w);M.length!==0&&(0,_.G)("".concat(D,"/dist/js/mermaid/mermaid.min.js?v=11.6.0"),"vditorMermaidScript").then(function(){var L={securityLevel:"loose",altFontFamily:"sans-serif",fontFamily:"sans-serif",startOnLoad:!1,flowchart:{htmlLabels:!0,useMaxWidth:!0},sequence:{useMaxWidth:!0,diagramMarginX:8,diagramMarginY:8,boxMargin:8,showSequenceNumbers:!0},gantt:{leftPadding:75,rightPadding:20}};A==="dark"&&(L.theme="dark"),mermaid.initialize(L),M.forEach(function(u){return E(void 0,void 0,void 0,function(){var k,U,R,N,B;return v(this,function(q){switch(q.label){case 0:if(k=p.mermaidRenderAdapter.getCode(u),u.getAttribute("data-processed")==="true"||k.trim()==="")return[2];U="mermaid"+(0,d.Wb)(),q.label=1;case 1:return q.trys.push([1,3,,4]),[4,mermaid.render(U,u.textContent)];case 2:return R=q.sent(),u.innerHTML=R.svg,[3,4];case 3:return N=q.sent(),B=document.querySelector("#"+U),u.innerHTML="".concat(B.outerHTML,`<br>
<div style="text-align: left"><small>`).concat(N.message.replace(/\n/,"<br>"),"</small></div>"),B.parentElement.remove(),[3,4];case 4:return u.setAttribute("data-processed","true"),[2]}})})})})}}),194:((b,h,y)=>{y.d(h,{P:()=>d});var H=y(145),_=y(413),p=y(840),d=function(E,v,S){E===void 0&&(E=document),v===void 0&&(v=H.g.CDN);var w=p.mindmapRenderAdapter.getElements(E);w.length>0&&(0,_.G)("".concat(v,"/dist/js/echarts/echarts.min.js?v=5.5.1"),"vditorEchartsScript").then(function(){w.forEach(function(D){if(!(D.parentElement.classList.contains("vditor-wysiwyg__pre")||D.parentElement.classList.contains("vditor-ir__marker--pre"))){var A=p.mindmapRenderAdapter.getCode(D);if(A)try{if(D.getAttribute("data-processed")==="true")return;echarts.init(D,S==="dark"?"dark":void 0).setOption({series:[{data:[JSON.parse(decodeURIComponent(A))],initialTreeDepth:-1,itemStyle:{borderWidth:0,color:"#4285f4"},label:{backgroundColor:"#f6f8fa",borderColor:"#d1d5da",borderRadius:5,borderWidth:.5,color:"#586069",lineHeight:20,offset:[-5,0],padding:[0,5],position:"insideRight"},lineStyle:{color:"#d1d5da",width:1},roam:!0,symbol:function(M,L){var u;return!((u=L?.data)===null||u===void 0)&&u.children?"circle":"path://"},type:"tree"}],tooltip:{trigger:"item",triggerOn:"mousemove"}}),D.setAttribute("data-processed","true")}catch(M){D.className="vditor-reset--error",D.innerHTML="mindmap render error: <br>".concat(M)}}})})}}),436:((b,h,y)=>{y.d(h,{k:()=>p});var H=y(771),_=y(472),p=function(d,E,v){var S="",w=[];if(Array.from(d.children).forEach(function(L,u){if((0,H.W)(L)){if(v){var k=L.id.lastIndexOf("_");L.id=L.id.substring(0,k===-1?void 0:k)+"_"+u}w.push(L.id),S+=L.outerHTML.replace("<wbr>","")}}),S==="")return E.innerHTML="","";var D=document.createElement("div");if(v)v.lute.SetToC(!0),v.currentMode==="wysiwyg"&&!v.preview.element.contains(d)?D.innerHTML=v.lute.SpinVditorDOM("<p>[ToC]</p>"+S):v.currentMode==="ir"&&!v.preview.element.contains(d)?D.innerHTML=v.lute.SpinVditorIRDOM("<p>[ToC]</p>"+S):D.innerHTML=v.lute.HTML2VditorDOM("<p>[ToC]</p>"+S),v.lute.SetToC(v.options.preview.markdown.toc);else{E.classList.add("vditor-outline");var A=Lute.New();A.SetToC(!0),D.innerHTML=A.HTML2VditorDOM("<p>[ToC]</p>"+S)}var M=D.firstElementChild.querySelectorAll("li > span[data-target-id]");return M.forEach(function(L,u){if(L.nextElementSibling&&L.nextElementSibling.tagName==="UL"){var k="<svg class='vditor-outline__action'><use xlink:href='#vditor-icon-down'></use></svg>";document.getElementById("vditorIconScript")||(k='<svg class="vditor-outline__action" viewBox="0 0 32 32"><path d="M3.76 6.12l12.24 12.213 12.24-12.213 3.76 3.76-16 16-16-16 3.76-3.76z"></path></svg>'),L.innerHTML="".concat(k,"<span>").concat(L.innerHTML,"</span>")}else L.innerHTML="<svg></svg><span>".concat(L.innerHTML,"</span>");L.setAttribute("data-target-id",w[u])}),S=D.firstElementChild.innerHTML,M.length===0?(E.innerHTML="",S):(E.innerHTML=S,v&&(0,_.H)(E,{cdn:v.options.cdn,math:v.options.preview.math}),E.firstElementChild.addEventListener("click",function(L){for(var u=L.target;u&&!u.isEqualNode(E);){if(u.classList.contains("vditor-outline__action")){u.classList.contains("vditor-outline__action--close")?(u.classList.remove("vditor-outline__action--close"),u.parentElement.nextElementSibling.setAttribute("style","display:block")):(u.classList.add("vditor-outline__action--close"),u.parentElement.nextElementSibling.setAttribute("style","display:none")),L.preventDefault(),L.stopPropagation();break}else if(u.getAttribute("data-target-id")){L.preventDefault(),L.stopPropagation();var k=document.getElementById(u.getAttribute("data-target-id"));if(!k)return;if(v)if(v.options.height==="auto"){var U=k.offsetTop+v.element.offsetTop;v.options.toolbarConfig.pin||(U+=v.toolbar.element.offsetHeight),window.scrollTo(window.scrollX,U)}else v.element.offsetTop<window.scrollY&&window.scrollTo(window.scrollX,v.element.offsetTop),v.preview.element.contains(d)?d.parentElement.scrollTop=k.offsetTop:d.scrollTop=k.offsetTop;else window.scrollTo(window.scrollX,k.offsetTop);break}u=u.parentElement}}),S)}}),229:((b,h,y)=>{y.d(h,{B:()=>d});var H=y(145),_=y(413),p=y(840),d=function(E,v){E===void 0&&(E=document),v===void 0&&(v=H.g.CDN);var S=p.plantumlRenderAdapter.getElements(E);S.length!==0&&(0,_.G)("".concat(v,"/dist/js/plantuml/plantuml-encoder.min.js"),"vditorPlantumlScript").then(function(){S.forEach(function(w){if(!(w.parentElement.classList.contains("vditor-wysiwyg__pre")||w.parentElement.classList.contains("vditor-ir__marker--pre"))){var D=p.plantumlRenderAdapter.getCode(w).trim();if(D)try{w.innerHTML='<object type="image/svg+xml" data="https://www.plantuml.com/plantuml/svg/~1'.concat(plantumlEncoder.encode(D),'"/>')}catch(A){w.className="vditor-reset--error",w.innerHTML="plantuml render error: <br>".concat(A)}}})})}}),214:((b,h,y)=>{y.d(h,{X:()=>H});var H=function(_){var p=Lute.New();return p.PutEmojis(_.emojis),p.SetEmojiSite(_.emojiSite),p.SetHeadingAnchor(_.headingAnchor),p.SetInlineMathAllowDigitAfterOpenMarker(_.inlineMathDigit),p.SetAutoSpace(_.autoSpace),p.SetToC(_.toc),p.SetFootnotes(_.footnotes),p.SetFixTermTypo(_.fixTermTypo),p.SetVditorCodeBlockPreview(_.codeBlockPreview),p.SetVditorMathBlockPreview(_.mathBlockPreview),p.SetSanitize(_.sanitize),p.SetChineseParagraphBeginningSpace(_.paragraphBeginningSpace),p.SetRenderListStyle(_.listStyle),p.SetLinkBase(_.linkBase),p.SetLinkPrefix(_.linkPrefix),p.SetMark(_.mark),p.SetGFMAutoLink(_.gfmAutoLink),_.lazyLoadImage&&p.SetImageLazyLoading(_.lazyLoadImage),p}}),190:((b,h,y)=>{y.d(h,{E:()=>H});var H=function(_,p,d){d===void 0&&(d="classic");var E=_.getBoundingClientRect(),v=36;document.body.insertAdjacentHTML("beforeend",'<div class="vditor vditor-img'.concat(d==="dark"?" vditor--dark":"",`">
    <div class="vditor-img__bar">
      <span class="vditor-img__btn" data-deg="0">
        <svg><use xlink:href="#vditor-icon-redo"></use></svg>
        `).concat(window.VditorI18n.spin,`
      </span>
      <span class="vditor-img__btn"  onclick="this.parentElement.parentElement.outerHTML = '';document.body.style.overflow = ''">
        X &nbsp;`).concat(window.VditorI18n.close,`
      </span>
    </div>
    <div class="vditor-img__img" onclick="this.parentElement.outerHTML = '';document.body.style.overflow = ''">
      <img style="width: `).concat(_.width,"px;height:").concat(_.height,"px;transform: translate3d(").concat(E.left,"px, ").concat(E.top-v,'px, 0)" src="').concat(_.getAttribute("src"),`">
    </div>
</div>`)),document.body.style.overflow="hidden";var S=document.querySelector(".vditor-img img"),w="translate3d(".concat(Math.max(0,window.innerWidth-_.naturalWidth)/2,"px, ").concat(Math.max(0,window.innerHeight-v-_.naturalHeight)/2,"px, 0)");setTimeout(function(){S.setAttribute("style","transition: transform .3s ease-in-out;transform: ".concat(w)),setTimeout(function(){S.parentElement.scrollTo((S.parentElement.scrollWidth-S.parentElement.clientWidth)/2,(S.parentElement.scrollHeight-S.parentElement.clientHeight)/2)},400)});var D=document.querySelector(".vditor-img__btn");D.addEventListener("click",function(){var A=parseInt(D.getAttribute("data-deg"),10)+90;A/90%2===1&&_.naturalWidth>S.parentElement.clientHeight?S.style.transform="translate3d(".concat(Math.max(0,window.innerWidth-_.naturalWidth)/2,"px, ").concat(_.naturalWidth/2-_.naturalHeight/2,"px, 0) rotateZ(").concat(A,"deg)"):S.style.transform="".concat(w," rotateZ(").concat(A,"deg)"),D.setAttribute("data-deg",A.toString()),setTimeout(function(){S.parentElement.scrollTo((S.parentElement.scrollWidth-S.parentElement.clientWidth)/2,(S.parentElement.scrollHeight-S.parentElement.clientHeight)/2)},400)})}}),580:((b,h,y)=>{y.d(h,{Y:()=>p});var H=y(145),_=y(290),p=function(d,E){E===void 0&&(E=H.g.CDN),H.g.CODE_THEME.includes(d)||(d="github");var v=document.getElementById("vditorHljsStyle"),S="".concat(E,"/dist/js/highlight.js/styles/").concat(d,".min.css");v?v.getAttribute("href")!==S&&(v.remove(),(0,_.c)(S,"vditorHljsStyle")):(0,_.c)(S,"vditorHljsStyle")}}),538:((b,h,y)=>{y.d(h,{Z:()=>_});var H=y(290),_=function(p,d){if(!(!p||!d)){var E=document.getElementById("vditorContentTheme"),v="".concat(d,"/").concat(p,".css");E?E.getAttribute("href")!==v&&(E.remove(),(0,H.c)(v,"vditorContentTheme")):(0,H.c)(v,"vditorContentTheme")}}}),413:((b,h,y)=>{y.d(h,{J:()=>H,G:()=>_});var H=function(p,d){if(document.getElementById(d))return!1;var E=new XMLHttpRequest;E.open("GET",p,!1),E.setRequestHeader("Accept","text/javascript, application/javascript, application/ecmascript, application/x-ecmascript, */*; q=0.01"),E.send("");var v=document.createElement("script");v.type="text/javascript",v.text=E.responseText,v.id=d,document.head.appendChild(v)},_=function(p,d){return new Promise(function(E,v){if(document.getElementById(d))return E(!0),!1;var S=document.createElement("script");S.src=p,S.async=!0,document.head.appendChild(S),S.onerror=function(w){v(w)},S.onload=function(){if(document.getElementById(d))return S.remove(),E(!0),!1;S.id=d,E(!0)}})}}),290:((b,h,y)=>{y.d(h,{c:()=>H});var H=function(_,p){if(!document.getElementById(p)){var d=document.createElement("link");d.id=p,d.rel="stylesheet",d.type="text/css",d.href=_,document.getElementsByTagName("head")[0].appendChild(d)}}}),105:((b,h,y)=>{y.d(h,{X:()=>H});var H=function(_){return _.replace(/\u00a0/g," ")}}),410:((b,h,y)=>{y.d(h,{G6:()=>H,vU:()=>_,pK:()=>p,Le:()=>d,yl:()=>E,ns:()=>v,i7:()=>S});var H=function(){return navigator.userAgent.indexOf("Safari")>-1&&navigator.userAgent.indexOf("Chrome")===-1},_=function(){return navigator.userAgent.toLowerCase().indexOf("firefox")>-1},p=function(){try{return typeof localStorage<"u"}catch{return!1}},d=function(){return navigator.userAgent.indexOf("iPhone")>-1?"touchstart":"click"},E=function(w){return navigator.platform.toUpperCase().indexOf("MAC")>=0?!!(w.metaKey&&!w.ctrlKey):!!(!w.metaKey&&w.ctrlKey)},v=function(w){return/Mac/.test(navigator.platform)||navigator.platform==="iPhone"?w.indexOf("⇧")>-1&&_()&&(w=w.replace(";",":").replace("=","+").replace("-","_")):(w.startsWith("⌘")?w=w.replace("⌘","⌘+"):w.startsWith("⌥")&&w.substr(1,1)!=="⌘"?w=w.replace("⌥","⌥+"):w=w.replace("⇧⌘","⌘+⇧+").replace("⌥⌘","⌥+⌘+"),w=w.replace("⌘","Ctrl").replace("⇧","Shift").replace("⌥","Alt"),w.indexOf("Shift")>-1&&(w=w.replace(";",":").replace("=","+").replace("-","_"))),w},S=function(){return/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}}),494:((b,h,y)=>{y.d(h,{Wb:()=>H,on:()=>_,Qf:()=>p});var H=function(){return([1e7].toString()+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(d){return(parseInt(d,10)^window.crypto.getRandomValues(new Uint32Array(1))[0]&15>>parseInt(d,10)/4).toString(16)})},_=function(d,E){E===void 0&&(E=window.location.search);var v=E.substring(E.indexOf("?")),S=v.indexOf("#"),w=new URLSearchParams(v.substring(0,S>=0?S:void 0));return w.get(d)},p=function(d){return Function('"use strict";return ('.concat(d,")"))()}}),106:((b,h,y)=>{y.d(h,{JQ:()=>_,E2:()=>p,O9:()=>d,a1:()=>E,F9:()=>v,lG:()=>S,fb:()=>w,DX:()=>D});var H=y(771),_=function(A,M){for(var L=w(A,M),u=!1,k=!1;L&&!L.classList.contains("vditor-reset")&&!k;)u=w(L.parentElement,M),u?L=u:k=!0;return L||!1},p=function(A,M){for(var L=(0,H.S)(A,M),u=!1,k=!1;L&&!L.classList.contains("vditor-reset")&&!k;)u=(0,H.S)(L.parentElement,M),u?L=u:k=!0;return L||!1},d=function(A){var M=p(A,"UL"),L=p(A,"OL"),u=M;return L&&(!M||M&&L.contains(M))&&(u=L),u},E=function(A,M,L){if(!A)return!1;A.nodeType===3&&(A=A.parentElement);for(var u=A,k=!1;u&&!k&&!u.classList.contains("vditor-reset");)u.getAttribute(M)===L?k=!0:u=u.parentElement;return k&&u},v=function(A){if(!A)return!1;A.nodeType===3&&(A=A.parentElement);var M=A,L=!1,u=E(A,"data-block","0");if(u)return u;for(;M&&!L&&!M.classList.contains("vditor-reset");)M.tagName==="H1"||M.tagName==="H2"||M.tagName==="H3"||M.tagName==="H4"||M.tagName==="H5"||M.tagName==="H6"||M.tagName==="P"||M.tagName==="BLOCKQUOTE"||M.tagName==="OL"||M.tagName==="UL"?L=!0:M=M.parentElement;return L&&M},S=function(A,M){if(!A)return!1;A.nodeType===3&&(A=A.parentElement);for(var L=A,u=!1;L&&!u&&!L.classList.contains("vditor-reset");)L.nodeName===M?u=!0:L=L.parentElement;return u&&L},w=function(A,M){if(!A)return!1;A.nodeType===3&&(A=A.parentElement);for(var L=A,u=!1;L&&!u&&!L.classList.contains("vditor-reset");)L.classList.contains(M)?u=!0:L=L.parentElement;return u&&L},D=function(A){for(;A&&A.lastChild;)A=A.lastChild;return A}}),771:((b,h,y)=>{y.d(h,{S:()=>H,W:()=>_});var H=function(p,d){if(!p)return!1;p.nodeType===3&&(p=p.parentElement);for(var E=p,v=!1;E&&!v&&!E.classList.contains("vditor-reset");)E.nodeName.indexOf(d)===0?v=!0:E=E.parentElement;return v&&E},_=function(p){var d=H(p,"H");return d&&d.tagName.length===2&&d.tagName!=="HR"?d:!1}}),673:((b,h,y)=>{y.d(h,{T:()=>H});var H=function(){for(var _=[],p=0;p<arguments.length;p++)_[p]=arguments[p];for(var d={},E=function(S){for(var w in S)S.hasOwnProperty(w)&&(Object.prototype.toString.call(S[w])==="[object Object]"?d[w]=H(d[w],S[w]):d[w]=S[w])},v=0;v<_.length;v++)E(_[v]);return d}}),810:((b,h,y)=>{y.d(h,{zh:()=>d,Ny:()=>E,Gb:()=>v,Hc:()=>S,im:()=>w,$j:()=>D,ib:()=>A,oC:()=>M});var H=y(145),_=y(410),p=y(106),d=function(L){var u,k=L[L.currentMode].element;return getSelection().rangeCount>0&&(u=getSelection().getRangeAt(0),k.isEqualNode(u.startContainer)||k.contains(u.startContainer))?u:L[L.currentMode].range?L[L.currentMode].range:(k.focus(),u=k.ownerDocument.createRange(),u.setStart(k,0),u.collapse(!0),u)},E=function(L){var u=window.getSelection().getRangeAt(0);if(!L.contains(u.startContainer)&&!(0,p.fb)(u.startContainer,"vditor-panel--none"))return{left:0,top:0};var k=L.parentElement.getBoundingClientRect(),U;if(u.getClientRects().length===0)if(u.startContainer.nodeType===3){var R=u.startContainer.parentElement;if(R&&R.getClientRects().length>0)U=R.getClientRects()[0];else return{left:0,top:0}}else{var N=u.startContainer.children;if(N[u.startOffset]&&N[u.startOffset].getClientRects().length>0)U=N[u.startOffset].getClientRects()[0];else if(u.startContainer.childNodes.length>0){var B=u.cloneRange();u.selectNode(u.startContainer.childNodes[Math.max(0,u.startOffset-1)]),U=u.getClientRects()[0],u.setEnd(B.endContainer,B.endOffset),u.setStart(B.startContainer,B.startOffset)}else U=u.startContainer.getClientRects()[0];if(!U){for(var q=u.startContainer.childNodes[u.startOffset];!q.getClientRects||q.getClientRects&&q.getClientRects().length===0;)q=q.parentElement;U=q.getClientRects()[0]}}else U=u.getClientRects()[0];return{left:U.left-k.left,top:U.top-k.top}},v=function(L,u){if(!u){if(getSelection().rangeCount===0)return!1;u=getSelection().getRangeAt(0)}var k=u.commonAncestorContainer;return L.isEqualNode(k)||L.contains(k)},S=function(L){var u=window.getSelection();u.removeAllRanges(),u.addRange(L)},w=function(L,u,k){var U={end:0,start:0};if(!k){if(getSelection().rangeCount===0)return U;k=window.getSelection().getRangeAt(0)}if(v(u,k)){var R=k.cloneRange();L.childNodes[0]&&L.childNodes[0].childNodes[0]?R.setStart(L.childNodes[0].childNodes[0],0):R.selectNodeContents(L),R.setEnd(k.startContainer,k.startOffset),U.start=R.toString().length,U.end=U.start+k.toString().length}return U},D=function(L,u,k){var U=0,R=0,N=k.childNodes[R],B=!1,q=!1;L=Math.max(0,L),u=Math.max(0,u);var J=k.ownerDocument.createRange();for(J.setStart(N||k,0),J.collapse(!0);!q&&N;){var se=U+N.textContent.length;if(!B&&L>=U&&L<=se&&(L===0?J.setStart(N,0):N.childNodes[0].nodeType===3?J.setStart(N.childNodes[0],L-U):N.nextSibling?J.setStartBefore(N.nextSibling):J.setStartAfter(N),B=!0,L===u)){q=!0;break}B&&u>=U&&u<=se&&(u===0?J.setEnd(N,0):N.childNodes[0].nodeType===3?J.setEnd(N.childNodes[0],u-U):N.nextSibling?J.setEndBefore(N.nextSibling):J.setEndAfter(N),q=!0),U=se,N=k.childNodes[++R]}return!q&&k.childNodes[R-1]&&J.setStartBefore(k.childNodes[R-1]),S(J),J},A=function(L,u){var k=L.querySelector("wbr");if(k){if(!k.previousElementSibling)k.previousSibling?u.setStart(k.previousSibling,k.previousSibling.textContent.length):k.nextSibling?k.nextSibling.nodeType===3?u.setStart(k.nextSibling,0):u.setStartBefore(k.nextSibling):u.setStart(k.parentElement,0);else if(k.previousElementSibling.isSameNode(k.previousSibling))if(k.previousElementSibling.lastChild){u.setStartBefore(k),u.collapse(!0),S(u),(0,_.i7)()&&(k.previousElementSibling.tagName==="EM"||k.previousElementSibling.tagName==="STRONG"||k.previousElementSibling.tagName==="S")&&(u.insertNode(document.createTextNode(H.g.ZWSP)),u.collapse(!1)),k.remove();return}else u.setStartAfter(k.previousElementSibling);else u.setStart(k.previousSibling,k.previousSibling.textContent.length);u.collapse(!0),k.remove(),S(u)}},M=function(L,u){var k=document.createElement("div");k.innerHTML=L;var U=k.querySelectorAll("p");U.length===1&&!U[0].previousSibling&&!U[0].nextSibling&&u[u.currentMode].element.children.length>0&&k.firstElementChild.tagName==="P"&&(L=U[0].innerHTML.trim());var R=document.createElement("div");R.innerHTML=L;var N=d(u);if(N.toString()!==""&&(u[u.currentMode].preventInput=!0,document.execCommand("delete",!1,"")),R.firstElementChild&&R.firstElementChild.getAttribute("data-block")==="0"){R.lastElementChild.insertAdjacentHTML("beforeend","<wbr>");var B=(0,p.F9)(N.startContainer);if(!B)u[u.currentMode].element.insertAdjacentHTML("beforeend",R.innerHTML);else{var q=(0,p.lG)(N.startContainer,"LI");q&&R.firstElementChild.tagName==="UL"?q.insertAdjacentHTML("afterend",R.firstElementChild.innerHTML):B.insertAdjacentHTML("afterend",R.innerHTML)}A(u[u.currentMode].element,N)}else{var J=document.createElement("template");J.innerHTML=L,N.insertNode(J.content.cloneNode(!0)),N.collapse(!1),S(N)}}})},c={};function f(b){var h=c[b];if(h!==void 0)return h.exports;var y=c[b]={exports:{}};return l[b](y,y.exports,f),y.exports}f.d=(b,h)=>{for(var y in h)f.o(h,y)&&!f.o(b,y)&&Object.defineProperty(b,y,{enumerable:!0,get:h[y]})},f.o=(b,h)=>Object.prototype.hasOwnProperty.call(b,h),f.r=b=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(b,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(b,"__esModule",{value:!0})};var g={};return(()=>{f.d(g,{default:()=>Vc});var b=f(408),h=f(145),y=f(105),H=function(e){return e.currentMode==="sv"?(0,y.X)("".concat(e.sv.element.textContent,`
`).replace(/\n\n$/,`
`)):e.currentMode==="wysiwyg"?e.lute.VditorDOM2Md(e.wysiwyg.element.innerHTML):e.currentMode==="ir"?e.lute.VditorIRDOM2Md(e.ir.element.innerHTML):""},_=f(413),p=(function(){function e(){this.element=document.createElement("div"),this.element.className="vditor-devtools",this.element.innerHTML='<div class="vditor-reset--error"></div><div style="height: 100%;"></div>'}return e.prototype.renderEchart=function(t){var n=this;t.devtools.element.style.display==="block"&&(0,_.G)("".concat(t.options.cdn,"/dist/js/echarts/echarts.min.js?v=5.5.1"),"vditorEchartsScript").then(function(){n.ASTChart||(n.ASTChart=echarts.init(t.devtools.element.lastElementChild));try{n.element.lastElementChild.style.display="block",n.element.firstElementChild.innerHTML="",n.ASTChart.setOption({series:[{data:JSON.parse(t.lute.RenderEChartsJSON(H(t))),initialTreeDepth:-1,label:{align:"left",backgroundColor:"rgba(68, 77, 86, .68)",borderRadius:3,color:"#d1d5da",fontSize:12,lineHeight:12,offset:[9,12],padding:[2,4,2,4],position:"top",verticalAlign:"middle"},lineStyle:{color:"#4285f4",type:"curve",width:1},orient:"vertical",roam:!0,type:"tree"}],toolbox:{bottom:25,emphasis:{iconStyle:{color:"#4285f4"}},feature:{restore:{show:!0},saveAsImage:{show:!0}},right:15,show:!0}}),n.ASTChart.resize()}catch(o){n.element.lastElementChild.style.display="none",n.element.firstElementChild.innerHTML=o}})},e})(),d=f(410),E=function(e,t){t.forEach(function(n){if(e[n]){var o=e[n].children[0];o&&o.classList.contains("vditor-menu--current")&&o.classList.remove("vditor-menu--current")}})},v=function(e,t){t.forEach(function(n){if(e[n]){var o=e[n].children[0];o&&!o.classList.contains("vditor-menu--current")&&o.classList.add("vditor-menu--current")}})},S=function(e,t){t.forEach(function(n){if(e[n]){var o=e[n].children[0];o&&o.classList.contains(h.g.CLASS_MENU_DISABLED)&&o.classList.remove(h.g.CLASS_MENU_DISABLED)}})},w=function(e,t){t.forEach(function(n){if(e[n]){var o=e[n].children[0];o&&!o.classList.contains(h.g.CLASS_MENU_DISABLED)&&o.classList.add(h.g.CLASS_MENU_DISABLED)}})},D=function(e,t){t.forEach(function(n){e[n]&&e[n]&&(e[n].style.display="none")})},A=function(e,t){t.forEach(function(n){e[n]&&e[n]&&(e[n].style.display="block")})},M=function(e,t,n){t.includes("subToolbar")&&(e.toolbar.element.querySelectorAll(".vditor-hint").forEach(function(o){n&&o.isEqualNode(n)||(o.style.display="none")}),e.toolbar.elements.emoji&&(e.toolbar.elements.emoji.lastElementChild.style.display="none")),t.includes("hint")&&(e.hint.element.style.display="none"),e.wysiwyg.popover&&t.includes("popover")&&(e.wysiwyg.popover.style.display="none")},L=function(e,t,n,o){n.addEventListener((0,d.Le)(),function(a){a.preventDefault(),a.stopPropagation(),!n.classList.contains(h.g.CLASS_MENU_DISABLED)&&(e.toolbar.element.querySelectorAll(".vditor-hint--current").forEach(function(s){s.classList.remove("vditor-hint--current")}),t.style.display==="block"?t.style.display="none":(M(e,["subToolbar","hint","popover"],n.parentElement.parentElement),n.classList.contains("vditor-tooltipped")||n.classList.add("vditor-hint--current"),t.style.display="block",e.toolbar.element.getBoundingClientRect().right-n.getBoundingClientRect().right<250?t.classList.add("vditor-panel--left"):t.classList.remove("vditor-panel--left")))})},u=f(106),k=f(771),U=function(e,t,n,o){o&&console.log("".concat(e," - ").concat(n,": ").concat(t))},R=f(135),N=f(775),B=f(428),q=f(325),J=f(483),se=f(999),he=f(472),Ce=f(637),Le=f(11),Se=f(194),ye=f(229),Pe=f(825),qe=function(e,t,n){n===void 0&&(n="sv");var o=document.createElement("div");o.innerHTML=e;var a=!1;o.childElementCount===1&&o.lastElementChild.style.fontFamily.indexOf("monospace")>-1&&(a=!0);var s=o.querySelectorAll("pre");if(o.childElementCount===1&&s.length===1&&s[0].className!=="vditor-wysiwyg"&&s[0].className!=="vditor-sv"&&(a=!0),e.indexOf(`
<p class="p1">`)===0&&(a=!0),o.childElementCount===1&&o.firstElementChild.tagName==="TABLE"&&o.querySelector(".line-number")&&o.querySelector(".line-content")&&(a=!0),a){var m=t||e;return/\n/.test(m)||s.length===1?n==="wysiwyg"?'<div class="vditor-wysiwyg__block" data-block="0" data-type="code-block"><pre><code>'.concat(m.replace(/&/g,"&amp;").replace(/</g,"&lt;"),"<wbr></code></pre></div>"):"\n```\n"+m.replace(/&/g,"&amp;").replace(/</g,"&lt;")+"\n```":n==="wysiwyg"?"<code>".concat(m.replace(/&/g,"&amp;").replace(/</g,"&lt;"),"</code><wbr>"):"`".concat(m,"`")}return!1},Ie=function(e,t){if(e){if(e.parentElement.getAttribute("data-type")==="html-block"){e.setAttribute("data-render","1");return}var n=e.firstElementChild.className.replace("language-","");if(n==="abc")(0,R.Q)(e,t.options.cdn);else if(n==="mermaid")(0,Ce.i)(e,t.options.cdn,t.options.theme);else if(n==="smiles")(0,Pe.J)(e,t.options.cdn,t.options.theme);else if(n==="markmap")(0,Le.K)(e,t.options.cdn);else if(n==="flowchart")(0,q.P)(e,t.options.cdn);else if(n==="echarts")(0,N.p)(e,t.options.cdn,t.options.theme);else if(n==="mindmap")(0,Se.P)(e,t.options.cdn,t.options.theme);else if(n==="plantuml")(0,ye.B)(e,t.options.cdn);else if(n==="graphviz")(0,J.v)(e,t.options.cdn);else if(n==="math")(0,he.H)(e,{cdn:t.options.cdn,math:t.options.preview.math});else{var o=t.options.customRenders.find(function(a){if(a.language===n)return a.render(e,t),!0});o||((0,se.s)(Object.assign({},t.options.preview.hljs),e,t.options.cdn),(0,B.O)(e,t.options.preview.hljs))}e.setAttribute("data-render","1")}},F=f(810),pt=function(e){if(e.currentMode!=="sv"){var t=e[e.currentMode].element,n=e.outline.render(e);n===""&&(n="[ToC]"),t.querySelectorAll('[data-type="toc-block"]').forEach(function(o){o.innerHTML=n,(0,he.H)(o,{cdn:e.options.cdn,math:e.options.preview.math})})}},nn=function(e,t){var n=(0,u.lG)(e.target,"SPAN");if(n&&(0,u.fb)(n,"vditor-toc")){var o=t[t.currentMode].element.querySelector("#"+n.getAttribute("data-target-id"));if(o)if(t.options.height==="auto"){var a=o.offsetTop+t.element.offsetTop;t.options.toolbarConfig.pin||(a+=t.toolbar.element.offsetHeight),window.scrollTo(window.scrollX,a)}else t.element.offsetTop<window.scrollY&&window.scrollTo(window.scrollX,t.element.offsetTop),t[t.currentMode].element.scrollTop=o.offsetTop;return}},rn=function(e,t,n,o){if(e.previousElementSibling&&e.previousElementSibling.classList.contains("vditor-toc")){if(n.key==="Backspace"&&(0,F.im)(e,t[t.currentMode].element,o).start===0)return e.previousElementSibling.remove(),Ae(t),!0;if(xn(t,n,o,e,e.previousElementSibling))return!0}if(e.nextElementSibling&&e.nextElementSibling.classList.contains("vditor-toc")){if(n.key==="Delete"&&(0,F.im)(e,t[t.currentMode].element,o).start>=e.textContent.trimRight().length)return e.nextElementSibling.remove(),Ae(t),!0;if(Jn(t,n,o,e,e.nextElementSibling))return!0}if(n.key==="Backspace"||n.key==="Delete"){var a=(0,u.fb)(o.startContainer,"vditor-toc");if(a)return a.remove(),Ae(t),!0}},Z=function(e,t,n,o){n===void 0&&(n=!1);var a=(0,u.F9)(t.startContainer);if(a&&!n&&a.getAttribute("data-type")!=="code-block"){if(Ti(a.innerHTML)&&a.previousElementSibling||_i(a.innerHTML))return;for(var s=(0,F.im)(a,e.ir.element,t).start,m=!0,C=s-1;C>a.textContent.substr(0,s).lastIndexOf(`
`);C--)if(a.textContent.charAt(C)!==" "&&a.textContent.charAt(C)!=="	"){m=!1;break}s===0&&(m=!1);for(var x=!0,C=s-1;C<a.textContent.length;C++)if(a.textContent.charAt(C)!==" "&&a.textContent.charAt(C)!==`
`){x=!1;break}if(m){typeof e.options.input=="function"&&e.options.input(H(e));return}if(x&&/^#{1,6} $/.test(a.textContent)&&(x=!1),x){var T=(0,u.fb)(t.startContainer,"vditor-ir__marker");if(!T){var P=t.startContainer.previousSibling;P&&P.nodeType!==3&&P.classList.contains("vditor-ir__node--expand")&&P.classList.remove("vditor-ir__node--expand"),typeof e.options.input=="function"&&e.options.input(H(e));return}}}if(e.ir.element.querySelectorAll(".vditor-ir__node--expand").forEach(function(Me){Me.classList.remove("vditor-ir__node--expand")}),a||(a=e.ir.element),!a.querySelector("wbr")){var W=(0,u.fb)(t.startContainer,"vditor-ir__preview");W?W.previousElementSibling.insertAdjacentHTML("beforeend","<wbr>"):t.insertNode(document.createElement("wbr"))}a.querySelectorAll("[style]").forEach(function(Me){Me.removeAttribute("style")}),a.getAttribute("data-type")==="link-ref-defs-block"&&(a=e.ir.element);var te=a.isEqualNode(e.ir.element),ne=(0,u.a1)(a,"data-type","footnotes-block"),Q="";if(te)Q=a.innerHTML;else{var ce=(0,k.S)(t.startContainer,"BLOCKQUOTE"),le=(0,u.O9)(t.startContainer);if(le&&(a=le),ce&&(!le||le&&!ce.contains(le))&&(a=ce),ne&&(a=ne),Q=a.outerHTML,a.tagName==="UL"||a.tagName==="OL"){var ee=a.previousElementSibling,ge=a.nextElementSibling;ee&&(ee.tagName==="UL"||ee.tagName==="OL")&&(Q=ee.outerHTML+Q,ee.remove()),ge&&(ge.tagName==="UL"||ge.tagName==="OL")&&(Q=Q+ge.outerHTML,ge.remove()),Q=Q.replace("<div><wbr><br></div>","<li><p><wbr><br></p></li>")}else a.previousElementSibling&&a.previousElementSibling.textContent.replace(h.g.ZWSP,"")!==""&&o&&o.inputType==="insertParagraph"&&(Q=a.previousElementSibling.outerHTML+Q,a.previousElementSibling.remove());a.innerText.startsWith("```")||(e.ir.element.querySelectorAll("[data-type='link-ref-defs-block']").forEach(function(Me){Me&&!a.isEqualNode(Me)&&(Q+=Me.outerHTML,Me.remove())}),e.ir.element.querySelectorAll("[data-type='footnotes-block']").forEach(function(Me){Me&&!a.isEqualNode(Me)&&(Q+=Me.outerHTML,Me.remove())}))}if(U("SpinVditorIRDOM",Q,"argument",e.options.debugger),Q=e.lute.SpinVditorIRDOM(Q),U("SpinVditorIRDOM",Q,"result",e.options.debugger),te)a.innerHTML=Q;else if(a.outerHTML=Q,ne){var ue=(0,u.a1)(e.ir.element.querySelector("wbr"),"data-type","footnotes-def");if(ue){var Ee=ue.textContent,Be=Ee.substring(1,Ee.indexOf("]:")),Re=e.ir.element.querySelector('sup[data-type="footnotes-ref"][data-footnotes-label="'.concat(Be,'"]'));Re&&Re.setAttribute("aria-label",Ee.substr(Be.length+3).trim().substr(0,24))}}var Ue,bt=e.ir.element.querySelectorAll("[data-type='link-ref-defs-block']");bt.forEach(function(Me,Je){Je===0?Ue=Me:(Ue.insertAdjacentHTML("beforeend",Me.innerHTML),Me.remove())}),bt.length>0&&e.ir.element.insertAdjacentElement("beforeend",bt[0]);var rt,vt=e.ir.element.querySelectorAll("[data-type='footnotes-block']");vt.forEach(function(Me,Je){Je===0?rt=Me:(rt.insertAdjacentHTML("beforeend",Me.innerHTML),Me.remove())}),vt.length>0&&e.ir.element.insertAdjacentElement("beforeend",vt[0]),(0,F.ib)(e.ir.element,t),e.ir.element.querySelectorAll(".vditor-ir__preview[data-render='2']").forEach(function(Me){Ie(Me,e)}),pt(e),Vt(e,{enableAddUndoStack:!0,enableHint:!0,enableInput:!0})},j=function(e,t){if(e==="")return!1;if(e.indexOf("⇧")===-1&&e.indexOf("⌘")===-1&&e.indexOf("⌥")===-1)return!(0,d.yl)(t)&&!t.altKey&&!t.shiftKey&&t.code===e;if(e==="⇧Tab")return!!(!(0,d.yl)(t)&&!t.altKey&&t.shiftKey&&t.code==="Tab");var n=e.split("");if(e.startsWith("⌥")){var o=n.length===3?n[2]:n[1];return!!((n.length===3?(0,d.yl)(t):!(0,d.yl)(t))&&t.altKey&&!t.shiftKey&&t.code===(/^[0-9]$/.test(o)?"Digit":"Key")+o)}e==="⌘Enter"&&(n=["⌘","Enter"]);var a=n.length>2&&n[0]==="⇧",s=a?n[2]:n[1];return a&&((0,d.vU)()||!/Mac/.test(navigator.platform))&&(s==="-"?s="_":s==="="&&(s="+")),!!((0,d.yl)(t)&&t.key.toLowerCase()===s.toLowerCase()&&!t.altKey&&(!a&&!t.shiftKey||a&&t.shiftKey))},z=function(e){var t=e.startContainer;if(t.nodeType===3&&t.nodeValue.length!==e.startOffset)return!1;for(var n=t.nextSibling;n&&n.textContent==="";)n=n.nextSibling;if(n){if(n&&n.nodeType!==3&&n.classList.contains("vditor-ir__node")&&!n.getAttribute("data-block"))return n}else{var o=(0,u.fb)(t,"vditor-ir__marker");if(o&&!o.nextSibling){var a=t.parentElement.parentElement.nextSibling;if(a&&a.nodeType!==3&&a.classList.contains("vditor-ir__node"))return a}return!1}return!1},K=function(e){var t=e.startContainer,n=t.previousSibling;return t.nodeType===3&&e.startOffset===0&&n&&n.nodeType!==3&&n.classList.contains("vditor-ir__node")&&!n.getAttribute("data-block")?n:!1},$=function(e,t){t.ir.element.querySelectorAll(".vditor-ir__node--expand").forEach(function(m){m.classList.remove("vditor-ir__node--expand")});var n=(0,u.JQ)(e.startContainer,"vditor-ir__node"),o=!e.collapsed&&(0,u.JQ)(e.endContainer,"vditor-ir__node");if(!(!e.collapsed&&(!n||n!==o))){n&&(n.classList.add("vditor-ir__node--expand"),n.classList.remove("vditor-ir__node--hidden"),(0,F.Hc)(e));var a=z(e);if(a){a.classList.add("vditor-ir__node--expand"),a.classList.remove("vditor-ir__node--hidden");return}var s=K(e);if(s){s.classList.add("vditor-ir__node--expand"),s.classList.remove("vditor-ir__node--hidden");return}}},me=function(e,t){if(e.ir.composingLock=t.isComposing,t.isComposing)return!1;t.key.indexOf("Arrow")===-1&&t.key!=="Meta"&&t.key!=="Control"&&t.key!=="Alt"&&t.key!=="Shift"&&t.key!=="CapsLock"&&t.key!=="Escape"&&!/^F\d{1,2}$/.test(t.key)&&e.undo.recordFirstPosition(e,t);var n=(0,F.zh)(e),o=n.startContainer;if(!No(t,e,o)||(Po(n,e,t),Zo(n),t.key!=="Enter"&&t.key!=="Tab"&&t.key!=="Backspace"&&t.key.indexOf("Arrow")===-1&&!(0,d.yl)(t)&&t.key!=="Escape"&&t.key!=="Delete"))return!1;var a=(0,u.a1)(o,"data-newline","1");if(!(0,d.yl)(t)&&!t.altKey&&!t.shiftKey&&t.key==="Enter"&&a&&n.startOffset<a.textContent.length){var s=a.previousElementSibling;s&&(n.insertNode(document.createTextNode(s.textContent)),n.collapse(!1));var m=a.nextSibling;m&&(n.insertNode(document.createTextNode(m.textContent)),n.collapse(!0))}var C=(0,u.lG)(o,"P");if(Fo(t,e,C,n)||Bo(n,e,C,t)||zo(e,n,t,C))return!0;var x=(0,u.fb)(o,"vditor-ir__marker--pre");if(x&&x.tagName==="PRE"){var T=x.firstChild;if($o(e,t,x,n)||(T.getAttribute("data-type")==="math-block"||T.getAttribute("data-type")==="html-block")&&xn(e,t,n,T,x.parentElement)||Jn(e,t,n,T,x.parentElement))return!0}var P=(0,u.a1)(o,"data-type","code-block-info");if(P){if(t.key==="Enter"||t.key==="Tab")return n.selectNodeContents(P.nextElementSibling.firstChild),n.collapse(!0),t.preventDefault(),M(e,["hint"]),!0;if(t.key==="Backspace"){var W=(0,F.im)(P,e.ir.element).start;W===1&&n.setStart(o,0),W===2&&(e.hint.recentLanguage="")}if(xn(e,t,n,P,P.parentElement))return M(e,["hint"]),!0}var te=(0,u.lG)(o,"TD")||(0,u.lG)(o,"TH");if(t.key.indexOf("Arrow")>-1&&te){var ne=_l(te);if(ne&&xn(e,t,n,te,ne))return!0;var Q=Ll(te);if(Q&&Jn(e,t,n,te,Q))return!0}if(qo(e,t,n)||Go(e,n,t)||Li(e,n,t))return!0;var ce=(0,k.W)(o);if(ce){if(j("⌘=",t)){var le=ce.querySelector(".vditor-ir__marker--heading");return le&&le.textContent.trim().length>1&&Zn(e,le.textContent.substr(1)),t.preventDefault(),!0}if(j("⌘-",t)){var le=ce.querySelector(".vditor-ir__marker--heading");return le&&le.textContent.trim().length<6&&Zn(e,le.textContent.trim()+"# "),t.preventDefault(),!0}}var ee=(0,u.F9)(o);if(t.key==="Backspace"&&!(0,d.yl)(t)&&!t.shiftKey&&!t.altKey&&n.toString()===""){if(Jo(e,n,t,C))return!0;if(ee&&ee.previousElementSibling&&ee.tagName!=="UL"&&ee.tagName!=="OL"&&(ee.previousElementSibling.getAttribute("data-type")==="code-block"||ee.previousElementSibling.getAttribute("data-type")==="math-block")){var ge=(0,F.im)(ee,e.ir.element,n).start;if(ge===0||ge===1&&ee.innerText.startsWith(h.g.ZWSP))return n.selectNodeContents(ee.previousElementSibling.querySelector(".vditor-ir__marker--pre code")),n.collapse(!1),$(n,e),ee.textContent.trim().replace(h.g.ZWSP,"")===""&&(ee.remove(),Vt(e)),t.preventDefault(),!0}if(ce){var ue=ce.firstElementChild.textContent.length;(0,F.im)(ce,e.ir.element).start===ue&&ue!==0&&(n.setStart(ce.firstElementChild.firstChild,ue-1),n.collapse(!0),(0,F.Hc)(n))}}return(t.key==="ArrowUp"||t.key==="ArrowDown")&&ee&&(ee.querySelectorAll(".vditor-ir__node").forEach(function(Ee){Ee.contains(o)||Ee.classList.add("vditor-ir__node--hidden")}),Xo(t,ee,n))?!0:(Io(n,t.key),ee&&rn(ee,e,t,n)?(t.preventDefault(),!0):!1)},O=f(190),I=function(e,t){e.querySelectorAll("[data-type=footnotes-link]").forEach(function(n){for(var o=n.parentElement,a=o.nextSibling;a&&a.textContent.startsWith("    ");){var s=a;s.childNodes.forEach(function(m){o.append(m.cloneNode(!0))}),a=a.nextSibling,s.remove()}t&&t(o)})},V=function(e,t){var n,o=getSelection().getRangeAt(0).cloneRange(),a=o.startContainer;o.startContainer.nodeType!==3&&o.startContainer.tagName==="DIV"&&(a=o.startContainer.childNodes[o.startOffset-1]);var s=(0,u.a1)(a,"data-block","0");if(s&&t&&(t.inputType==="deleteContentBackward"||t.data===" ")){for(var m=(0,F.im)(s,e.sv.element,o).start,C=!0,x=m-1;x>s.textContent.substr(0,m).lastIndexOf(`
`);x--)if(s.textContent.charAt(x)!==" "&&s.textContent.charAt(x)!=="	"){C=!1;break}if(m===0&&(C=!1),C){Xe(e);return}if(t.inputType==="deleteContentBackward"){var T=(0,u.a1)(a,"data-type","code-block-open-marker")||(0,u.a1)(a,"data-type","code-block-close-marker");if(T){if(T.getAttribute("data-type")==="code-block-close-marker"){var P=Sr(a,"code-block-open-marker");if(P){P.textContent=T.textContent,Xe(e);return}}if(T.getAttribute("data-type")==="code-block-open-marker"){var P=Sr(a,"code-block-close-marker",!1);if(P){P.textContent=T.textContent,Xe(e);return}}}var W=(0,u.a1)(a,"data-type","math-block-open-marker");if(W){var te=W.nextElementSibling.nextElementSibling;te&&te.getAttribute("data-type")==="math-block-close-marker"&&(te.remove(),Xe(e));return}s.querySelectorAll('[data-type="code-block-open-marker"]').forEach(function(ee){ee.textContent.length===1&&ee.remove()}),s.querySelectorAll('[data-type="code-block-close-marker"]').forEach(function(ee){ee.textContent.length===1&&ee.remove()});var ne=(0,u.a1)(a,"data-type","heading-marker");if(ne&&ne.textContent.indexOf("#")===-1){Xe(e);return}}if((t.data===" "||t.inputType==="deleteContentBackward")&&((0,u.a1)(a,"data-type","padding")||(0,u.a1)(a,"data-type","li-marker")||(0,u.a1)(a,"data-type","task-marker")||(0,u.a1)(a,"data-type","blockquote-marker"))){Xe(e);return}}if(s&&s.textContent.trimRight()==="$$"){Xe(e);return}s||(s=e.sv.element),((n=s.firstElementChild)===null||n===void 0?void 0:n.getAttribute("data-type"))==="link-ref-defs-block"&&(s=e.sv.element),(0,u.a1)(a,"data-type","footnotes-link")&&(s=e.sv.element),s.textContent.indexOf(Lute.Caret)===-1&&o.insertNode(document.createTextNode(Lute.Caret)),s.querySelectorAll("[style]").forEach(function(ee){ee.removeAttribute("style")}),s.querySelectorAll("font").forEach(function(ee){ee.outerHTML=ee.innerHTML});var Q=s.textContent,ce=s.isEqualNode(e.sv.element);if(ce)Q=s.textContent;else{s.previousElementSibling&&(Q=s.previousElementSibling.textContent+Q,s.previousElementSibling.remove()),s.previousElementSibling&&Q.indexOf(`---
`)===0&&(Q=s.previousElementSibling.textContent+Q,s.previousElementSibling.remove());var le="";e.sv.element.querySelectorAll("[data-type='link-ref-defs-block']").forEach(function(ee,ge){ee&&!s.isEqualNode(ee.parentElement)&&(le+=ee.parentElement.textContent+`
`,ee.parentElement.remove())}),e.sv.element.querySelectorAll("[data-type='footnotes-link']").forEach(function(ee,ge){ee&&!s.isEqualNode(ee.parentElement)&&(le+=ee.parentElement.textContent+`
`,ee.parentElement.remove())}),Q=le+Q}Q=Ao(Q,e),ce?s.innerHTML=Q:s.outerHTML=Q,e.sv.element.querySelectorAll("[data-type='link-ref-defs-block']").forEach(function(ee){e.sv.element.insertAdjacentElement("beforeend",ee.parentElement)}),I(e.sv.element,function(ee){e.sv.element.insertAdjacentElement("beforeend",ee)}),(0,F.ib)(e.sv.element,o),Ge(e),Xe(e,{enableAddUndoStack:!0,enableHint:!0,enableInput:!0})},Y=function(e,t){var n,o,a,s,m;if(e.sv.composingLock=t.isComposing,t.isComposing||(t.key.indexOf("Arrow")===-1&&t.key!=="Meta"&&t.key!=="Control"&&t.key!=="Alt"&&t.key!=="Shift"&&t.key!=="CapsLock"&&t.key!=="Escape"&&!/^F\d{1,2}$/.test(t.key)&&e.undo.recordFirstPosition(e,t),t.key!=="Enter"&&t.key!=="Tab"&&t.key!=="Backspace"&&t.key.indexOf("Arrow")===-1&&!(0,d.yl)(t)&&t.key!=="Escape"))return!1;var C=(0,F.zh)(e),x=C.startContainer;C.startContainer.nodeType!==3&&C.startContainer.tagName==="DIV"&&(x=C.startContainer.childNodes[C.startOffset-1]);var T=(0,u.a1)(x,"data-type","text"),P=(0,u.a1)(x,"data-type","blockquote-marker");if(!P&&C.startOffset===0&&T&&T.previousElementSibling&&T.previousElementSibling.getAttribute("data-type")==="blockquote-marker"&&(P=T.previousElementSibling),P&&t.key==="Enter"&&!(0,d.yl)(t)&&!t.altKey&&P.nextElementSibling.textContent.trim()===""&&(0,F.im)(P,e.sv.element,C).start===P.textContent.length)return((n=P.previousElementSibling)===null||n===void 0?void 0:n.getAttribute("data-type"))==="padding"&&P.previousElementSibling.setAttribute("data-action","enter-remove"),P.remove(),Xe(e),t.preventDefault(),!0;var W=(0,u.a1)(x,"data-type","li-marker"),te=(0,u.a1)(x,"data-type","task-marker"),ne=W;if(ne||te&&te.nextElementSibling.getAttribute("data-type")!=="task-marker"&&(ne=te),!ne&&C.startOffset===0&&T&&T.previousElementSibling&&(T.previousElementSibling.getAttribute("data-type")==="li-marker"||T.previousElementSibling.getAttribute("data-type")==="task-marker")&&(ne=T.previousElementSibling),ne){var Q=(0,F.im)(ne,e.sv.element,C).start,ce=ne.getAttribute("data-type")==="task-marker",le=ne;if(ce&&(le=ne.previousElementSibling.previousElementSibling.previousElementSibling),Q===ne.textContent.length){if(t.key==="Enter"&&!(0,d.yl)(t)&&!t.altKey&&!t.shiftKey&&ne.nextElementSibling.textContent.trim()==="")return((o=le.previousElementSibling)===null||o===void 0?void 0:o.getAttribute("data-type"))==="padding"?(le.previousElementSibling.remove(),V(e)):(ce&&(le.remove(),ne.previousElementSibling.previousElementSibling.remove(),ne.previousElementSibling.remove()),ne.nextElementSibling.remove(),ne.remove(),Xe(e)),t.preventDefault(),!0;if(t.key==="Tab")return t.shiftKey?le.previousElementSibling.getAttribute("data-type")==="padding"&&le.previousElementSibling.remove():le.insertAdjacentHTML("beforebegin",'<span data-type="padding">'.concat(le.textContent.replace(/\S/g," "),"</span>")),/^\d/.test(le.textContent)&&(le.textContent=le.textContent.replace(/^\d{1,}/,"1"),C.selectNodeContents(ne.firstChild),C.collapse(!1)),V(e),t.preventDefault(),!0}}if(Li(e,C,t))return!0;var ee=(0,u.a1)(x,"data-block","0"),ge=(0,k.S)(x,"SPAN");if(t.key==="Enter"&&!(0,d.yl)(t)&&!t.altKey&&!t.shiftKey&&ee){var ue=!1,Ee=ee.textContent.match(/^\n+/);(0,F.im)(ee,e.sv.element).start<=(Ee?Ee[0].length:0)&&(ue=!0);var Be=`
`;if(ge){if(((a=ge.previousElementSibling)===null||a===void 0?void 0:a.getAttribute("data-action"))==="enter-remove")return ge.previousElementSibling.remove(),Xe(e),t.preventDefault(),!0;Be+=yl(ge)}return C.insertNode(document.createTextNode(Be)),C.collapse(!1),ee&&ee.textContent.trim()!==""&&!ue?V(e):Xe(e),t.preventDefault(),!0}if(t.key==="Backspace"&&!(0,d.yl)(t)&&!t.altKey&&!t.shiftKey){if(ge&&((s=ge.previousElementSibling)===null||s===void 0?void 0:s.getAttribute("data-type"))==="newline"&&(0,F.im)(ge,e.sv.element,C).start===1&&ge.getAttribute("data-type").indexOf("code-block-")===-1)return C.setStart(ge,0),C.extractContents(),ge.textContent.trim()!==""?V(e):Xe(e),t.preventDefault(),!0;if(ee&&(0,F.im)(ee,e.sv.element,C).start===0&&ee.previousElementSibling){C.extractContents();var Re=ee.previousElementSibling.lastElementChild;return Re.getAttribute("data-type")==="newline"&&(Re.remove(),Re=ee.previousElementSibling.lastElementChild),Re.getAttribute("data-type")!=="newline"&&(Re.insertAdjacentHTML("afterend",ee.innerHTML),ee.remove()),ee.textContent.trim()!==""&&!(!((m=ee.previousElementSibling)===null||m===void 0)&&m.querySelector('[data-type="code-block-open-marker"]'))?V(e):(Re.getAttribute("data-type")!=="newline"&&(C.selectNodeContents(Re.lastChild),C.collapse(!1)),Xe(e)),t.preventDefault(),!0}}return!1},G=f(538),X=function(e){e.options.theme==="dark"?e.element.classList.add("vditor--dark"):e.element.classList.remove("vditor--dark")},oe=function(e){e.element.innerHTML="",e.element.classList.add("vditor"),e.options.rtl&&e.element.setAttribute("dir","rtl"),X(e),(0,G.Z)(e.options.preview.theme.current,e.options.preview.theme.path),typeof e.options.height=="number"?e.element.style.height=e.options.height+"px":e.element.style.height=e.options.height,typeof e.options.minHeight=="number"&&(e.element.style.minHeight=e.options.minHeight+"px"),typeof e.options.width=="number"?e.element.style.width=e.options.width+"px":e.element.style.width=e.options.width,e.element.appendChild(e.toolbar.element);var t=document.createElement("div");if(t.className="vditor-content",e.options.outline.position==="left"&&t.appendChild(e.outline.element),t.appendChild(e.wysiwyg.element.parentElement),t.appendChild(e.sv.element),t.appendChild(e.ir.element.parentElement),t.appendChild(e.preview.element),e.toolbar.elements.devtools&&t.appendChild(e.devtools.element),e.options.outline.position==="right"&&(e.outline.element.classList.add("vditor-outline--right"),t.appendChild(e.outline.element)),e.upload&&t.appendChild(e.upload.element),e.options.resize.enable&&t.appendChild(e.resize.element),t.appendChild(e.hint.element),t.appendChild(e.tip.element),e.element.appendChild(t),t.addEventListener("click",function(){M(e,["subToolbar"])}),e.toolbar.elements.export&&e.element.insertAdjacentHTML("beforeend",'<iframe id="vditorExportIframe" style="width: 100%;height: 0;border: 0"></iframe>'),hn(e,e.options.mode,de(e)),document.execCommand("DefaultParagraphSeparator",!1,"p"),navigator.userAgent.indexOf("iPhone")>-1&&typeof window.visualViewport<"u"){var n=!1,o=function(a){n||(n=!0,requestAnimationFrame(function(){n=!1;var s=e.toolbar.element;s.style.transform="none",s.getBoundingClientRect().top<0&&(s.style.transform="translate(0, ".concat(-s.getBoundingClientRect().top,"px)"))}))};window.visualViewport.addEventListener("scroll",o),window.visualViewport.addEventListener("resize",o)}},ie=function(e){var t=window.innerWidth<=h.g.MOBILE_WIDTH?10:35;if(e.wysiwyg.element.parentElement.style.display!=="none"){var n=(e.wysiwyg.element.parentElement.clientWidth-e.options.preview.maxWidth)/2;e.wysiwyg.element.style.padding="10px ".concat(Math.max(t,n),"px")}if(e.ir.element.parentElement.style.display!=="none"){var n=(e.ir.element.parentElement.clientWidth-e.options.preview.maxWidth)/2;e.ir.element.style.padding="10px ".concat(Math.max(t,n),"px")}e.preview.element.style.display!=="block"?e.toolbar.element.style.paddingLeft=Math.max(5,parseInt(e[e.currentMode].element.style.paddingLeft||"0",10)+(e.options.outline.position==="left"?e.outline.element.offsetWidth:0))+"px":e.toolbar.element.style.paddingLeft=5+(e.options.outline.position==="left"?e.outline.element.offsetWidth:0)+"px"},ae=function(e){if(e.options.typewriterMode){var t=window.innerHeight;typeof e.options.height=="number"?(t=e.options.height,typeof e.options.minHeight=="number"&&(t=Math.max(t,e.options.minHeight)),t=Math.min(window.innerHeight,t)):t=e.element.clientHeight,e.element.classList.contains("vditor--fullscreen")&&(t=window.innerHeight),e[e.currentMode].element.style.setProperty("--editor-bottom",(t-e.toolbar.element.offsetHeight)/2+"px")}},re;function we(){window.removeEventListener("resize",re)}var de=function(e){ae(e),we(),window.addEventListener("resize",re=function(){ie(e),ae(e)});var t=(0,d.pK)()&&localStorage.getItem(e.options.cache.id);return(!e.options.cache.enable||!t)&&(e.options.value?t=e.options.value:e.originalInnerHTML?t=e.lute.HTML2Md(e.originalInnerHTML):e.options.cache.enable||(t="")),t||""},be=function(e){clearTimeout(e[e.currentMode].hlToolbarTimeoutId),e[e.currentMode].hlToolbarTimeoutId=window.setTimeout(function(){if(e[e.currentMode].element.getAttribute("contenteditable")!=="false"&&(0,F.Gb)(e[e.currentMode].element)){E(e.toolbar.elements,h.g.EDIT_TOOLBARS),S(e.toolbar.elements,h.g.EDIT_TOOLBARS);var t=(0,F.zh)(e),n=t.startContainer;t.startContainer.nodeType===3&&(n=t.startContainer.parentElement),n.classList.contains("vditor-reset")&&(n=n.childNodes[t.startOffset]);var o=e.currentMode==="sv"?(0,u.a1)(n,"data-type","heading"):(0,k.W)(n);o&&v(e.toolbar.elements,["headings"]);var a=e.currentMode==="sv"?(0,u.a1)(n,"data-type","blockquote"):(0,u.lG)(n,"BLOCKQUOTE");a&&v(e.toolbar.elements,["quote"]);var s=(0,u.a1)(n,"data-type","strong");s&&v(e.toolbar.elements,["bold"]);var m=(0,u.a1)(n,"data-type","em");m&&v(e.toolbar.elements,["italic"]);var C=(0,u.a1)(n,"data-type","s");C&&v(e.toolbar.elements,["strike"]);var x=(0,u.a1)(n,"data-type","a");x&&v(e.toolbar.elements,["link"]);var T=(0,u.lG)(n,"LI");T?(T.classList.contains("vditor-task")?v(e.toolbar.elements,["check"]):T.parentElement.tagName==="OL"?v(e.toolbar.elements,["ordered-list"]):T.parentElement.tagName==="UL"&&v(e.toolbar.elements,["list"]),S(e.toolbar.elements,["outdent","indent"])):w(e.toolbar.elements,["outdent","indent"]);var P=(0,u.a1)(n,"data-type","code-block");P&&(w(e.toolbar.elements,["headings","bold","italic","strike","line","quote","list","ordered-list","check","code","inline-code","upload","link","table","record"]),v(e.toolbar.elements,["code"]));var W=(0,u.a1)(n,"data-type","code");W&&(w(e.toolbar.elements,["headings","bold","italic","strike","line","quote","list","ordered-list","check","code","upload","link","table","record"]),v(e.toolbar.elements,["inline-code"]));var te=(0,u.a1)(n,"data-type","table");te&&w(e.toolbar.elements,["headings","list","ordered-list","check","line","quote","code","table"])}},200)},fe=function(e,t){t===void 0&&(t={enableAddUndoStack:!0,enableHint:!1,enableInput:!0}),t.enableHint&&e.hint.render(e),clearTimeout(e.wysiwyg.afterRenderTimeoutId),e.wysiwyg.afterRenderTimeoutId=window.setTimeout(function(){if(!e.wysiwyg.composingLock){var n=H(e);typeof e.options.input=="function"&&t.enableInput&&e.options.input(n),e.options.counter.enable&&e.counter.render(e,n),e.options.cache.enable&&(0,d.pK)()&&(localStorage.setItem(e.options.cache.id,n),e.options.cache.after&&e.options.cache.after(n)),e.devtools&&e.devtools.renderEchart(e),t.enableAddUndoStack&&e.undo.addToUndoStack(e)}},e.options.undoDelay)},xe=function(e){for(var t=e.previousSibling;t;){if(t.nodeType!==3&&t.tagName==="A"&&!t.previousSibling&&t.innerHTML.replace(h.g.ZWSP,"")===""&&t.nextSibling)return t;t=t.previousSibling}return!1},je=function(e){for(var t=e.startContainer.nextSibling;t&&t.textContent==="";)t=t.nextSibling;return!!(t&&t.nodeType!==3&&(t.tagName==="CODE"||t.getAttribute("data-type")==="math-inline"||t.getAttribute("data-type")==="html-entity"||t.getAttribute("data-type")==="html-inline"))},Oe=function(e){for(var t="",n=e.nextSibling;n;)n.nodeType===3?t+=n.textContent:t+=n.outerHTML,n=n.nextSibling;return t},tt=function(e){for(var t="",n=e.previousSibling;n;)n.nodeType===3?t=n.textContent+t:t=n.outerHTML+t,n=n.previousSibling;return t},at=function(e){for(var t=e;t&&!t.nextSibling;)t=t.parentElement;return t.nextSibling},Tt=function(e){var t=tt(e.startContainer),n=Oe(e.startContainer),o=e.startContainer.textContent,a=e.startOffset,s="",m="";return(o.substr(0,a)!==""&&o.substr(0,a)!==h.g.ZWSP||t)&&(s="".concat(t).concat(o.substr(0,a))),(o.substr(a)!==""&&o.substr(a)!==h.g.ZWSP||n)&&(m="".concat(o.substr(a)).concat(n)),{afterHTML:m,beforeHTML:s}},yt=function(e,t){Array.from(e.wysiwyg.element.childNodes).find(function(n){if(n.nodeType===3){var o=document.createElement("p");o.setAttribute("data-block","0"),o.textContent=n.textContent;var a=t.startContainer.nodeType===3?t.startOffset:n.textContent.length;return n.parentNode.insertBefore(o,n),n.remove(),t.setStart(o.firstChild,Math.min(o.firstChild.textContent.length,a)),t.collapse(!0),(0,F.Hc)(t),!0}else if(!n.getAttribute("data-block"))return n.tagName==="P"?n.remove():(n.tagName==="DIV"?(t.insertNode(document.createElement("wbr")),n.outerHTML='<p data-block="0">'.concat(n.innerHTML,"</p>")):n.tagName==="BR"?n.outerHTML='<p data-block="0">'.concat(n.outerHTML,"<wbr></p>"):(t.insertNode(document.createElement("wbr")),n.outerHTML='<p data-block="0">'.concat(n.outerHTML,"</p>")),(0,F.ib)(e.wysiwyg.element,t),t=getSelection().getRangeAt(0)),!0})},Nt=function(e,t){var n=(0,F.zh)(e),o=(0,u.F9)(n.startContainer);o||(o=n.startContainer.childNodes[n.startOffset]),!o&&e.wysiwyg.element.children.length===0&&(o=e.wysiwyg.element),o&&!o.classList.contains("vditor-wysiwyg__block")&&(n.insertNode(document.createElement("wbr")),o.innerHTML.trim()==="<wbr>"&&(o.innerHTML="<wbr><br>"),o.tagName==="BLOCKQUOTE"||o.classList.contains("vditor-reset")?o.innerHTML="<".concat(t,' data-block="0">').concat(o.innerHTML.trim(),"</").concat(t,">"):o.outerHTML="<".concat(t,' data-block="0">').concat(o.innerHTML.trim(),"</").concat(t,">"),(0,F.ib)(e.wysiwyg.element,n),pt(e))},Ln=function(e){var t=getSelection().getRangeAt(0),n=(0,u.F9)(t.startContainer);n||(n=t.startContainer.childNodes[t.startOffset]),n&&(t.insertNode(document.createElement("wbr")),n.outerHTML='<p data-block="0">'.concat(n.innerHTML,"</p>"),(0,F.ib)(e.wysiwyg.element,t)),e.wysiwyg.popover.style.display="none"},Ze=function(e,t,n){n===void 0&&(n=!0);var o=e.previousElementSibling,a=o.ownerDocument.createRange();o.tagName==="CODE"?(o.style.display="inline-block",n?a.setStart(o.firstChild,1):a.selectNodeContents(o)):(o.style.display="block",o.firstChild.firstChild||o.firstChild.appendChild(document.createTextNode("")),a.selectNodeContents(o.firstChild)),n?a.collapse(!0):a.collapse(!1),(0,F.Hc)(a),!e.firstElementChild.classList.contains("language-mindmap")&&Ge(t)},_t=function(e,t){if(e.wysiwyg.composingLock=t.isComposing,t.isComposing)return!1;t.key.indexOf("Arrow")===-1&&t.key!=="Meta"&&t.key!=="Control"&&t.key!=="Alt"&&t.key!=="Shift"&&t.key!=="CapsLock"&&t.key!=="Escape"&&!/^F\d{1,2}$/.test(t.key)&&e.undo.recordFirstPosition(e,t);var n=(0,F.zh)(e),o=n.startContainer;if(!No(t,e,o)||(Po(n,e,t),Zo(n),t.key!=="Enter"&&t.key!=="Tab"&&t.key!=="Backspace"&&t.key.indexOf("Arrow")===-1&&!(0,d.yl)(t)&&t.key!=="Escape"&&t.key!=="Delete"))return!1;var a=(0,u.F9)(o),s=(0,u.lG)(o,"P");if(Fo(t,e,s,n)||Bo(n,e,s,t)||qo(e,t,n))return!0;var m=(0,u.fb)(o,"vditor-wysiwyg__block");if(m){if(t.key==="Escape"&&m.children.length===2)return e.wysiwyg.popover.style.display="none",m.firstElementChild.style.display="none",e.wysiwyg.element.blur(),t.preventDefault(),!0;if(!(0,d.yl)(t)&&!t.shiftKey&&t.altKey&&t.key==="Enter"&&m.getAttribute("data-type")==="code-block"){var C=e.wysiwyg.popover.querySelector(".vditor-input");return C.focus(),C.select(),t.preventDefault(),!0}if(m.getAttribute("data-block")==="0"&&($o(e,t,m.firstElementChild,n)||Jn(e,t,n,m.firstElementChild,m)||m.getAttribute("data-type")!=="yaml-front-matter"&&xn(e,t,n,m.firstElementChild,m)))return!0}if(zo(e,n,t,s))return!0;var x=(0,u.E2)(o,"BLOCKQUOTE");if(x&&!t.shiftKey&&t.altKey&&t.key==="Enter"){(0,d.yl)(t)?n.setStartBefore(x):n.setStartAfter(x),(0,F.Hc)(n);var T=document.createElement("p");return T.setAttribute("data-block","0"),T.innerHTML=`
`,n.insertNode(T),n.collapse(!0),(0,F.Hc)(n),fe(e),Ge(e),t.preventDefault(),!0}var P=(0,k.W)(o);if(P){if(P.tagName==="H6"&&o.textContent.length===n.startOffset&&!(0,d.yl)(t)&&!t.shiftKey&&!t.altKey&&t.key==="Enter"){var W=document.createElement("p");return W.textContent=`
`,W.setAttribute("data-block","0"),o.parentElement.insertAdjacentElement("afterend",W),n.setStart(W,0),(0,F.Hc)(n),fe(e),Ge(e),t.preventDefault(),!0}if(j("⌘=",t)){var te=parseInt(P.tagName.substr(1),10)-1;return te>0&&(Nt(e,"h".concat(te)),fe(e)),t.preventDefault(),!0}if(j("⌘-",t)){var te=parseInt(P.tagName.substr(1),10)+1;return te<7&&(Nt(e,"h".concat(te)),fe(e)),t.preventDefault(),!0}t.key==="Backspace"&&!(0,d.yl)(t)&&!t.shiftKey&&!t.altKey&&P.textContent.length===1&&Ln(e)}if(Go(e,n,t))return!0;if(t.altKey&&t.key==="Enter"&&!(0,d.yl)(t)&&!t.shiftKey){var ne=(0,u.lG)(o,"A"),Q=(0,u.a1)(o,"data-type","link-ref"),ce=(0,u.a1)(o,"data-type","footnotes-ref");if(ne||Q||ce||P&&P.tagName.length===2){var le=e.wysiwyg.popover.querySelector("input");le.focus(),le.select()}}if(nt(e,t))return!0;if(j("⇧⌘U",t)){var ee=e.wysiwyg.popover.querySelector('[data-type="up"]');if(ee)return ee.click(),t.preventDefault(),!0}if(j("⇧⌘D",t)){var ee=e.wysiwyg.popover.querySelector('[data-type="down"]');if(ee)return ee.click(),t.preventDefault(),!0}if(Li(e,n,t))return!0;if(!(0,d.yl)(t)&&t.shiftKey&&!t.altKey&&t.key==="Enter"&&o.parentElement.tagName!=="LI"&&o.parentElement.tagName!=="P")return["STRONG","STRIKE","S","I","EM","B"].includes(o.parentElement.tagName)?n.insertNode(document.createTextNode(`
`+h.g.ZWSP)):n.insertNode(document.createTextNode(`
`)),n.collapse(!1),(0,F.Hc)(n),fe(e),Ge(e),t.preventDefault(),!0;if(t.key==="Backspace"&&!(0,d.yl)(t)&&!t.shiftKey&&!t.altKey&&n.toString()===""){if(Jo(e,n,t,s))return!0;if(a){if(a.previousElementSibling&&a.previousElementSibling.classList.contains("vditor-wysiwyg__block")&&a.previousElementSibling.getAttribute("data-block")==="0"&&a.tagName!=="UL"&&a.tagName!=="OL"){var ge=(0,F.im)(a,e.wysiwyg.element,n).start;if(ge===0&&n.startOffset===0||ge===1&&a.innerText.startsWith(h.g.ZWSP))return Ze(a.previousElementSibling.lastElementChild,e,!1),a.innerHTML.trim().replace(h.g.ZWSP,"")===""&&(a.remove(),fe(e)),t.preventDefault(),!0}var ue=n.startOffset;if(n.toString()===""&&o.nodeType===3&&o.textContent.charAt(ue-2)===`
`&&o.textContent.charAt(ue-1)!==h.g.ZWSP&&["STRONG","STRIKE","S","I","EM","B"].includes(o.parentElement.tagName))return o.textContent=o.textContent.substring(0,ue-1)+h.g.ZWSP,n.setStart(o,ue),n.collapse(!0),fe(e),t.preventDefault(),!0;o.textContent===h.g.ZWSP&&n.startOffset===1&&!o.previousSibling&&je(n)&&(o.textContent=""),a.querySelectorAll("span.vditor-wysiwyg__block[data-type='math-inline']").forEach(function(Be){Be.firstElementChild.style.display="inline",Be.lastElementChild.style.display="none"}),a.querySelectorAll("span.vditor-wysiwyg__block[data-type='html-entity']").forEach(function(Be){Be.firstElementChild.style.display="inline",Be.lastElementChild.style.display="none"})}}if((0,d.vU)()&&n.startOffset===1&&o.textContent.indexOf(h.g.ZWSP)>-1&&o.previousSibling&&o.previousSibling.nodeType!==3&&o.previousSibling.tagName==="CODE"&&(t.key==="Backspace"||t.key==="ArrowLeft"))return n.selectNodeContents(o.previousSibling),n.collapse(!1),t.preventDefault(),!0;if(Xo(t,a,n))return t.preventDefault(),!0;if(Io(n,t.key),t.key==="ArrowDown"){var Ee=o.nextSibling;Ee&&Ee.nodeType!==3&&Ee.getAttribute("data-type")==="math-inline"&&n.setStartAfter(Ee)}return a&&rn(a,e,t,n)?(t.preventDefault(),!0):!1},nt=function(e,t){if(j("⇧⌘X",t)){var n=e.wysiwyg.popover.querySelector('[data-type="remove"]');return n&&n.click(),t.preventDefault(),!0}},Pt=function(e){clearTimeout(e.wysiwyg.hlToolbarTimeoutId),e.wysiwyg.hlToolbarTimeoutId=window.setTimeout(function(){if(e.wysiwyg.element.getAttribute("contenteditable")!=="false"&&(0,F.Gb)(e.wysiwyg.element)){E(e.toolbar.elements,h.g.EDIT_TOOLBARS),S(e.toolbar.elements,h.g.EDIT_TOOLBARS);var t=getSelection().getRangeAt(0),n=t.startContainer;t.startContainer.nodeType===3?n=t.startContainer.parentElement:n=n.childNodes[t.startOffset>=n.childNodes.length?n.childNodes.length-1:t.startOffset];var o=(0,u.a1)(n,"data-type","footnotes-block");if(o){e.wysiwyg.popover.innerHTML="",Mt(o,e),Et(e,"footnotes-block"),Lt(e,o);return}var a=(0,u.lG)(n,"LI");a?(a.classList.contains("vditor-task")?v(e.toolbar.elements,["check"]):a.parentElement.tagName==="OL"?v(e.toolbar.elements,["ordered-list"]):a.parentElement.tagName==="UL"&&v(e.toolbar.elements,["list"]),S(e.toolbar.elements,["outdent","indent"])):w(e.toolbar.elements,["outdent","indent"]),(0,u.lG)(n,"BLOCKQUOTE")&&v(e.toolbar.elements,["quote"]),((0,u.lG)(n,"B")||(0,u.lG)(n,"STRONG"))&&v(e.toolbar.elements,["bold"]),((0,u.lG)(n,"I")||(0,u.lG)(n,"EM"))&&v(e.toolbar.elements,["italic"]),((0,u.lG)(n,"STRIKE")||(0,u.lG)(n,"S"))&&v(e.toolbar.elements,["strike"]),e.wysiwyg.element.querySelectorAll(".vditor-comment--focus").forEach(function(pe){pe.classList.remove("vditor-comment--focus")});var s=(0,u.fb)(n,"vditor-comment");if(s){var m=s.getAttribute("data-cmtids").split(" ");if(m.length>1&&s.nextSibling.isSameNode(s.nextElementSibling)){var C=s.nextElementSibling.getAttribute("data-cmtids").split(" ");m.find(function(pe){if(C.includes(pe))return m=[pe],!0})}e.wysiwyg.element.querySelectorAll(".vditor-comment").forEach(function(pe){pe.getAttribute("data-cmtids").indexOf(m[0])>-1&&pe.classList.add("vditor-comment--focus")})}var x=(0,u.lG)(n,"A");x&&v(e.toolbar.elements,["link"]);var T=(0,u.lG)(n,"TABLE"),P=(0,k.W)(n);(0,u.lG)(n,"CODE")?(0,u.lG)(n,"PRE")?(w(e.toolbar.elements,["headings","bold","italic","strike","line","quote","list","ordered-list","check","code","inline-code","upload","link","table","record"]),v(e.toolbar.elements,["code"])):(w(e.toolbar.elements,["headings","bold","italic","strike","line","quote","list","ordered-list","check","code","upload","link","table","record"]),v(e.toolbar.elements,["inline-code"])):P?(w(e.toolbar.elements,["bold"]),v(e.toolbar.elements,["headings"])):T&&w(e.toolbar.elements,["table"]);var W=(0,u.fb)(n,"vditor-toc");if(W){e.wysiwyg.popover.innerHTML="",Mt(W,e),Et(e,"vditor-toc"),Lt(e,W);return}var te=(0,k.S)(n,"BLOCKQUOTE");if(te&&(e.wysiwyg.popover.innerHTML="",Mn(t,te,e),An(t,te,e),Mt(te,e),Et(e,"blockquote"),Lt(e,te)),a&&(e.wysiwyg.popover.innerHTML="",Mn(t,a,e),An(t,a,e),Mt(a,e),Et(e,"li"),Lt(e,a)),T){e.options.lang,e.options,e.wysiwyg.popover.innerHTML="";var ne=function(){var pe=T.rows.length,ke=T.rows[0].cells.length,an=parseInt(Je.value,10)||pe,sn=parseInt(St.value,10)||ke;if(!(an===pe&&ke===sn)){if(ke!==sn)for(var Yn=sn-ke,Rt=0;Rt<T.rows.length;Rt++)if(Yn>0)for(var sa=0;sa<Yn;sa++)Rt===0?T.rows[Rt].lastElementChild.insertAdjacentHTML("afterend","<th> </th>"):T.rows[Rt].lastElementChild.insertAdjacentHTML("afterend","<td> </td>");else for(var xi=ke-1;xi>=sn;xi--)T.rows[Rt].cells[xi].remove();if(pe!==an){var la=an-pe;if(la>0){for(var Di="<tr>",Hn=0;Hn<sn;Hn++)Di+="<td> </td>";for(var ca=0;ca<la;ca++)T.querySelector("tbody")?T.querySelector("tbody").insertAdjacentHTML("beforeend",Di):T.querySelector("thead").insertAdjacentHTML("afterend",Di+"</tr>")}else for(var Hn=pe-1;Hn>=an;Hn--)T.rows[Hn].remove(),T.rows.length===1&&T.querySelector("tbody").remove()}typeof e.options.input=="function"&&e.options.input(H(e))}},Q=function(pe){_r(T,pe),pe==="right"?(ge.classList.remove("vditor-icon--current"),ue.classList.remove("vditor-icon--current"),Ee.classList.add("vditor-icon--current")):pe==="center"?(ge.classList.remove("vditor-icon--current"),Ee.classList.remove("vditor-icon--current"),ue.classList.add("vditor-icon--current")):(ue.classList.remove("vditor-icon--current"),Ee.classList.remove("vditor-icon--current"),ge.classList.add("vditor-icon--current")),(0,F.Hc)(t),fe(e)},ce=(0,u.lG)(n,"TD"),le=(0,u.lG)(n,"TH"),ee="left";ce?ee=ce.getAttribute("align")||"left":le&&(ee=le.getAttribute("align")||"center");var ge=document.createElement("button");ge.setAttribute("type","button"),ge.setAttribute("aria-label",window.VditorI18n.alignLeft+"<"+(0,d.ns)("⇧⌘L")+">"),ge.setAttribute("data-type","left"),ge.innerHTML='<svg><use xlink:href="#vditor-icon-align-left"></use></svg>',ge.className="vditor-icon vditor-tooltipped vditor-tooltipped__n"+(ee==="left"?" vditor-icon--current":""),ge.onclick=function(){Q("left")};var ue=document.createElement("button");ue.setAttribute("type","button"),ue.setAttribute("aria-label",window.VditorI18n.alignCenter+"<"+(0,d.ns)("⇧⌘C")+">"),ue.setAttribute("data-type","center"),ue.innerHTML='<svg><use xlink:href="#vditor-icon-align-center"></use></svg>',ue.className="vditor-icon vditor-tooltipped vditor-tooltipped__n"+(ee==="center"?" vditor-icon--current":""),ue.onclick=function(){Q("center")};var Ee=document.createElement("button");Ee.setAttribute("type","button"),Ee.setAttribute("aria-label",window.VditorI18n.alignRight+"<"+(0,d.ns)("⇧⌘R")+">"),Ee.setAttribute("data-type","right"),Ee.innerHTML='<svg><use xlink:href="#vditor-icon-align-right"></use></svg>',Ee.className="vditor-icon vditor-tooltipped vditor-tooltipped__n"+(ee==="right"?" vditor-icon--current":""),Ee.onclick=function(){Q("right")};var Be=document.createElement("button");Be.setAttribute("type","button"),Be.setAttribute("aria-label",window.VditorI18n.insertRowBelow+"<"+(0,d.ns)("⌘=")+">"),Be.setAttribute("data-type","insertRow"),Be.innerHTML='<svg><use xlink:href="#vditor-icon-insert-row"></use></svg>',Be.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",Be.onclick=function(){var pe=getSelection().getRangeAt(0).startContainer,ke=(0,u.lG)(pe,"TD")||(0,u.lG)(pe,"TH");ke&&Uo(e,t,ke)};var Re=document.createElement("button");Re.setAttribute("type","button"),Re.setAttribute("aria-label",window.VditorI18n.insertRowAbove+"<"+(0,d.ns)("⇧⌘F")+">"),Re.setAttribute("data-type","insertRow"),Re.innerHTML='<svg><use xlink:href="#vditor-icon-insert-rowb"></use></svg>',Re.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",Re.onclick=function(){var pe=getSelection().getRangeAt(0).startContainer,ke=(0,u.lG)(pe,"TD")||(0,u.lG)(pe,"TH");ke&&Vo(e,t,ke)};var Ue=document.createElement("button");Ue.setAttribute("type","button"),Ue.setAttribute("aria-label",window.VditorI18n.insertColumnRight+"<"+(0,d.ns)("⇧⌘=")+">"),Ue.setAttribute("data-type","insertColumn"),Ue.innerHTML='<svg><use xlink:href="#vditor-icon-insert-column"></use></svg>',Ue.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",Ue.onclick=function(){var pe=getSelection().getRangeAt(0).startContainer,ke=(0,u.lG)(pe,"TD")||(0,u.lG)(pe,"TH");ke&&Lr(e,T,ke)};var bt=document.createElement("button");bt.setAttribute("type","button"),bt.setAttribute("aria-label",window.VditorI18n.insertColumnLeft+"<"+(0,d.ns)("⇧⌘G")+">"),bt.setAttribute("data-type","insertColumn"),bt.innerHTML='<svg><use xlink:href="#vditor-icon-insert-columnb"></use></svg>',bt.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",bt.onclick=function(){var pe=getSelection().getRangeAt(0).startContainer,ke=(0,u.lG)(pe,"TD")||(0,u.lG)(pe,"TH");ke&&Lr(e,T,ke,"beforebegin")};var rt=document.createElement("button");rt.setAttribute("type","button"),rt.setAttribute("aria-label",window.VditorI18n["delete-row"]+"<"+(0,d.ns)("⌘-")+">"),rt.setAttribute("data-type","deleteRow"),rt.innerHTML='<svg><use xlink:href="#vditor-icon-delete-row"></use></svg>',rt.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",rt.onclick=function(){var pe=getSelection().getRangeAt(0).startContainer,ke=(0,u.lG)(pe,"TD")||(0,u.lG)(pe,"TH");ke&&Wo(e,t,ke)};var vt=document.createElement("button");vt.setAttribute("type","button"),vt.setAttribute("aria-label",window.VditorI18n["delete-column"]+"<"+(0,d.ns)("⇧⌘-")+">"),vt.setAttribute("data-type","deleteColumn"),vt.innerHTML='<svg><use xlink:href="#vditor-icon-delete-column"></use></svg>',vt.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",vt.onclick=function(){var pe=getSelection().getRangeAt(0).startContainer,ke=(0,u.lG)(pe,"TD")||(0,u.lG)(pe,"TH");ke&&Ko(e,t,T,ke)};var Me=document.createElement("span");Me.setAttribute("aria-label",window.VditorI18n.row),Me.className="vditor-tooltipped vditor-tooltipped__n";var Je=document.createElement("input");Me.appendChild(Je),Je.type="number",Je.min="1",Je.className="vditor-input",Je.style.width="42px",Je.style.textAlign="center",Je.setAttribute("placeholder",window.VditorI18n.row),Je.value=T.rows.length.toString(),Je.oninput=function(){ne()},Je.onkeydown=function(pe){if(!pe.isComposing){if(pe.key==="Tab"){St.focus(),St.select(),pe.preventDefault();return}nt(e,pe)||It(pe,t)}};var kr=document.createElement("span");kr.setAttribute("aria-label",window.VditorI18n.column),kr.className="vditor-tooltipped vditor-tooltipped__n";var St=document.createElement("input");kr.appendChild(St),St.type="number",St.min="1",St.className="vditor-input",St.style.width="42px",St.style.textAlign="center",St.setAttribute("placeholder",window.VditorI18n.column),St.value=T.rows[0].cells.length.toString(),St.oninput=function(){ne()},St.onkeydown=function(pe){if(!pe.isComposing){if(pe.key==="Tab"){Je.focus(),Je.select(),pe.preventDefault();return}nt(e,pe)||It(pe,t)}},Mn(t,T,e),An(t,T,e),Mt(T,e),e.wysiwyg.popover.insertAdjacentElement("beforeend",ge),e.wysiwyg.popover.insertAdjacentElement("beforeend",ue),e.wysiwyg.popover.insertAdjacentElement("beforeend",Ee),e.wysiwyg.popover.insertAdjacentElement("beforeend",Re),e.wysiwyg.popover.insertAdjacentElement("beforeend",Be),e.wysiwyg.popover.insertAdjacentElement("beforeend",bt),e.wysiwyg.popover.insertAdjacentElement("beforeend",Ue),e.wysiwyg.popover.insertAdjacentElement("beforeend",rt),e.wysiwyg.popover.insertAdjacentElement("beforeend",vt),e.wysiwyg.popover.insertAdjacentElement("beforeend",Me),e.wysiwyg.popover.insertAdjacentHTML("beforeend"," x "),e.wysiwyg.popover.insertAdjacentElement("beforeend",kr),Et(e,"table"),Lt(e,T)}var ki=(0,u.a1)(n,"data-type","link-ref");ki&&_o(e,ki,t);var Dn=(0,u.a1)(n,"data-type","footnotes-ref");if(Dn){e.options.lang,e.options,e.wysiwyg.popover.innerHTML="";var Me=document.createElement("span");Me.setAttribute("aria-label",window.VditorI18n.footnoteRef+"<"+(0,d.ns)("⌥Enter")+">"),Me.className="vditor-tooltipped vditor-tooltipped__n";var Wt=document.createElement("input");Me.appendChild(Wt),Wt.className="vditor-input",Wt.setAttribute("placeholder",window.VditorI18n.footnoteRef+"<"+(0,d.ns)("⌥Enter")+">"),Wt.style.width="120px",Wt.value=Dn.getAttribute("data-footnotes-label"),Wt.oninput=function(){Wt.value.trim()!==""&&Dn.setAttribute("data-footnotes-label",Wt.value),typeof e.options.input=="function"&&e.options.input(H(e))},Wt.onkeydown=function(ke){ke.isComposing||nt(e,ke)||It(ke,t)},Mt(Dn,e),e.wysiwyg.popover.insertAdjacentElement("beforeend",Me),Et(e,"footnotes-ref"),Lt(e,Dn)}var Ye=(0,u.fb)(n,"vditor-wysiwyg__block"),oa=Ye?Ye.getAttribute("data-type").indexOf("block")>-1:!1;if(e.wysiwyg.element.querySelectorAll(".vditor-wysiwyg__preview").forEach(function(pe){if(!Ye||Ye&&oa&&!Ye.contains(pe)){var ke=pe.previousElementSibling;ke.style.display="none"}}),Ye&&oa){if(e.wysiwyg.popover.innerHTML="",Mn(t,Ye,e),An(t,Ye,e),Mt(Ye,e),Ye.getAttribute("data-type")==="code-block"){var xr=document.createElement("span");xr.setAttribute("aria-label",window.VditorI18n.language+"<"+(0,d.ns)("⌥Enter")+">"),xr.className="vditor-tooltipped vditor-tooltipped__n";var Dt=document.createElement("input");xr.appendChild(Dt);var Xn=Ye.firstElementChild.firstElementChild;Dt.className="vditor-input",Dt.setAttribute("placeholder",window.VditorI18n.language+"<"+(0,d.ns)("⌥Enter")+">"),Dt.value=Xn.className.indexOf("language-")>-1?Xn.className.split("-")[1].split(" ")[0]:"",Dt.oninput=function(pe){Dt.value.trim()!==""?Xn.className="language-".concat(Dt.value):(Xn.className="",e.hint.recentLanguage=""),Ye.lastElementChild.classList.contains("vditor-wysiwyg__preview")&&(Ye.lastElementChild.innerHTML=Ye.firstElementChild.innerHTML,Ie(Ye.lastElementChild,e)),fe(e),pe.detail===1&&(t.setStart(Xn.firstChild,0),t.collapse(!0),(0,F.Hc)(t))},Dt.onkeydown=function(pe){if(!pe.isComposing&&!nt(e,pe)){if(pe.key==="Escape"&&e.hint.element.style.display==="block"){e.hint.element.style.display="none",pe.preventDefault();return}e.hint.select(pe,e),It(pe,t)}},Dt.onkeyup=function(pe){var ke,an;if(!(pe.isComposing||pe.key==="Enter"||pe.key==="ArrowUp"||pe.key==="Escape"||pe.key==="ArrowDown")){var sn=[],Yn=Dt.value.substring(0,Dt.selectionStart);(e.options.preview.hljs.langs||h.g.ALIAS_CODE_LANGUAGES.concat(((an=(ke=window.hljs)===null||ke===void 0?void 0:ke.listLanguages())!==null&&an!==void 0?an:[]).sort())).forEach(function(Rt){Rt.indexOf(Yn.toLowerCase())>-1&&sn.push({html:Rt,value:Rt})}),e.hint.genHTML(sn,Yn,e),pe.preventDefault()}},e.wysiwyg.popover.insertAdjacentElement("beforeend",xr),Et(e,"code-block")}else Et(e,"block");Lt(e,Ye)}else Ye=void 0;if(P){e.wysiwyg.popover.innerHTML="";var Me=document.createElement("span");Me.setAttribute("aria-label","ID<"+(0,d.ns)("⌥Enter")+">"),Me.className="vditor-tooltipped vditor-tooltipped__n";var on=document.createElement("input");Me.appendChild(on),on.className="vditor-input",on.setAttribute("placeholder","ID<"+(0,d.ns)("⌥Enter")+">"),on.style.width="120px",on.value=P.getAttribute("data-id")||"",on.oninput=function(){P.setAttribute("data-id",on.value),typeof e.options.input=="function"&&e.options.input(H(e))},on.onkeydown=function(ke){ke.isComposing||nt(e,ke)||It(ke,t)},Mn(t,P,e),An(t,P,e),Mt(P,e),e.wysiwyg.popover.insertAdjacentElement("beforeend",Me),Et(e,"heading"),Lt(e,P)}if(x&&pi(e,x,t),!te&&!a&&!T&&!Ye&&!x&&!ki&&!Dn&&!P&&!W){var On=(0,u.a1)(n,"data-block","0");On&&On.parentElement.isEqualNode(e.wysiwyg.element)?(e.wysiwyg.popover.innerHTML="",Mn(t,On,e),An(t,On,e),Mt(On,e),Et(e,"block"),Lt(e,On)):e.wysiwyg.popover.style.display="none"}e.wysiwyg.element.querySelectorAll('span[data-type="backslash"] > span').forEach(function(pe){pe.style.display="none"});var aa=(0,u.a1)(t.startContainer,"data-type","backslash");aa&&(aa.querySelector("span").style.display="inline")}},200)},Lt=function(e,t){var n=t,o=(0,u.lG)(t,"TABLE");o&&(n=o),e.wysiwyg.popover.style.left="0",e.wysiwyg.popover.style.display="block",e.wysiwyg.popover.style.top=Math.max(-8,n.offsetTop-21-e.wysiwyg.element.scrollTop)+"px",e.wysiwyg.popover.style.left=Math.min(n.offsetLeft,e.wysiwyg.element.clientWidth-e.wysiwyg.popover.clientWidth)+"px",e.wysiwyg.popover.setAttribute("data-top",(n.offsetTop-21).toString())},_o=function(e,t,n){n===void 0&&(n=getSelection().getRangeAt(0)),e.wysiwyg.popover.innerHTML="";var o=function(){s.value.trim()!==""&&(t.tagName==="IMG"?t.setAttribute("alt",s.value):t.textContent=s.value),C.value.trim()!==""&&t.setAttribute("data-link-label",C.value),typeof e.options.input=="function"&&e.options.input(H(e))},a=document.createElement("span");a.setAttribute("aria-label",window.VditorI18n.textIsNotEmpty),a.className="vditor-tooltipped vditor-tooltipped__n";var s=document.createElement("input");a.appendChild(s),s.className="vditor-input",s.setAttribute("placeholder",window.VditorI18n.textIsNotEmpty),s.style.width="120px",s.value=t.getAttribute("alt")||t.textContent,s.oninput=function(){o()},s.onkeydown=function(x){nt(e,x)||It(x,n)||$n(e,t,x,C)};var m=document.createElement("span");m.setAttribute("aria-label",window.VditorI18n.linkRef),m.className="vditor-tooltipped vditor-tooltipped__n";var C=document.createElement("input");m.appendChild(C),C.className="vditor-input",C.setAttribute("placeholder",window.VditorI18n.linkRef),C.value=t.getAttribute("data-link-label"),C.oninput=function(){o()},C.onkeydown=function(x){nt(e,x)||It(x,n)||$n(e,t,x,s)},Mt(t,e),e.wysiwyg.popover.insertAdjacentElement("beforeend",a),e.wysiwyg.popover.insertAdjacentElement("beforeend",m),Et(e,"link-ref"),Lt(e,t)},Mn=function(e,t,n){var o=t.previousElementSibling;if(!(!o||!t.parentElement.isEqualNode(n.wysiwyg.element)&&t.tagName!=="LI")){var a=document.createElement("button");a.setAttribute("type","button"),a.setAttribute("data-type","up"),a.setAttribute("aria-label",window.VditorI18n.up+"<"+(0,d.ns)("⇧⌘U")+">"),a.innerHTML='<svg><use xlink:href="#vditor-icon-up"></use></svg>',a.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",a.onclick=function(){e.insertNode(document.createElement("wbr")),o.insertAdjacentElement("beforebegin",t),(0,F.ib)(n.wysiwyg.element,e),fe(n),Pt(n),Ge(n)},n.wysiwyg.popover.insertAdjacentElement("beforeend",a)}},An=function(e,t,n){var o=t.nextElementSibling;if(!(!o||!t.parentElement.isEqualNode(n.wysiwyg.element)&&t.tagName!=="LI")){var a=document.createElement("button");a.setAttribute("type","button"),a.setAttribute("data-type","down"),a.setAttribute("aria-label",window.VditorI18n.down+"<"+(0,d.ns)("⇧⌘D")+">"),a.innerHTML='<svg><use xlink:href="#vditor-icon-down"></use></svg>',a.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",a.onclick=function(){e.insertNode(document.createElement("wbr")),o.insertAdjacentElement("afterend",t),(0,F.ib)(n.wysiwyg.element,e),fe(n),Pt(n),Ge(n)},n.wysiwyg.popover.insertAdjacentElement("beforeend",a)}},Mt=function(e,t){var n=document.createElement("button");n.setAttribute("type","button"),n.setAttribute("data-type","remove"),n.setAttribute("aria-label",window.VditorI18n.remove+"<"+(0,d.ns)("⇧⌘X")+">"),n.innerHTML='<svg><use xlink:href="#vditor-icon-trashcan"></use></svg>',n.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",n.onclick=function(){var o=(0,F.zh)(t);o.setStartAfter(e),(0,F.Hc)(o),e.remove(),fe(t),Pt(t),["H1","H2","H3","H4","H5","H6"].includes(e.tagName)&&pt(t)},t.wysiwyg.popover.insertAdjacentElement("beforeend",n)},$n=function(e,t,n,o){if(!n.isComposing){if(n.key==="Tab"){o.focus(),o.select(),n.preventDefault();return}if(!(0,d.yl)(n)&&!n.shiftKey&&n.altKey&&n.key==="Enter"){var a=(0,F.zh)(e);t.insertAdjacentHTML("afterend",h.g.ZWSP),a.setStartAfter(t.nextSibling),a.collapse(!0),(0,F.Hc)(a),n.preventDefault()}}},pi=function(e,t,n){e.wysiwyg.popover.innerHTML="";var o=function(){s.value.trim()!==""&&(t.innerHTML=s.value),t.setAttribute("href",C.value),t.setAttribute("title",T.value),fe(e)};t.querySelectorAll("[data-marker]").forEach(function(P){P.removeAttribute("data-marker")});var a=document.createElement("span");a.setAttribute("aria-label",window.VditorI18n.textIsNotEmpty),a.className="vditor-tooltipped vditor-tooltipped__n";var s=document.createElement("input");a.appendChild(s),s.className="vditor-input",s.setAttribute("placeholder",window.VditorI18n.textIsNotEmpty),s.style.width="120px",s.value=t.innerHTML||"",s.oninput=function(){o()},s.onkeydown=function(P){nt(e,P)||It(P,n)||$n(e,t,P,C)};var m=document.createElement("span");m.setAttribute("aria-label",window.VditorI18n.link),m.className="vditor-tooltipped vditor-tooltipped__n";var C=document.createElement("input");m.appendChild(C),C.className="vditor-input",C.setAttribute("placeholder",window.VditorI18n.link),C.value=t.getAttribute("href")||"",C.oninput=function(){o()},C.onkeydown=function(P){nt(e,P)||It(P,n)||$n(e,t,P,T)};var x=document.createElement("span");x.setAttribute("aria-label",window.VditorI18n.tooltipText),x.className="vditor-tooltipped vditor-tooltipped__n";var T=document.createElement("input");x.appendChild(T),T.className="vditor-input",T.setAttribute("placeholder",window.VditorI18n.tooltipText),T.style.width="60px",T.value=t.getAttribute("title")||"",T.oninput=function(){o()},T.onkeydown=function(P){nt(e,P)||It(P,n)||$n(e,t,P,s)},Mt(t,e),e.wysiwyg.popover.insertAdjacentElement("beforeend",a),e.wysiwyg.popover.insertAdjacentElement("beforeend",m),e.wysiwyg.popover.insertAdjacentElement("beforeend",x),Et(e,"a"),Lt(e,t)},dl=function(e,t){var n=e.target;t.wysiwyg.popover.innerHTML="";var o=function(){n.setAttribute("src",s.value),n.setAttribute("alt",C.value),n.setAttribute("title",T.value),typeof t.options.input=="function"&&t.options.input(H(t))},a=document.createElement("span");a.setAttribute("aria-label",window.VditorI18n.imageURL),a.className="vditor-tooltipped vditor-tooltipped__n";var s=document.createElement("input");a.appendChild(s),s.className="vditor-input",s.setAttribute("placeholder",window.VditorI18n.imageURL),s.value=n.getAttribute("src")||"",s.oninput=function(){o()},s.onkeydown=function(P){nt(t,P)};var m=document.createElement("span");m.setAttribute("aria-label",window.VditorI18n.alternateText),m.className="vditor-tooltipped vditor-tooltipped__n";var C=document.createElement("input");m.appendChild(C),C.className="vditor-input",C.setAttribute("placeholder",window.VditorI18n.alternateText),C.style.width="52px",C.value=n.getAttribute("alt")||"",C.oninput=function(){o()},C.onkeydown=function(P){nt(t,P)};var x=document.createElement("span");x.setAttribute("aria-label",window.VditorI18n.title),x.className="vditor-tooltipped vditor-tooltipped__n";var T=document.createElement("input");x.appendChild(T),T.className="vditor-input",T.setAttribute("placeholder",window.VditorI18n.title),T.value=n.getAttribute("title")||"",T.oninput=function(){o()},T.onkeydown=function(P){nt(t,P)},Mt(n,t),t.wysiwyg.popover.insertAdjacentElement("beforeend",a),t.wysiwyg.popover.insertAdjacentElement("beforeend",m),t.wysiwyg.popover.insertAdjacentElement("beforeend",x),Et(t,"image"),Lt(t,n)},It=function(e,t){if(!(0,d.yl)(e)&&!e.shiftKey&&e.key==="Enter"||e.key==="Escape")return t&&(0,F.Hc)(t),e.preventDefault(),e.stopPropagation(),!0},Et=function(e,t){e.options.customWysiwygToolbar(t,e.wysiwyg.popover)},kn=function(e){e.currentMode==="wysiwyg"?Pt(e):e.currentMode==="ir"&&be(e)},Lo=function(e,t,n){n===void 0&&(n={enableAddUndoStack:!0,enableHint:!1,enableInput:!0});var o=e.wysiwyg.element;o.innerHTML=e.lute.Md2VditorDOM(t),o.querySelectorAll(".vditor-wysiwyg__preview[data-render='2']").forEach(function(a){Ie(a,e),a.previousElementSibling.setAttribute("style","display:none")}),fe(e,n)},pl=function(e,t,n){for(var o=e.startContainer.parentElement,a=!1,s="",m="",C=Tt(e),x=C.beforeHTML,T=C.afterHTML;o&&!a;){var P=o.tagName;if(P==="STRIKE"&&(P="S"),P==="I"&&(P="EM"),P==="B"&&(P="STRONG"),P==="S"||P==="STRONG"||P==="EM"){var W="",te="",ne="";o.parentElement.getAttribute("data-block")!=="0"&&(te=tt(o),ne=Oe(o)),(x||te)&&(W="".concat(te,"<").concat(P,">").concat(x,"</").concat(P,">"),x=W),(n==="bold"&&P==="STRONG"||n==="italic"&&P==="EM"||n==="strikeThrough"&&P==="S")&&(W+="".concat(s).concat(h.g.ZWSP,"<wbr>").concat(m),a=!0),(T||ne)&&(T="<".concat(P,">").concat(T,"</").concat(P,">").concat(ne),W+=T),o.parentElement.getAttribute("data-block")!=="0"?(o=o.parentElement,o.innerHTML=W):(o.outerHTML=W,o=o.parentElement),s="<".concat(P,">")+s,m="</".concat(P,">")+m}else a=!0}(0,F.ib)(t.wysiwyg.element,e)},hl=function(e,t,n){if(!(e.wysiwyg.composingLock&&n instanceof CustomEvent)){var o=!0,a=!0;e.wysiwyg.element.querySelector("wbr")&&e.wysiwyg.element.querySelector("wbr").remove();var s=(0,F.zh)(e),m=t.getAttribute("data-type");if(t.classList.contains("vditor-menu--current"))if(m==="strike"&&(m="strikeThrough"),m==="quote"){var C=(0,u.lG)(s.startContainer,"BLOCKQUOTE");C||(C=s.startContainer.childNodes[s.startOffset]),C&&(o=!1,t.classList.remove("vditor-menu--current"),s.insertNode(document.createElement("wbr")),C.outerHTML=C.innerHTML.trim()===""?'<p data-block="0">'.concat(C.innerHTML,"</p>"):C.innerHTML,(0,F.ib)(e.wysiwyg.element,s))}else if(m==="inline-code"){var x=(0,u.lG)(s.startContainer,"CODE");x||(x=s.startContainer.childNodes[s.startOffset]),x&&(x.outerHTML=x.innerHTML.replace(h.g.ZWSP,"")+"<wbr>",(0,F.ib)(e.wysiwyg.element,s))}else m==="link"?(s.collapsed&&s.selectNode(s.startContainer.parentElement),document.execCommand("unlink",!1,"")):m==="check"||m==="list"||m==="ordered-list"?(Tr(e,s,m),(0,F.ib)(e.wysiwyg.element,s),o=!1,t.classList.remove("vditor-menu--current")):(o=!1,t.classList.remove("vditor-menu--current"),s.toString()===""?pl(s,e,m):document.execCommand(m,!1,""));else{e.wysiwyg.element.childNodes.length===0&&(e.wysiwyg.element.innerHTML='<p data-block="0"><wbr></p>',(0,F.ib)(e.wysiwyg.element,s));var T=(0,u.F9)(s.startContainer);if(m==="quote"){if(T||(T=s.startContainer.childNodes[s.startOffset]),T){o=!1,t.classList.add("vditor-menu--current"),s.insertNode(document.createElement("wbr"));var P=(0,u.lG)(s.startContainer,"LI");P&&T.contains(P)?P.innerHTML='<blockquote data-block="0">'.concat(P.innerHTML,"</blockquote>"):T.outerHTML='<blockquote data-block="0">'.concat(T.outerHTML,"</blockquote>"),(0,F.ib)(e.wysiwyg.element,s)}}else if(m==="check"||m==="list"||m==="ordered-list")Tr(e,s,m,!1),(0,F.ib)(e.wysiwyg.element,s),o=!1,E(e.toolbar.elements,["check","list","ordered-list"]),t.classList.add("vditor-menu--current");else if(m==="inline-code"){if(s.toString()===""){var W=document.createElement("code");W.textContent=h.g.ZWSP,s.insertNode(W),s.setStart(W.firstChild,1),s.collapse(!0),(0,F.Hc)(s)}else if(s.startContainer.nodeType===3){var W=document.createElement("code");s.surroundContents(W),s.insertNode(W),(0,F.Hc)(s)}t.classList.add("vditor-menu--current")}else if(m==="code"){var W=document.createElement("div");W.className="vditor-wysiwyg__block",W.setAttribute("data-type","code-block"),W.setAttribute("data-block","0"),W.setAttribute("data-marker","```"),s.toString()===""?W.innerHTML=`<pre><code><wbr>
</code></pre>`:(W.innerHTML="<pre><code>".concat(s.toString(),"<wbr></code></pre>"),s.deleteContents()),s.insertNode(W),T&&(T.outerHTML=e.lute.SpinVditorDOM(T.outerHTML)),(0,F.ib)(e.wysiwyg.element,s),e.wysiwyg.element.querySelectorAll(".vditor-wysiwyg__preview[data-render='2']").forEach(function(Be){Ie(Be,e)}),t.classList.add("vditor-menu--disabled")}else if(m==="link"){if(s.toString()===""){var te=document.createElement("a");te.innerText=h.g.ZWSP,s.insertNode(te),s.setStart(te.firstChild,1),s.collapse(!0),pi(e,te,s);var ne=e.wysiwyg.popover.querySelector("input");ne.value="",ne.focus(),a=!1}else{var W=document.createElement("a");W.setAttribute("href",""),W.innerHTML=s.toString(),s.surroundContents(W),s.insertNode(W),(0,F.Hc)(s),pi(e,W,s);var Q=e.wysiwyg.popover.querySelectorAll("input");Q[0].value=W.innerText,Q[1].focus()}o=!1,t.classList.add("vditor-menu--current")}else if(m==="table"){var ce='<table data-block="0"><thead><tr><th>col1<wbr></th><th>col2</th><th>col3</th></tr></thead><tbody><tr><td> </td><td> </td><td> </td></tr><tr><td> </td><td> </td><td> </td></tr></tbody></table>';if(s.toString().trim()==="")T&&T.innerHTML.trim().replace(h.g.ZWSP,"")===""?T.outerHTML=ce:document.execCommand("insertHTML",!1,ce),s.selectNode(e.wysiwyg.element.querySelector("wbr").previousSibling),e.wysiwyg.element.querySelector("wbr").remove(),(0,F.Hc)(s);else{ce='<table data-block="0"><thead><tr>';var le=s.toString().split(`
`),ee=le[0].split(",").length>le[0].split("	").length?",":"	";le.forEach(function(Ee,Be){Be===0?(Ee.split(ee).forEach(function(Re,Ue){Ue===0?ce+="<th>".concat(Re,"<wbr></th>"):ce+="<th>".concat(Re,"</th>")}),ce+="</tr></thead>"):(Be===1?ce+="<tbody><tr>":ce+="<tr>",Ee.split(ee).forEach(function(Re){ce+="<td>".concat(Re,"</td>")}),ce+="</tr>")}),ce+="</tbody></table>",document.execCommand("insertHTML",!1,ce),(0,F.ib)(e.wysiwyg.element,s)}o=!1,t.classList.add("vditor-menu--disabled")}else if(m==="line"){if(T){var ge=`<hr data-block="0"><p data-block="0"><wbr>
</p>`;T.innerHTML.trim()===""?T.outerHTML=ge:T.insertAdjacentHTML("afterend",ge),(0,F.ib)(e.wysiwyg.element,s)}}else if(o=!1,t.classList.add("vditor-menu--current"),m==="strike"&&(m="strikeThrough"),s.toString()===""&&(m==="bold"||m==="italic"||m==="strikeThrough")){var ue="strong";m==="italic"?ue="em":m==="strikeThrough"&&(ue="s");var W=document.createElement(ue);W.textContent=h.g.ZWSP,s.insertNode(W),W.previousSibling&&W.previousSibling.textContent===h.g.ZWSP&&(W.previousSibling.textContent=""),s.setStart(W.firstChild,1),s.collapse(!0),(0,F.Hc)(s)}else document.execCommand(m,!1,"")}o&&Pt(e),a&&fe(e)}},$e=(function(){function e(t,n){var o,a=this;this.element=document.createElement("div"),n.className&&(o=this.element.classList).add.apply(o,n.className.split(" "));var s=n.hotkey?" <".concat((0,d.ns)(n.hotkey),">"):"";n.level===2&&(s=n.hotkey?" &lt;".concat((0,d.ns)(n.hotkey),"&gt;"):"");var m=n.tip?n.tip+s:"".concat(window.VditorI18n[n.name]).concat(s),C=n.name==="upload"?"div":"button";if(n.level===2)this.element.innerHTML="<".concat(C,' data-type="').concat(n.name,'">').concat(m,"</").concat(C,">");else{this.element.classList.add("vditor-toolbar__item");var x=document.createElement(C);x.setAttribute("data-type",n.name),x.className="vditor-tooltipped vditor-tooltipped__".concat(n.tipPosition),x.setAttribute("aria-label",m),x.innerHTML=n.icon,this.element.appendChild(x)}n.prefix&&this.element.children[0].addEventListener((0,d.Le)(),function(T){T.preventDefault(),!a.element.firstElementChild.classList.contains(h.g.CLASS_MENU_DISABLED)&&(t.currentMode==="wysiwyg"?hl(t,a.element.children[0],T):t.currentMode==="ir"?Al(t,a.element.children[0],n.prefix||"",n.suffix||""):bl(t,a.element.children[0],n.prefix||"",n.suffix||""))})}return e})(),ml=(function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,a){o.__proto__=a}||function(o,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(o[s]=a[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}})(),hn=function(e,t,n){var o;if(typeof n!="string"?(M(e,["subToolbar","hint"]),n.preventDefault(),o=H(e)):o=n,!(e.currentMode===t&&typeof n!="string")){if(e.devtools&&e.devtools.renderEchart(e),e.options.preview.mode==="both"&&t==="sv"?e.preview.element.style.display="block":e.preview.element.style.display="none",S(e.toolbar.elements,h.g.EDIT_TOOLBARS),E(e.toolbar.elements,h.g.EDIT_TOOLBARS),w(e.toolbar.elements,["outdent","indent"]),t==="ir")D(e.toolbar.elements,["both"]),A(e.toolbar.elements,["outdent","indent","outline","insert-before","insert-after"]),e.sv.element.style.display="none",e.wysiwyg.element.parentElement.style.display="none",e.ir.element.parentElement.style.display="block",e.lute.SetVditorIR(!0),e.lute.SetVditorWYSIWYG(!1),e.lute.SetVditorSV(!1),e.currentMode="ir",e.ir.element.innerHTML=e.lute.Md2VditorIRDOM(o),Vt(e,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1}),ie(e),e.ir.element.querySelectorAll(".vditor-ir__preview[data-render='2']").forEach(function(s){Ie(s,e)}),e.ir.element.querySelectorAll(".vditor-toc").forEach(function(s){(0,he.H)(s,{cdn:e.options.cdn,math:e.options.preview.math})});else if(t==="wysiwyg")D(e.toolbar.elements,["both"]),A(e.toolbar.elements,["outdent","indent","outline","insert-before","insert-after"]),e.sv.element.style.display="none",e.wysiwyg.element.parentElement.style.display="block",e.ir.element.parentElement.style.display="none",e.lute.SetVditorIR(!1),e.lute.SetVditorWYSIWYG(!0),e.lute.SetVditorSV(!1),e.currentMode="wysiwyg",ie(e),Lo(e,o,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1}),e.wysiwyg.element.querySelectorAll(".vditor-toc").forEach(function(s){(0,he.H)(s,{cdn:e.options.cdn,math:e.options.preview.math})}),e.wysiwyg.popover.style.display="none";else if(t==="sv"){A(e.toolbar.elements,["both"]),D(e.toolbar.elements,["outdent","indent","outline","insert-before","insert-after"]),e.wysiwyg.element.parentElement.style.display="none",e.ir.element.parentElement.style.display="none",(e.options.preview.mode==="both"||e.options.preview.mode==="editor")&&(e.sv.element.style.display="block"),e.lute.SetVditorIR(!1),e.lute.SetVditorWYSIWYG(!1),e.lute.SetVditorSV(!0),e.currentMode="sv";var a=Ao(o,e);a==="<div data-block='0'></div>"&&(a=""),e.sv.element.innerHTML=a,I(e.sv.element),Xe(e,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1}),ie(e)}e.undo.resetIcon(e),typeof n!="string"&&(e[e.currentMode].element.focus(),kn(e)),pt(e),ae(e),e.toolbar.elements["edit-mode"]&&(e.toolbar.elements["edit-mode"].querySelectorAll("button").forEach(function(s){s.classList.remove("vditor-menu--current")}),e.toolbar.elements["edit-mode"].querySelector('button[data-mode="'.concat(e.currentMode,'"]')).classList.add("vditor-menu--current")),e.outline.toggle(e,e.currentMode!=="sv"&&e.options.outline.enable,typeof n!="string")}},gl=(function(e){ml(t,e);function t(n,o){var a=e.call(this,n,o)||this,s=document.createElement("div");return s.className="vditor-hint".concat(o.level===2?"":" vditor-panel--arrow"),s.innerHTML='<button data-mode="wysiwyg">'.concat(window.VditorI18n.wysiwyg," &lt;").concat((0,d.ns)("⌥⌘7"),`></button>
<button data-mode="ir">`).concat(window.VditorI18n.instantRendering," &lt;").concat((0,d.ns)("⌥⌘8"),`></button>
<button data-mode="sv">`).concat(window.VditorI18n.splitView," &lt;").concat((0,d.ns)("⌥⌘9"),"></button>"),a.element.appendChild(s),a._bindEvent(n,s,o),a}return t.prototype._bindEvent=function(n,o,a){var s=this.element.children[0];L(n,o,s,a.level),o.children.item(0).addEventListener((0,d.Le)(),function(m){hn(n,"wysiwyg",m),m.preventDefault(),m.stopPropagation()}),o.children.item(1).addEventListener((0,d.Le)(),function(m){hn(n,"ir",m),m.preventDefault(),m.stopPropagation()}),o.children.item(2).addEventListener((0,d.Le)(),function(m){hn(n,"sv",m),m.preventDefault(),m.stopPropagation()})},t})($e),zn=function(e,t){return(0,F.Gb)(e,t)?getSelection().toString():""},hi=function(e,t){t.addEventListener("focus",function(){e.options.focus&&e.options.focus(H(e)),M(e,["subToolbar","hint"])})},Mo=function(e,t){t.addEventListener("dblclick",function(n){n.target.tagName==="IMG"&&(e.options.image.preview?e.options.image.preview(n.target):e.options.image.isPreview&&(0,O.E)(n.target,e.options.lang,e.options.theme))})},mi=function(e,t){t.addEventListener("blur",function(n){if(e.currentMode==="ir"){var o=e.ir.element.querySelector(".vditor-ir__node--expand");o&&o.classList.remove("vditor-ir__node--expand")}else e.currentMode==="wysiwyg"&&!e.wysiwyg.selectPopover.contains(n.relatedTarget)&&e.wysiwyg.hideComment();e[e.currentMode].range=(0,F.zh)(e),e.options.blur&&e.options.blur(H(e))})},gi=function(e,t){t.addEventListener("dragstart",function(n){n.dataTransfer.setData(h.g.DROP_EDITOR,h.g.DROP_EDITOR)}),t.addEventListener("drop",function(n){n.dataTransfer.getData(h.g.DROP_EDITOR)?Ae(e):(n.dataTransfer.types.includes("Files")||n.dataTransfer.types.includes("text/html"))&&Mr(e,n,{pasteCode:function(o){document.execCommand("insertHTML",!1,o)}})})},yi=function(e,t,n){t.addEventListener("copy",function(o){return n(o,e)})},bi=function(e,t,n){t.addEventListener("cut",function(o){n(o,e),e.options.comment.enable&&e.currentMode==="wysiwyg"&&e.wysiwyg.getComments(e),document.execCommand("delete")})},Ge=function(e){if(e.currentMode==="wysiwyg"&&e.options.comment.enable&&e.options.comment.adjustTop(e.wysiwyg.getComments(e,!0)),!!e.options.typewriterMode){var t=e[e.currentMode].element,n=(0,F.Ny)(t).top;e.options.height==="auto"&&!e.element.classList.contains("vditor--fullscreen")&&window.scrollTo(window.scrollX,n+e.element.offsetTop+e.toolbar.element.offsetHeight-window.innerHeight/2+10),(e.options.height!=="auto"||e.element.classList.contains("vditor--fullscreen"))&&(t.scrollTop=n+t.scrollTop-t.clientHeight/2+10)}},vi=function(e,t){t.addEventListener("keydown",function(n){if(!n.isComposing&&e.options.keydown&&e.options.keydown(n),!((e.options.hint.extend.length>1||e.toolbar.elements.emoji)&&e.hint.select(n,e))){if(e.options.comment.enable&&e.currentMode==="wysiwyg"&&(n.key==="Backspace"||j("⌘X",n))&&e.wysiwyg.getComments(e),e.currentMode==="sv"){if(Y(e,n))return}else if(e.currentMode==="wysiwyg"){if(_t(e,n))return}else if(e.currentMode==="ir"&&me(e,n))return;if(e.options.ctrlEnter&&j("⌘Enter",n)){e.options.ctrlEnter(H(e)),n.preventDefault();return}if(j("⌘Z",n)&&!e.toolbar.elements.undo){e.undo.undo(e),n.preventDefault();return}if(j("⌘Y",n)&&!e.toolbar.elements.redo){e.undo.redo(e),n.preventDefault();return}if(n.key==="Escape"){e.hint.element.style.display==="block"?e.hint.element.style.display="none":e.options.esc&&!n.isComposing&&e.options.esc(H(e)),n.preventDefault();return}if((0,d.yl)(n)&&n.altKey&&!n.shiftKey&&/^Digit[1-6]$/.test(n.code)){if(e.currentMode==="wysiwyg"){var o=n.code.replace("Digit","H");(0,u.lG)(getSelection().getRangeAt(0).startContainer,o)?Ln(e):Nt(e,o),fe(e)}else e.currentMode==="sv"?ko(e,"#".repeat(parseInt(n.code.replace("Digit",""),10))+" "):e.currentMode==="ir"&&Zn(e,"#".repeat(parseInt(n.code.replace("Digit",""),10))+" ");return n.preventDefault(),!0}if((0,d.yl)(n)&&n.altKey&&!n.shiftKey&&/^Digit[7-9]$/.test(n.code))return n.code==="Digit7"?hn(e,"wysiwyg",n):n.code==="Digit8"?hn(e,"ir",n):n.code==="Digit9"&&hn(e,"sv",n),!0;e.options.toolbar.find(function(a){if(!a.hotkey||a.toolbar){if(a.toolbar){var s=a.toolbar.find(function(m){if(!m.hotkey)return!1;if(j(m.hotkey,n))return e.toolbar.elements[m.name].children[0].dispatchEvent(new CustomEvent((0,d.Le)())),n.preventDefault(),!0});return!!s}return!1}if(j(a.hotkey,n))return e.toolbar.elements[a.name].children[0].dispatchEvent(new CustomEvent((0,d.Le)())),n.preventDefault(),!0})}})},wi=function(e,t){t.addEventListener("selectstart",function(n){t.onmouseup=function(){setTimeout(function(){var o=zn(e[e.currentMode].element);o.trim()?(e.currentMode==="wysiwyg"&&e.options.comment.enable&&(!(0,u.a1)(n.target,"data-type","footnotes-block")&&!(0,u.a1)(n.target,"data-type","link-ref-defs-block")?e.wysiwyg.showComment():e.wysiwyg.hideComment()),e.options.select&&e.options.select(o)):(e.currentMode==="wysiwyg"&&e.options.comment.enable&&e.wysiwyg.hideComment(),typeof e.options.unSelect=="function"&&e.options.unSelect())})}})},Ei=function(e,t){var n=(0,F.zh)(e);n.extractContents(),n.insertNode(document.createTextNode(Lute.Caret)),n.insertNode(document.createTextNode(t));var o=(0,u.a1)(n.startContainer,"data-block","0");o||(o=e.sv.element);var a=e.lute.SpinVditorSVDOM(o.textContent);a="<div data-block='0'>"+a.replace(/<span data-type="newline"><br \/><span style="display: none">\n<\/span><\/span><span data-type="newline"><br \/><span style="display: none">\n<\/span><\/span></g,`<span data-type="newline"><br /><span style="display: none">
</span></span><span data-type="newline"><br /><span style="display: none">
</span></span></div><div data-block="0"><`)+"</div>",o.isEqualNode(e.sv.element)?o.innerHTML=a:o.outerHTML=a,I(e.sv.element),(0,F.ib)(e.sv.element,n),Ge(e)},Sr=function(e,t,n){n===void 0&&(n=!0);var o=e;for(o.nodeType===3&&(o=o.parentElement);o;){if(o.getAttribute("data-type")===t)return o;n?o=o.previousElementSibling:o=o.nextElementSibling}return!1},Ao=function(e,t){U("SpinVditorSVDOM",e,"argument",t.options.debugger);var n=t.lute.SpinVditorSVDOM(e);return e="<div data-block='0'>"+n.replace(/<span data-type="newline"><br \/><span style="display: none">\n<\/span><\/span><span data-type="newline"><br \/><span style="display: none">\n<\/span><\/span></g,`<span data-type="newline"><br /><span style="display: none">
</span></span><span data-type="newline"><br /><span style="display: none">
</span></span></div><div data-block="0"><`)+"</div>",U("SpinVditorSVDOM",e,"result",t.options.debugger),e},yl=function(e){var t=e.getAttribute("data-type"),n=e.previousElementSibling,o=t&&t!=="text"&&t!=="table"&&t!=="heading-marker"&&t!=="newline"&&t!=="yaml-front-matter-open-marker"&&t!=="yaml-front-matter-close-marker"&&t!=="code-block-info"&&t!=="code-block-close-marker"&&t!=="code-block-open-marker"?e.textContent:"",a=!1;for(t==="newline"&&(a=!0);n&&!a;){var s=n.getAttribute("data-type");if(s==="li-marker"||s==="blockquote-marker"||s==="task-marker"||s==="padding"){var m=n.textContent;if(s==="li-marker"&&(t==="code-block-open-marker"||t==="code-block-info"))o=m.replace(/\S/g," ")+o;else if(t==="code-block-close-marker"&&n.nextElementSibling.isSameNode(e)){var C=Sr(e,"code-block-open-marker");C&&C.previousElementSibling&&(n=C.previousElementSibling,o=m+o)}else o=m+o}else s==="newline"&&(a=!0);n=n.previousElementSibling}return o},Xe=function(e,t){t===void 0&&(t={enableAddUndoStack:!0,enableHint:!1,enableInput:!0}),t.enableHint&&e.hint.render(e),e.preview.render(e);var n=H(e);typeof e.options.input=="function"&&t.enableInput&&e.options.input(n),e.options.counter.enable&&e.counter.render(e,n),e.options.cache.enable&&(0,d.pK)()&&(localStorage.setItem(e.options.cache.id,n),e.options.cache.after&&e.options.cache.after(n)),e.devtools&&e.devtools.renderEchart(e),clearTimeout(e.sv.processTimeoutId),e.sv.processTimeoutId=window.setTimeout(function(){t.enableAddUndoStack&&!e.sv.composingLock&&e.undo.addToUndoStack(e)},e.options.undoDelay)},ko=function(e,t){var n=(0,F.zh)(e),o=(0,k.S)(n.startContainer,"SPAN");o&&o.textContent.trim()!==""&&(t=`
`+t),n.collapse(!0),document.execCommand("insertHTML",!1,t)},bl=function(e,t,n,o){var a=(0,F.zh)(e),s=t.getAttribute("data-type");e.sv.element.childNodes.length===0&&(e.sv.element.innerHTML=`<span data-type="p" data-block="0"><span data-type="text"><wbr></span></span><span data-type="newline"><br><span style="display: none">
</span></span>`,(0,F.ib)(e.sv.element,a));var m=(0,u.F9)(a.startContainer),C=(0,k.S)(a.startContainer,"SPAN");if(m){if(s==="link"){var x=void 0;a.toString()===""?x="".concat(n).concat(Lute.Caret).concat(o):x="".concat(n).concat(a.toString()).concat(o.replace(")",Lute.Caret+")")),document.execCommand("insertHTML",!1,x);return}else if(s==="italic"||s==="bold"||s==="strike"||s==="inline-code"||s==="code"||s==="table"||s==="line"){var x=void 0;a.toString()===""?x="".concat(n).concat(Lute.Caret).concat(s==="code"?"":o):x="".concat(n).concat(a.toString()).concat(Lute.Caret).concat(s==="code"?"":o),s==="table"||s==="code"&&C&&C.textContent!==""?x=`

`+x:s==="line"&&(x=`

`.concat(n,`
`).concat(Lute.Caret)),document.execCommand("insertHTML",!1,x);return}else if((s==="check"||s==="list"||s==="ordered-list"||s==="quote")&&C){var T="* ";s==="check"?T="* [ ] ":s==="ordered-list"?T="1. ":s==="quote"&&(T="> ");var P=Sr(C,"newline");P?P.insertAdjacentText("afterend",T):m.insertAdjacentText("afterbegin",T),V(e);return}(0,F.ib)(e.sv.element,a),Xe(e)}},xo=function(e){switch(e.currentMode){case"ir":return e.ir.element;case"wysiwyg":return e.wysiwyg.element;case"sv":return e.sv.element}},Do=function(e,t){e.options.upload.setHeaders&&(e.options.upload.headers=e.options.upload.setHeaders()),e.options.upload.headers&&Object.keys(e.options.upload.headers).forEach(function(n){t.setRequestHeader(n,e.options.upload.headers[n])})},vl=function(e,t,n,o){function a(s){return s instanceof n?s:new n(function(m){m(s)})}return new(n||(n=Promise))(function(s,m){function C(P){try{T(o.next(P))}catch(W){m(W)}}function x(P){try{T(o.throw(P))}catch(W){m(W)}}function T(P){P.done?s(P.value):a(P.value).then(C,x)}T((o=o.apply(e,t||[])).next())})},wl=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},o,a,s,m;return m={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(m[Symbol.iterator]=function(){return this}),m;function C(T){return function(P){return x([T,P])}}function x(T){if(o)throw new TypeError("Generator is already executing.");for(;m&&(m=0,T[0]&&(n=0)),n;)try{if(o=1,a&&(s=T[0]&2?a.return:T[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,T[1])).done)return s;switch(a=0,s&&(T=[T[0]&2,s.value]),T[0]){case 0:case 1:s=T;break;case 4:return n.label++,{value:T[1],done:!1};case 5:n.label++,a=T[1],T=[0];continue;case 7:T=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(T[0]===6||T[0]===2)){n=0;continue}if(T[0]===3&&(!s||T[1]>s[0]&&T[1]<s[3])){n.label=T[1];break}if(T[0]===6&&n.label<s[1]){n.label=s[1],s=T;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(T);break}s[2]&&n.ops.pop(),n.trys.pop();continue}T=t.call(e,n)}catch(P){T=[6,P],a=0}finally{o=s=0}if(T[0]&5)throw T[1];return{value:T[0]?T[1]:void 0,done:!0}}},El=(function(){function e(){this.isUploading=!1,this.element=document.createElement("div"),this.element.className="vditor-upload"}return e})(),Sl=function(e,t){e.tip.hide();var n=[],o="",a="";e.options.lang,e.options;for(var s=function(T,P){var W=t[P],te=!0;W.name||(o+="<li>".concat(window.VditorI18n.nameEmpty,"</li>"),te=!1),W.size>e.options.upload.max&&(o+="<li>".concat(W.name," ").concat(window.VditorI18n.over," ").concat(e.options.upload.max/1024/1024,"M</li>"),te=!1);var ne=W.name.lastIndexOf("."),Q=W.name.substr(ne),ce=e.options.upload.filename(W.name.substr(0,ne))+Q;if(e.options.upload.accept){var le=e.options.upload.accept.split(",").some(function(ee){var ge=ee.trim();if(ge.indexOf(".")===0){if(Q.toLowerCase()===ge.toLowerCase())return!0}else if(W.type.split("/")[0]===ge.split("/")[0])return!0;return!1});le||(o+="<li>".concat(W.name," ").concat(window.VditorI18n.fileTypeError,"</li>"),te=!1)}te&&(n.push(W),a+="<li>".concat(ce," ").concat(window.VditorI18n.uploading,' <a class="vditorCancelUpload" href="javascript:void(0)">').concat(window.VditorI18n.cancelUpload,"</a></li>"))},m=t.length,C=0;C<m;C++)s(m,C);if(e.tip.show("<ul>".concat(o).concat(a,"</ul>")),e.options.upload.cancel){var x=e.tip.element.querySelector(".vditorCancelUpload");x&&x.addEventListener("click",function(){e.options.upload.cancel(n),e.tip.hide(),e.upload.isUploading=!1})}return n},Cl=function(e,t){var n=xo(t);n.focus();var o=JSON.parse(e),a="";o.code===1&&(a="".concat(o.msg)),o.data.errFiles&&o.data.errFiles.length>0&&(a="<ul><li>".concat(a,"</li>"),o.data.errFiles.forEach(function(m){var C=m.lastIndexOf("."),x=t.options.upload.filename(m.substr(0,C))+m.substr(C);a+="<li>".concat(x," ").concat(window.VditorI18n.uploadError,"</li>")}),a+="</ul>"),a?t.tip.show(a):t.tip.hide();var s="";Object.keys(o.data.succMap).forEach(function(m){var C=o.data.succMap[m],x=m.lastIndexOf("."),T=m.substr(x),P=t.options.upload.filename(m.substr(0,x))+T;T=T.toLowerCase(),T.indexOf(".wav")===0||T.indexOf(".mp3")===0||T.indexOf(".ogg")===0?t.currentMode==="wysiwyg"?s+=`<div class="vditor-wysiwyg__block" data-type="html-block"
 data-block="0"><pre><code>&lt;audio controls="controls" src="`.concat(C,'"&gt;&lt;/audio&gt;</code></pre><pre class="vditor-wysiwyg__preview" data-render="1"><audio controls="controls" src="').concat(C,`"></audio></pre></div>
`):t.currentMode==="ir"?s+='<audio controls="controls" src="'.concat(C,`"></audio>
`):s+="[".concat(P,"](").concat(C,`)
`):T.indexOf(".apng")===0||T.indexOf(".bmp")===0||T.indexOf(".gif")===0||T.indexOf(".ico")===0||T.indexOf(".cur")===0||T.indexOf(".jpg")===0||T.indexOf(".jpeg")===0||T.indexOf(".jfif")===0||T.indexOf(".pjp")===0||T.indexOf(".pjpeg")===0||T.indexOf(".png")===0||T.indexOf(".svg")===0||T.indexOf(".webp")===0?t.currentMode==="wysiwyg"?s+='<img alt="'.concat(P,'" src="').concat(C,`">
`):s+="![".concat(P,"](").concat(C,`)
`):t.currentMode==="wysiwyg"?s+='<a href="'.concat(C,'">').concat(P,`</a>
`):s+="[".concat(P,"](").concat(C,`)
`)}),(0,F.Hc)(t.upload.range),document.execCommand("insertHTML",!1,s),t.upload.range=getSelection().getRangeAt(0).cloneRange()},Si=function(e,t,n){return vl(void 0,void 0,void 0,function(){var o,a,Q,s,m,m,C,x,T,P,W,te,ne,Q,ce,le;return wl(this,function(ee){switch(ee.label){case 0:for(o=[],a=e.options.upload.multiple===!0?t.length:1,Q=0;Q<a;Q++)s=t[Q],s instanceof DataTransferItem&&(s=s.getAsFile()),o.push(s);return e.options.upload.handler?[4,e.options.upload.handler(o)]:[3,2];case 1:return m=ee.sent(),n&&(n.value=""),typeof m=="string"?(e.tip.show(m),[2]):[2];case 2:return!e.options.upload.url||!e.upload?(n&&(n.value=""),e.tip.show("please config: options.upload.url"),[2]):e.options.upload.file?[4,e.options.upload.file(o)]:[3,4];case 3:o=ee.sent(),ee.label=4;case 4:if(e.options.upload.validate&&(m=e.options.upload.validate(o),typeof m=="string"))return e.tip.show(m),[2];if(C=xo(e),e.upload.range=(0,F.zh)(e),x=Sl(e,o),x.length===0)return n&&(n.value=""),[2];for(T=new FormData,P=e.options.upload.extraData,W=0,te=Object.keys(P);W<te.length;W++)ne=te[W],T.append(ne,P[ne]);for(Q=0,ce=x.length;Q<ce;Q++)T.append(e.options.upload.fieldName,x[Q]);return le=new XMLHttpRequest,e.upload.xhr=le,le.open("POST",e.options.upload.url),e.options.upload.token&&le.setRequestHeader("X-Upload-Token",e.options.upload.token),e.options.upload.withCredentials&&(le.withCredentials=!0),Do(e,le),e.upload.isUploading=!0,C.setAttribute("contenteditable","false"),le.onreadystatechange=function(){if(le.readyState===XMLHttpRequest.DONE){if(e.upload.isUploading=!1,C.setAttribute("contenteditable","true"),le.status>=200&&le.status<300)if(e.options.upload.success)e.options.upload.success(C,le.responseText);else{var ge=le.responseText;e.options.upload.format&&(ge=e.options.upload.format(t,le.responseText)),Cl(ge,e)}else e.options.upload.error?e.options.upload.error(le.responseText):e.tip.show(le.responseText);n&&(n.value=""),e.upload.element.style.display="none",e.upload.xhr=void 0}},le.upload.onprogress=function(ge){if(ge.lengthComputable){var ue=ge.loaded/ge.total*100;e.upload.element.style.display="block";var Ee=e.upload.element;Ee.style.width=ue+"%"}},le.send(T),[2]}})})},Cr=function(e,t,n){var o,a=(0,u.F9)(t.startContainer);if(a||(a=e.wysiwyg.element),n&&n.inputType!=="formatItalic"&&n.inputType!=="deleteByDrag"&&n.inputType!=="insertFromDrop"&&n.inputType!=="formatBold"&&n.inputType!=="formatRemove"&&n.inputType!=="formatStrikeThrough"&&n.inputType!=="insertUnorderedList"&&n.inputType!=="insertOrderedList"&&n.inputType!=="formatOutdent"&&n.inputType!=="formatIndent"&&n.inputType!==""||!n){var s=xe(t.startContainer);s&&s.remove(),e.wysiwyg.element.querySelectorAll("wbr").forEach(function(ue){ue.remove()}),t.insertNode(document.createElement("wbr")),a.querySelectorAll("[style]").forEach(function(ue){ue.removeAttribute("style")}),a.querySelectorAll(".vditor-comment").forEach(function(ue){ue.textContent.trim()===""&&(ue.classList.remove("vditor-comment","vditor-comment--focus"),ue.removeAttribute("data-cmtids"))}),(o=a.previousElementSibling)===null||o===void 0||o.querySelectorAll(".vditor-comment").forEach(function(ue){ue.textContent.trim()===""&&(ue.classList.remove("vditor-comment","vditor-comment--focus"),ue.removeAttribute("data-cmtids"))});var m="";a.getAttribute("data-type")==="link-ref-defs-block"&&(a=e.wysiwyg.element);var C=a.isEqualNode(e.wysiwyg.element),x=(0,u.a1)(a,"data-type","footnotes-block");if(C)m=a.innerHTML;else{var T=(0,u.O9)(t.startContainer);if(T&&!x){var P=(0,k.S)(t.startContainer,"BLOCKQUOTE");P?a=(0,u.F9)(t.startContainer)||a:a=T}if(x&&(a=x),m=a.outerHTML,a.tagName==="UL"||a.tagName==="OL"){var W=a.previousElementSibling,te=a.nextElementSibling;W&&(W.tagName==="UL"||W.tagName==="OL")&&(m=W.outerHTML+m,W.remove()),te&&(te.tagName==="UL"||te.tagName==="OL")&&(m=m+te.outerHTML,te.remove()),m=m.replace("<div><wbr><br></div>","<li><p><wbr><br></p></li>")}a.innerText.startsWith("```")||(e.wysiwyg.element.querySelectorAll("[data-type='link-ref-defs-block']").forEach(function(ue){ue&&!a.isEqualNode(ue)&&(m+=ue.outerHTML,ue.remove())}),e.wysiwyg.element.querySelectorAll("[data-type='footnotes-block']").forEach(function(ue){ue&&!a.isEqualNode(ue)&&(m+=ue.outerHTML,ue.remove())}))}if(m=m.replace(/<\/(strong|b)><strong data-marker="\W{2}">/g,"").replace(/<\/(em|i)><em data-marker="\W{1}">/g,"").replace(/<\/(s|strike)><s data-marker="~{1,2}">/g,""),m==='<p data-block="0">```<wbr></p>'&&e.hint.recentLanguage&&(m='<p data-block="0">```<wbr></p>'.replace("```","```"+e.hint.recentLanguage)),U("SpinVditorDOM",m,"argument",e.options.debugger),m=e.lute.SpinVditorDOM(m),U("SpinVditorDOM",m,"result",e.options.debugger),C)a.innerHTML=m;else if(a.outerHTML=m,x){var ne=(0,u.E2)(e.wysiwyg.element.querySelector("wbr"),"LI");if(ne){var Q=e.wysiwyg.element.querySelector('sup[data-type="footnotes-ref"][data-footnotes-label="'.concat(ne.getAttribute("data-marker"),'"]'));Q&&Q.setAttribute("aria-label",ne.textContent.trim().substr(0,24))}}var ce,le=e.wysiwyg.element.querySelectorAll("[data-type='link-ref-defs-block']");le.forEach(function(ue,Ee){Ee===0?ce=ue:(ce.insertAdjacentHTML("beforeend",ue.innerHTML),ue.remove())}),le.length>0&&e.wysiwyg.element.insertAdjacentElement("beforeend",le[0]);var ee,ge=e.wysiwyg.element.querySelectorAll("[data-type='footnotes-block']");ge.forEach(function(ue,Ee){Ee===0?ee=ue:(ee.insertAdjacentHTML("beforeend",ue.innerHTML),ue.remove())}),ge.length>0&&e.wysiwyg.element.insertAdjacentElement("beforeend",ge[0]),(0,F.ib)(e.wysiwyg.element,t),e.wysiwyg.element.querySelectorAll(".vditor-wysiwyg__preview[data-render='2']").forEach(function(ue){Ie(ue,e)}),n&&(n.inputType==="deleteContentBackward"||n.inputType==="deleteContentForward")&&e.options.comment.enable&&(e.wysiwyg.triggerRemoveComment(e),e.options.comment.adjustTop(e.wysiwyg.getComments(e,!0)))}pt(e),fe(e,{enableAddUndoStack:!0,enableHint:!0,enableInput:!0})},Tl=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},Oo=function(e,t,n,o){function a(s){return s instanceof n?s:new n(function(m){m(s)})}return new(n||(n=Promise))(function(s,m){function C(P){try{T(o.next(P))}catch(W){m(W)}}function x(P){try{T(o.throw(P))}catch(W){m(W)}}function T(P){P.done?s(P.value):a(P.value).then(C,x)}T((o=o.apply(e,t||[])).next())})},Ho=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},o,a,s,m;return m={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(m[Symbol.iterator]=function(){return this}),m;function C(T){return function(P){return x([T,P])}}function x(T){if(o)throw new TypeError("Generator is already executing.");for(;m&&(m=0,T[0]&&(n=0)),n;)try{if(o=1,a&&(s=T[0]&2?a.return:T[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,T[1])).done)return s;switch(a=0,s&&(T=[T[0]&2,s.value]),T[0]){case 0:case 1:s=T;break;case 4:return n.label++,{value:T[1],done:!1};case 5:n.label++,a=T[1],T=[0];continue;case 7:T=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(T[0]===6||T[0]===2)){n=0;continue}if(T[0]===3&&(!s||T[1]>s[0]&&T[1]<s[3])){n.label=T[1];break}if(T[0]===6&&n.label<s[1]){n.label=s[1],s=T;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(T);break}s[2]&&n.ops.pop(),n.trys.pop();continue}T=t.call(e,n)}catch(P){T=[6,P],a=0}finally{o=s=0}if(T[0]&5)throw T[1];return{value:T[0]?T[1]:void 0,done:!0}}},No=function(e,t,n){if(e.keyCode===229&&e.code===""&&e.key==="Unidentified"&&t.currentMode!=="sv"){var o=(0,u.F9)(n);if(o&&o.textContent.trim()==="")return t[t.currentMode].composingLock=!0,!1}return!0},Po=function(e,t,n){if(!(n.key==="Enter"||n.key==="Tab"||n.key==="Backspace"||n.key.indexOf("Arrow")>-1||(0,d.yl)(n)||n.key==="Escape"||n.shiftKey||n.altKey)){var o=(0,u.lG)(e.startContainer,"P")||(0,u.lG)(e.startContainer,"LI");if(o&&(0,F.im)(o,t[t.currentMode].element,e).start===0){o.nodeValue&&(o.nodeValue=o.nodeValue.replace(/\u2006/g,""));var a=document.createTextNode(h.g.ZWSP);e.insertNode(a),e.setStartAfter(a)}}},Io=function(e,t){if(t==="ArrowDown"||t==="ArrowUp"){var n=(0,u.a1)(e.startContainer,"data-type","math-inline")||(0,u.a1)(e.startContainer,"data-type","html-entity")||(0,u.a1)(e.startContainer,"data-type","html-inline");n&&(t==="ArrowDown"&&e.setStartAfter(n.parentElement),t==="ArrowUp"&&e.setStartBefore(n.parentElement))}},Gn=function(e,t){var n=(0,F.zh)(e),o=(0,u.F9)(n.startContainer);o&&(o.insertAdjacentHTML(t,'<p data-block="0">'.concat(h.g.ZWSP,`<wbr>
</p>`)),(0,F.ib)(e[e.currentMode].element,n),kn(e),Ae(e))},_l=function(e){var t=(0,u.lG)(e,"TABLE");return t&&t.rows[0].cells[0].isSameNode(e)?t:!1},Ll=function(e){var t=(0,u.lG)(e,"TABLE");return t&&t.lastElementChild.lastElementChild.lastElementChild.isSameNode(e)?t:!1},Ro=function(e,t,n){n===void 0&&(n=!0);var o=e.previousElementSibling;return o||(e.parentElement.previousElementSibling?o=e.parentElement.previousElementSibling.lastElementChild:e.parentElement.parentElement.tagName==="TBODY"&&e.parentElement.parentElement.previousElementSibling?o=e.parentElement.parentElement.previousElementSibling.lastElementChild.lastElementChild:o=null),o&&(t.selectNodeContents(o),n||t.collapse(!1),(0,F.Hc)(t)),o},Jn=function(e,t,n,o,a){var s=(0,F.im)(o,e[e.currentMode].element,n);if(t.key==="ArrowDown"&&o.textContent.trimRight().substr(s.start).indexOf(`
`)===-1||t.key==="ArrowRight"&&s.start>=o.textContent.trimRight().length){var m=a.nextElementSibling;return!m||m&&(m.tagName==="TABLE"||m.getAttribute("data-type"))?(a.insertAdjacentHTML("afterend",'<p data-block="0">'.concat(h.g.ZWSP,"<wbr></p>")),(0,F.ib)(e[e.currentMode].element,n)):(n.selectNodeContents(m),n.collapse(!0),(0,F.Hc)(n)),t.preventDefault(),!0}return!1},xn=function(e,t,n,o,a){var s=(0,F.im)(o,e[e.currentMode].element,n);if(t.key==="ArrowUp"&&o.textContent.substr(0,s.start).indexOf(`
`)===-1||(t.key==="ArrowLeft"||t.key==="Backspace"&&n.toString()==="")&&s.start===0){var m=a.previousElementSibling;return!m||m&&(m.tagName==="TABLE"||m.getAttribute("data-type"))?(a.insertAdjacentHTML("beforebegin",'<p data-block="0">'.concat(h.g.ZWSP,"<wbr></p>")),(0,F.ib)(e[e.currentMode].element,n)):(n.selectNodeContents(m),n.collapse(!1),(0,F.Hc)(n)),t.preventDefault(),!0}return!1},Tr=function(e,t,n,o){o===void 0&&(o=!0);var a=(0,u.lG)(t.startContainer,"LI");if(e[e.currentMode].element.querySelectorAll("wbr").forEach(function(P){P.remove()}),t.insertNode(document.createElement("wbr")),o&&a){for(var s="",m=0;m<a.parentElement.childElementCount;m++){var C=a.parentElement.children[m].querySelector("input");C&&C.remove(),s+='<p data-block="0">'.concat(a.parentElement.children[m].innerHTML.trimLeft(),"</p>")}a.parentElement.insertAdjacentHTML("beforebegin",s),a.parentElement.remove()}else if(a)if(n==="check")a.parentElement.querySelectorAll("li").forEach(function(P){P.insertAdjacentHTML("afterbegin",'<input type="checkbox" />'.concat(P.textContent.indexOf(" ")===0?"":" ")),P.classList.add("vditor-task")});else{a.querySelector("input")&&a.parentElement.querySelectorAll("li").forEach(function(P){P.querySelector("input").remove(),P.classList.remove("vditor-task")});var T=void 0;n==="list"?(T=document.createElement("ul"),T.setAttribute("data-marker","*")):(T=document.createElement("ol"),T.setAttribute("data-marker","1.")),T.setAttribute("data-block","0"),T.setAttribute("data-tight",a.parentElement.getAttribute("data-tight")),T.innerHTML=a.parentElement.innerHTML,a.parentElement.parentNode.replaceChild(T,a.parentElement)}else{var x=(0,u.a1)(t.startContainer,"data-block","0");x||(e[e.currentMode].element.querySelector("wbr").remove(),x=e[e.currentMode].element.querySelector("p"),x.innerHTML="<wbr>"),n==="check"?(x.insertAdjacentHTML("beforebegin",'<ul data-block="0"><li class="vditor-task"><input type="checkbox" /> '.concat(x.innerHTML,"</li></ul>")),x.remove()):n==="list"?(x.insertAdjacentHTML("beforebegin",'<ul data-block="0"><li>'.concat(x.innerHTML,"</li></ul>")),x.remove()):n==="ordered-list"&&(x.insertAdjacentHTML("beforebegin",'<ol data-block="0"><li>'.concat(x.innerHTML,"</li></ol>")),x.remove())}},jo=function(e,t,n){var o=t.previousElementSibling;if(t&&o){var a=[t];Array.from(n.cloneContents().children).forEach(function(x,T){x.nodeType!==3&&t&&x.textContent.trim()!==""&&t.getAttribute("data-node-id")===x.getAttribute("data-node-id")&&(T!==0&&a.push(t),t=t.nextElementSibling)}),e[e.currentMode].element.querySelectorAll("wbr").forEach(function(x){x.remove()}),n.insertNode(document.createElement("wbr"));var s=o.parentElement,m="";a.forEach(function(x){var T=x.getAttribute("data-marker");T.length!==1&&(T="1".concat(T.slice(-1))),m+='<li data-node-id="'.concat(x.getAttribute("data-node-id"),'" data-marker="').concat(T,'">').concat(x.innerHTML,"</li>"),x.remove()}),o.insertAdjacentHTML("beforeend","<".concat(s.tagName,' data-block="0">').concat(m,"</").concat(s.tagName,">")),e.currentMode==="wysiwyg"?s.outerHTML=e.lute.SpinVditorDOM(s.outerHTML):s.outerHTML=e.lute.SpinVditorIRDOM(s.outerHTML),(0,F.ib)(e[e.currentMode].element,n);var C=(0,u.O9)(n.startContainer);C&&C.querySelectorAll(".vditor-".concat(e.currentMode,"__preview[data-render='2']")).forEach(function(x){Ie(x,e),e.currentMode==="wysiwyg"&&x.previousElementSibling.setAttribute("style","display:none")}),Ae(e),kn(e)}else e[e.currentMode].element.focus()},Ci=function(e,t,n,o){var a=(0,u.lG)(t.parentElement,"LI");if(a){e[e.currentMode].element.querySelectorAll("wbr").forEach(function(W){W.remove()}),n.insertNode(document.createElement("wbr"));var s=t.parentElement,m=s.cloneNode(),C=[t];Array.from(n.cloneContents().children).forEach(function(W,te){W.nodeType!==3&&t&&W.textContent.trim()!==""&&t.getAttribute("data-node-id")===W.getAttribute("data-node-id")&&(te!==0&&C.push(t),t=t.nextElementSibling)});var x=!1,T="";s.querySelectorAll("li").forEach(function(W){x&&(T+=W.outerHTML,!W.nextElementSibling&&!W.previousElementSibling?W.parentElement.remove():W.remove()),W.isSameNode(C[C.length-1])&&(x=!0)}),C.reverse().forEach(function(W){a.insertAdjacentElement("afterend",W)}),T&&(m.innerHTML=T,C[0].insertAdjacentElement("beforeend",m)),e.currentMode==="wysiwyg"?o.outerHTML=e.lute.SpinVditorDOM(o.outerHTML):o.outerHTML=e.lute.SpinVditorIRDOM(o.outerHTML),(0,F.ib)(e[e.currentMode].element,n);var P=(0,u.O9)(n.startContainer);P&&P.querySelectorAll(".vditor-".concat(e.currentMode,"__preview[data-render='2']")).forEach(function(W){Ie(W,e),e.currentMode==="wysiwyg"&&W.previousElementSibling.setAttribute("style","display:none")}),Ae(e),kn(e)}else e[e.currentMode].element.focus()},_r=function(e,t){for(var n=getSelection().getRangeAt(0).startContainer.parentElement,o=e.rows[0].cells.length,a=e.rows.length,s=0,m=0;m<a;m++)for(var C=0;C<o;C++)if(e.rows[m].cells[C].isSameNode(n)){s=C;break}for(var x=0;x<a;x++)e.rows[x].cells[s].setAttribute("align",t)},Ti=function(e){var t=e.trimRight().split(`
`).pop();return t===""?!1:(t.replace(/ |-/g,"")===""||t.replace(/ |_/g,"")===""||t.replace(/ |\*/g,"")==="")&&t.replace(/ /g,"").length>2?!(t.indexOf("-")>-1&&t.trimLeft().indexOf(" ")===-1&&e.trimRight().split(`
`).length>1||t.indexOf("    ")===0||t.indexOf("	")===0):!1},_i=function(e){var t=e.trimRight().split(`
`);return e=t.pop(),e.indexOf("    ")===0||e.indexOf("	")===0||(e=e.trimLeft(),e===""||t.length===0)?!1:e.replace(/-/g,"")===""||e.replace(/=/g,"")===""},Ae=function(e,t){t===void 0&&(t={enableAddUndoStack:!0,enableHint:!1,enableInput:!0}),e.currentMode==="wysiwyg"?fe(e,t):e.currentMode==="ir"?Vt(e,t):e.currentMode==="sv"&&Xe(e,t)},Bo=function(e,t,n,o){var a,s=e.startContainer,m=(0,u.lG)(s,"LI");if(m){if(!(0,d.yl)(o)&&!o.altKey&&o.key==="Enter"&&!o.shiftKey&&n&&m.contains(n)&&n.nextElementSibling)return m&&!m.textContent.endsWith(`
`)&&m.insertAdjacentText("beforeend",`
`),e.insertNode(document.createTextNode(`

`)),e.collapse(!1),Ae(t),o.preventDefault(),!0;if(!(0,d.yl)(o)&&!o.shiftKey&&!o.altKey&&o.key==="Backspace"&&!m.previousElementSibling&&e.toString()===""&&(0,F.im)(m,t[t.currentMode].element,e).start===0)return m.nextElementSibling?(m.parentElement.insertAdjacentHTML("beforebegin",'<p data-block="0"><wbr>'.concat(m.innerHTML,"</p>")),m.remove()):m.parentElement.outerHTML='<p data-block="0"><wbr>'.concat(m.innerHTML,"</p>"),(0,F.ib)(t[t.currentMode].element,e),Ae(t),o.preventDefault(),!0;if(!(0,d.yl)(o)&&!o.shiftKey&&!o.altKey&&o.key==="Backspace"&&m.textContent.trim().replace(h.g.ZWSP,"")===""&&e.toString()===""&&((a=m.previousElementSibling)===null||a===void 0?void 0:a.tagName)==="LI")return m.previousElementSibling.insertAdjacentText("beforeend",`

`),e.selectNodeContents(m.previousElementSibling),e.collapse(!1),m.remove(),(0,F.ib)(t[t.currentMode].element,e),Ae(t),o.preventDefault(),!0;if(!(0,d.yl)(o)&&!o.altKey&&o.key==="Tab"){var C=!1;if((e.startOffset===0&&(s.nodeType===3&&!s.previousSibling||s.nodeType!==3&&s.nodeName==="LI")||m.classList.contains("vditor-task")&&e.startOffset===1&&s.previousSibling.nodeType!==3&&s.previousSibling.tagName==="INPUT")&&(C=!0),C||e.toString()!=="")return o.shiftKey?Ci(t,m,e,m.parentElement):jo(t,m,e),o.preventDefault(),!0}}return!1},Li=function(e,t,n){if(e.options.tab&&n.key==="Tab")return n.shiftKey||(t.toString()===""?(t.insertNode(document.createTextNode(e.options.tab)),t.collapse(!1)):(t.extractContents(),t.insertNode(document.createTextNode(e.options.tab)),t.collapse(!1))),(0,F.Hc)(t),Ae(e),n.preventDefault(),!0},Fo=function(e,t,n,o){if(n){if(!(0,d.yl)(e)&&!e.altKey&&e.key==="Enter"){var a=String.raw(Yo||(Yo=Tl(["",""],["",""])),n.textContent).replace(/\\\|/g,"").trim(),s=a.split("|");if(a.startsWith("|")&&a.endsWith("|")&&s.length>3){var m=s.map(function(){return"---"}).join("|");return m=n.textContent+`
`+m.substring(3,m.length-3)+`
|<wbr>`,n.outerHTML=t.lute.SpinVditorDOM(m),(0,F.ib)(t[t.currentMode].element,o),Ae(t),Ge(t),e.preventDefault(),!0}if(Ti(n.innerHTML)&&n.previousElementSibling){var C="",x=n.innerHTML.trimRight().split(`
`);return x.length>1&&(x.pop(),C='<p data-block="0">'.concat(x.join(`
`),"</p>")),n.insertAdjacentHTML("afterend","".concat(C,`<hr data-block="0"><p data-block="0"><wbr>
</p>`)),n.remove(),(0,F.ib)(t[t.currentMode].element,o),Ae(t),Ge(t),e.preventDefault(),!0}if(_i(n.innerHTML))return t.currentMode==="wysiwyg"?n.outerHTML=t.lute.SpinVditorDOM(n.innerHTML+`<p data-block="0"><wbr>
</p>`):n.outerHTML=t.lute.SpinVditorIRDOM(n.innerHTML+`<p data-block="0"><wbr>
</p>`),(0,F.ib)(t[t.currentMode].element,o),Ae(t),Ge(t),e.preventDefault(),!0}if(o.collapsed&&n.previousElementSibling&&e.key==="Backspace"&&!(0,d.yl)(e)&&!e.altKey&&!e.shiftKey&&n.textContent.trimRight().split(`
`).length>1&&(0,F.im)(n,t[t.currentMode].element,o).start===0){var T=(0,u.DX)(n.previousElementSibling);return T.textContent.endsWith(`
`)||(T.textContent=T.textContent+`
`),T.parentElement.insertAdjacentHTML("beforeend","<wbr>".concat(n.innerHTML)),n.remove(),(0,F.ib)(t[t.currentMode].element,o),!1}return!1}},Uo=function(e,t,n){for(var o="",a=0;a<n.parentElement.childElementCount;a++)o+='<td align="'.concat(n.parentElement.children[a].getAttribute("align"),'"> </td>');n.tagName==="TH"?n.parentElement.parentElement.insertAdjacentHTML("afterend","<tbody><tr>".concat(o,"</tr></tbody>")):n.parentElement.insertAdjacentHTML("afterend","<tr>".concat(o,"</tr>")),Ae(e)},Vo=function(e,t,n){for(var o="",a=0;a<n.parentElement.childElementCount;a++)n.tagName==="TH"?o+='<th align="'.concat(n.parentElement.children[a].getAttribute("align"),'"> </th>'):o+='<td align="'.concat(n.parentElement.children[a].getAttribute("align"),'"> </td>');if(n.tagName==="TH"){n.parentElement.parentElement.insertAdjacentHTML("beforebegin","<thead><tr>".concat(o,"</tr></thead>")),t.insertNode(document.createElement("wbr"));var s=n.parentElement.innerHTML.replace(/<th>/g,"<td>").replace(/<\/th>/g,"</td>");n.parentElement.parentElement.nextElementSibling.insertAdjacentHTML("afterbegin",s),n.parentElement.parentElement.remove(),(0,F.ib)(e.ir.element,t)}else n.parentElement.insertAdjacentHTML("beforebegin","<tr>".concat(o,"</tr>"));Ae(e)},Lr=function(e,t,n,o){o===void 0&&(o="afterend");for(var a=0,s=n.previousElementSibling;s;)a++,s=s.previousElementSibling;for(var m=0;m<t.rows.length;m++)m===0?t.rows[m].cells[a].insertAdjacentHTML(o,"<th> </th>"):t.rows[m].cells[a].insertAdjacentHTML(o,"<td> </td>");Ae(e)},Wo=function(e,t,n){if(n.tagName==="TD"){var o=n.parentElement.parentElement;n.parentElement.previousElementSibling?t.selectNodeContents(n.parentElement.previousElementSibling.lastElementChild):t.selectNodeContents(o.previousElementSibling.lastElementChild.lastElementChild),o.childElementCount===1?o.remove():n.parentElement.remove(),t.collapse(!1),(0,F.Hc)(t),Ae(e)}},Ko=function(e,t,n,o){for(var a=0,s=o.previousElementSibling;s;)a++,s=s.previousElementSibling;(o.previousElementSibling||o.nextElementSibling)&&(t.selectNodeContents(o.previousElementSibling||o.nextElementSibling),t.collapse(!0));for(var m=0;m<n.rows.length;m++){var C=n.rows[m].cells;if(C.length===1){n.remove(),kn(e);break}C[a].remove()}(0,F.Hc)(t),Ae(e)},qo=function(e,t,n){var o=n.startContainer,a=(0,u.lG)(o,"TD")||(0,u.lG)(o,"TH");if(a){if(!(0,d.yl)(t)&&!t.altKey&&t.key==="Enter"){(!a.lastElementChild||a.lastElementChild&&(!a.lastElementChild.isSameNode(a.lastChild)||a.lastElementChild.tagName!=="BR"))&&a.insertAdjacentHTML("beforeend","<br>");var s=document.createElement("br");return n.insertNode(s),n.setStartAfter(s),Ae(e),Ge(e),t.preventDefault(),!0}if(t.key==="Tab"){if(t.shiftKey)return Ro(a,n),t.preventDefault(),!0;var m=a.nextElementSibling;return m||(a.parentElement.nextElementSibling?m=a.parentElement.nextElementSibling.firstElementChild:a.parentElement.parentElement.tagName==="THEAD"&&a.parentElement.parentElement.nextElementSibling?m=a.parentElement.parentElement.nextElementSibling.firstElementChild.firstElementChild:m=null),m&&(n.selectNodeContents(m),(0,F.Hc)(n)),t.preventDefault(),!0}var C=a.parentElement.parentElement.parentElement;if(t.key==="ArrowUp"){if(t.preventDefault(),a.tagName==="TH")return C.previousElementSibling?(n.selectNodeContents(C.previousElementSibling),n.collapse(!1),(0,F.Hc)(n)):Gn(e,"beforebegin"),!0;for(var x=0,T=a.parentElement;x<T.cells.length&&!T.cells[x].isSameNode(a);x++);var P=T.previousElementSibling;return P||(P=T.parentElement.previousElementSibling.firstChild),n.selectNodeContents(P.cells[x]),n.collapse(!1),(0,F.Hc)(n),!0}if(t.key==="ArrowDown"){t.preventDefault();var T=a.parentElement;if(!T.nextElementSibling&&a.tagName==="TD")return C.nextElementSibling?(n.selectNodeContents(C.nextElementSibling),n.collapse(!0),(0,F.Hc)(n)):Gn(e,"afterend"),!0;for(var x=0;x<T.cells.length&&!T.cells[x].isSameNode(a);x++);var m=T.nextElementSibling;return m||(m=T.parentElement.nextElementSibling.firstChild),n.selectNodeContents(m.cells[x]),n.collapse(!0),(0,F.Hc)(n),!0}if(e.currentMode==="wysiwyg"&&!(0,d.yl)(t)&&t.key==="Enter"&&!t.shiftKey&&t.altKey){var W=e.wysiwyg.popover.querySelector(".vditor-input");return W.focus(),W.select(),t.preventDefault(),!0}if(!(0,d.yl)(t)&&!t.shiftKey&&!t.altKey&&t.key==="Backspace"&&n.startOffset===0&&n.toString()===""){var te=Ro(a,n,!1);return!te&&C&&(C.textContent.trim()===""?(C.outerHTML=`<p data-block="0"><wbr>
</p>`,(0,F.ib)(e[e.currentMode].element,n)):(n.setStartBefore(C),n.collapse(!0)),Ae(e)),t.preventDefault(),!0}if(j("⇧⌘F",t))return Vo(e,n,a),t.preventDefault(),!0;if(j("⌘=",t))return Uo(e,n,a),t.preventDefault(),!0;if(j("⇧⌘G",t))return Lr(e,C,a,"beforebegin"),t.preventDefault(),!0;if(j("⇧⌘=",t))return Lr(e,C,a),t.preventDefault(),!0;if(j("⌘-",t))return Wo(e,n,a),t.preventDefault(),!0;if(j("⇧⌘-",t))return Ko(e,n,C,a),t.preventDefault(),!0;if(j("⇧⌘L",t)){if(e.currentMode==="ir")return _r(C,"left"),Ae(e),t.preventDefault(),!0;var ne=e.wysiwyg.popover.querySelector('[data-type="left"]');if(ne)return ne.click(),t.preventDefault(),!0}if(j("⇧⌘C",t)){if(e.currentMode==="ir")return _r(C,"center"),Ae(e),t.preventDefault(),!0;var ne=e.wysiwyg.popover.querySelector('[data-type="center"]');if(ne)return ne.click(),t.preventDefault(),!0}if(j("⇧⌘R",t)){if(e.currentMode==="ir")return _r(C,"right"),Ae(e),t.preventDefault(),!0;var ne=e.wysiwyg.popover.querySelector('[data-type="right"]');if(ne)return ne.click(),t.preventDefault(),!0}}return!1},$o=function(e,t,n,o){if(n.tagName==="PRE"&&j("⌘A",t))return o.selectNodeContents(n.firstElementChild),t.preventDefault(),!0;if(e.options.tab&&t.key==="Tab"&&!t.shiftKey&&o.toString()==="")return o.insertNode(document.createTextNode(e.options.tab)),o.collapse(!1),Ae(e),t.preventDefault(),!0;if(t.key==="Backspace"&&!(0,d.yl)(t)&&!t.shiftKey&&!t.altKey){var a=(0,F.im)(n,e[e.currentMode].element,o);if((a.start===0||a.start===1&&n.innerText===`
`)&&o.toString()==="")return n.parentElement.outerHTML='<p data-block="0"><wbr>'.concat(n.firstElementChild.innerHTML,"</p>"),(0,F.ib)(e[e.currentMode].element,o),Ae(e),t.preventDefault(),!0}return!(0,d.yl)(t)&&!t.altKey&&t.key==="Enter"?(n.firstElementChild.textContent.endsWith(`
`)||n.firstElementChild.insertAdjacentText("beforeend",`
`),o.extractContents(),o.insertNode(document.createTextNode(`
`)),o.collapse(!1),(0,F.Hc)(o),(0,d.vU)()||(e.currentMode==="wysiwyg"?Cr(e,o):Z(e,o)),Ge(e),t.preventDefault(),!0):!1},zo=function(e,t,n,o){var a=t.startContainer,s=(0,u.lG)(a,"BLOCKQUOTE");if(s&&t.toString()===""){if(n.key==="Backspace"&&!(0,d.yl)(n)&&!n.shiftKey&&!n.altKey&&(0,F.im)(s,e[e.currentMode].element,t).start===0)return t.insertNode(document.createElement("wbr")),s.outerHTML=s.innerHTML,(0,F.ib)(e[e.currentMode].element,t),Ae(e),n.preventDefault(),!0;if(o&&n.key==="Enter"&&!(0,d.yl)(n)&&!n.shiftKey&&!n.altKey&&o.parentElement.tagName==="BLOCKQUOTE"){var m=!1;if(o.innerHTML.replace(h.g.ZWSP,"")===`
`||o.innerHTML.replace(h.g.ZWSP,"")===""?(m=!0,o.remove()):o.innerHTML.endsWith(`

`)&&(0,F.im)(o,e[e.currentMode].element,t).start===o.textContent.length-1&&(o.innerHTML=o.innerHTML.substr(0,o.innerHTML.length-2),m=!0),m)return s.insertAdjacentHTML("afterend",'<p data-block="0">'.concat(h.g.ZWSP,`<wbr>
</p>`)),(0,F.ib)(e[e.currentMode].element,t),Ae(e),n.preventDefault(),!0}var C=(0,u.F9)(a);if(e.currentMode==="wysiwyg"&&C&&j("⇧⌘;",n))return t.insertNode(document.createElement("wbr")),C.outerHTML='<blockquote data-block="0">'.concat(C.outerHTML,"</blockquote>"),(0,F.ib)(e.wysiwyg.element,t),fe(e),n.preventDefault(),!0;if(Jn(e,n,t,s,s)||xn(e,n,t,s,s))return!0}return!1},Go=function(e,t,n){var o=t.startContainer,a=(0,u.lG)(o,"LI");if(a&&a.classList.contains("vditor-task")){if(j("⇧⌘J",n)){var s=a.firstElementChild;return s.checked?s.removeAttribute("checked"):s.setAttribute("checked","checked"),Ae(e),n.preventDefault(),!0}if(n.key==="Backspace"&&!(0,d.yl)(n)&&!n.shiftKey&&!n.altKey&&t.toString()===""&&t.startOffset===1&&(o.nodeType===3&&o.previousSibling&&o.previousSibling.tagName==="INPUT"||o.nodeType!==3)){var m=a.previousElementSibling;if(a.querySelector("input").remove(),m){var C=(0,u.DX)(m);C.parentElement.insertAdjacentHTML("beforeend","<wbr>"+a.innerHTML.trim()),a.remove()}else a.parentElement.insertAdjacentHTML("beforebegin",'<p data-block="0"><wbr>'.concat(a.innerHTML.trim()||`
`,"</p>")),a.nextElementSibling?a.remove():a.parentElement.remove();return(0,F.ib)(e[e.currentMode].element,t),Ae(e),n.preventDefault(),!0}if(n.key==="Enter"&&!(0,d.yl)(n)&&!n.shiftKey&&!n.altKey){if(a.textContent.trim()==="")if((0,u.fb)(a.parentElement,"vditor-task")){var x=(0,u.O9)(o);x&&Ci(e,a,t,x)}else if(a.nextElementSibling){var T="",P="",W=!1;Array.from(a.parentElement.children).forEach(function(ce){a.isSameNode(ce)?W=!0:W?T+=ce.outerHTML:P+=ce.outerHTML});var te=a.parentElement.tagName,ne=a.parentElement.tagName==="OL"?"":' data-marker="'.concat(a.parentElement.getAttribute("data-marker"),'"'),Q="";P&&(Q=a.parentElement.tagName==="UL"?"":' start="1"',P="<".concat(te,' data-tight="true"').concat(ne,' data-block="0">').concat(P,"</").concat(te,">")),a.parentElement.outerHTML="".concat(P,`<p data-block="0"><wbr>
</p><`).concat(te,`
 data-tight="true"`).concat(ne,' data-block="0"').concat(Q,">").concat(T,"</").concat(te,">")}else a.parentElement.insertAdjacentHTML("afterend",`<p data-block="0"><wbr>
</p>`),a.parentElement.querySelectorAll("li").length===1?a.parentElement.remove():a.remove();else o.nodeType!==3&&t.startOffset===0&&o.firstChild.tagName==="INPUT"?t.setStart(o.childNodes[1],1):(t.setEndAfter(a.lastChild),a.insertAdjacentHTML("afterend",'<li class="vditor-task" data-marker="'.concat(a.getAttribute("data-marker"),'"><input type="checkbox"> <wbr></li>')),document.querySelector("wbr").after(t.extractContents()));return(0,F.ib)(e[e.currentMode].element,t),Ae(e),Ge(e),n.preventDefault(),!0}}return!1},Jo=function(e,t,n,o){if(t.startContainer.nodeType!==3){var a=t.startContainer.children[t.startOffset];if(a&&a.tagName==="HR")return t.selectNodeContents(a.previousElementSibling),t.collapse(!1),n.preventDefault(),!0}if(o){var s=o.previousElementSibling;if(s&&(0,F.im)(o,e[e.currentMode].element,t).start===0&&((0,d.vU)()&&s.tagName==="HR"||s.tagName==="TABLE")){if(s.tagName==="TABLE"){var m=s.lastElementChild.lastElementChild.lastElementChild;m.innerHTML=m.innerHTML.trimLeft()+"<wbr>"+o.textContent.trim(),o.remove()}else s.remove();return(0,F.ib)(e[e.currentMode].element,t),Ae(e),n.preventDefault(),!0}}return!1},Zo=function(e){(0,d.vU)()&&e.startContainer.nodeType!==3&&e.startContainer.tagName==="HR"&&e.setStartBefore(e.startContainer)},Xo=function(e,t,n){var o,a;if(!(0,d.vU)())return!1;if(e.key==="ArrowUp"&&t&&((o=t.previousElementSibling)===null||o===void 0?void 0:o.tagName)==="TABLE"){var s=t.previousElementSibling;return n.selectNodeContents(s.rows[s.rows.length-1].lastElementChild),n.collapse(!1),e.preventDefault(),!0}return e.key==="ArrowDown"&&t&&((a=t.nextElementSibling)===null||a===void 0?void 0:a.tagName)==="TABLE"?(n.selectNodeContents(t.nextElementSibling.rows[0].cells[0]),n.collapse(!0),e.preventDefault(),!0):!1},Mr=function(e,t,n){return Oo(void 0,void 0,void 0,function(){var o,a,s,m,C,x,T,P,W,te,ne,Q,ce,ee,le,ee,ge;return Ho(this,function(ue){switch(ue.label){case 0:return e[e.currentMode].element.getAttribute("contenteditable")!=="true"?[2]:(t.stopPropagation(),t.preventDefault(),"clipboardData"in t?(o=t.clipboardData.getData("text/html"),a=t.clipboardData.getData("text/plain"),s=t.clipboardData.files):(o=t.dataTransfer.getData("text/html"),a=t.dataTransfer.getData("text/plain"),t.dataTransfer.types.includes("Files")&&(s=t.dataTransfer.items)),m={},C=function(Ee,Be){if(!Be)return["",Lute.WalkContinue];if(e.options.upload.renderLinkDest)return e.options.upload.renderLinkDest(e,Ee,Be);var Re=Ee.TokensStr();if(Ee.__internal_object__.Parent.Type===34&&Re&&Re.indexOf("file://")===-1&&e.options.upload.linkToImgUrl){var Ue=new XMLHttpRequest;Ue.open("POST",e.options.upload.linkToImgUrl),e.options.upload.token&&Ue.setRequestHeader("X-Upload-Token",e.options.upload.token),e.options.upload.withCredentials&&(Ue.withCredentials=!0),Do(e,Ue),Ue.setRequestHeader("Content-Type","application/json; charset=utf-8"),Ue.onreadystatechange=function(){if(Ue.readyState===XMLHttpRequest.DONE){if(Ue.status===200){var bt=Ue.responseText;e.options.upload.linkToImgFormat&&(bt=e.options.upload.linkToImgFormat(Ue.responseText));var rt=JSON.parse(bt);if(rt.code!==0){e.tip.show(rt.msg);return}var vt=rt.data.originalURL;if(e.currentMode==="sv")e.sv.element.querySelectorAll(".vditor-sv__marker--link").forEach(function(Je){Je.textContent===vt&&(Je.textContent=rt.data.url)});else{var Me=e[e.currentMode].element.querySelector('img[src="'.concat(vt,'"]'));Me.src=rt.data.url,e.currentMode==="ir"&&(Me.previousElementSibling.previousElementSibling.innerHTML=rt.data.url)}Ae(e)}else e.tip.show(Ue.responseText);e.options.upload.linkToImgCallback&&e.options.upload.linkToImgCallback(Ue.responseText)}},Ue.send(JSON.stringify({url:Re}))}return e.currentMode==="ir"?['<span class="vditor-ir__marker vditor-ir__marker--link">'.concat(Lute.EscapeHTMLStr(Re),"</span>"),Lute.WalkContinue]:e.currentMode==="wysiwyg"?["",Lute.WalkContinue]:['<span class="vditor-sv__marker--link">'.concat(Lute.EscapeHTMLStr(Re),"</span>"),Lute.WalkContinue]},(o.replace(/&amp;/g,"&").replace(/<(|\/)(html|body|meta)[^>]*?>/ig,"").trim()==='<a href="'.concat(a,'">').concat(a,"</a>")||o.replace(/&amp;/g,"&").replace(/<(|\/)(html|body|meta)[^>]*?>/ig,"").trim()==='<!--StartFragment--><a href="'.concat(a,'">').concat(a,"</a><!--EndFragment-->"))&&(o=""),x=new DOMParser().parseFromString(o,"text/html"),x.body&&(o=x.body.innerHTML),o=Lute.Sanitize(o),e.wysiwyg.getComments(e),T=e[e.currentMode].element.scrollHeight,P=qe(o,a,e.currentMode),W=e.currentMode==="sv"?(0,u.a1)(t.target,"data-type","code-block"):(0,u.lG)(t.target,"CODE"),W?(e.currentMode==="sv"?document.execCommand("insertHTML",!1,a.replace(/&/g,"&amp;").replace(/</g,"&lt;")):(te=(0,F.im)(t.target,e[e.currentMode].element),W.parentElement.tagName!=="PRE"&&(a+=h.g.ZWSP),W.textContent=W.textContent.substring(0,te.start)+a+W.textContent.substring(te.end),(0,F.$j)(te.start+a.length,te.start+a.length,W.parentElement),!((ge=W.parentElement)===null||ge===void 0)&&ge.nextElementSibling.classList.contains("vditor-".concat(e.currentMode,"__preview"))&&(W.parentElement.nextElementSibling.innerHTML=W.outerHTML,Ie(W.parentElement.nextElementSibling,e))),[3,10]):[3,1]);case 1:return P?(n.pasteCode(P),[3,10]):[3,2];case 2:return o.trim()===""?[3,5]:(ne=document.createElement("div"),ne.innerHTML=o,e.options.upload.base64ToLink?[3,4]:[4,Ml(e,ne,("clipboardData"in t?t.clipboardData:t.dataTransfer).getData("text/rtf"))]);case 3:ue.sent(),ue.label=4;case 4:return ne.querySelectorAll("[style]").forEach(function(Ee){Ee.removeAttribute("style")}),ne.querySelectorAll(".vditor-copy").forEach(function(Ee){Ee.remove()}),e.currentMode==="ir"?(m.HTML2VditorIRDOM={renderLinkDest:C},e.lute.SetJSRenderers({renderers:m}),(0,F.oC)(e.lute.HTML2VditorIRDOM(ne.innerHTML),e)):e.currentMode==="wysiwyg"?(m.HTML2VditorDOM={renderLinkDest:C},e.lute.SetJSRenderers({renderers:m}),(0,F.oC)(e.lute.HTML2VditorDOM(ne.innerHTML),e)):(m.Md2VditorSVDOM={renderLinkDest:C},e.lute.SetJSRenderers({renderers:m}),Ei(e,e.lute.HTML2Md(ne.innerHTML).trimRight())),e.outline.render(e),[3,10];case 5:return s.length>0?e.options.upload.url||e.options.upload.handler?[4,Si(e,s)]:[3,7]:[3,9];case 6:return ue.sent(),[3,8];case 7:Q=new FileReader,"clipboardData"in t?(s=t.clipboardData.files,ce=s[0]):t.dataTransfer.types.includes("Files")&&(s=t.dataTransfer.items,ce=s[0].getAsFile()),ce&&ce.type.startsWith("image")&&(Q.readAsDataURL(ce),Q.onload=function(){var Ee="";e.currentMode==="wysiwyg"?Ee+='<img alt="'.concat(ce.name,'" src="').concat(Q.result.toString(),`">
`):Ee+="![".concat(ce.name,"](").concat(Q.result.toString(),`)
`),document.execCommand("insertHTML",!1,Ee)}),ue.label=8;case 8:return[3,10];case 9:a.trim()!==""&&s.length===0&&(ee=(0,F.zh)(e),ee.toString()!==""&&e.lute.IsValidLinkDest(a)&&(a="[".concat(ee.toString(),"](").concat(a,")")),e.currentMode==="ir"?(m.Md2VditorIRDOM={renderLinkDest:C},e.lute.SetJSRenderers({renderers:m}),(0,F.oC)(Lute.Sanitize(e.lute.Md2VditorIRDOM(a)),e)):e.currentMode==="wysiwyg"?(m.Md2VditorDOM={renderLinkDest:C},e.lute.SetJSRenderers({renderers:m}),(0,F.oC)(Lute.Sanitize(e.lute.Md2VditorDOM(a)),e)):(m.Md2VditorSVDOM={renderLinkDest:C},e.lute.SetJSRenderers({renderers:m}),Ei(e,a)),e.outline.render(e)),ue.label=10;case 10:return e.currentMode!=="sv"&&(le=(0,u.F9)((0,F.zh)(e).startContainer),le&&(ee=(0,F.zh)(e),e[e.currentMode].element.querySelectorAll("wbr").forEach(function(Ee){Ee.remove()}),ee.insertNode(document.createElement("wbr")),e.currentMode==="wysiwyg"?le.outerHTML=e.lute.SpinVditorDOM(le.outerHTML):le.outerHTML=e.lute.SpinVditorIRDOM(le.outerHTML),(0,F.ib)(e[e.currentMode].element,ee)),e[e.currentMode].element.querySelectorAll(".vditor-".concat(e.currentMode,"__preview[data-render='2']")).forEach(function(Ee){Ie(Ee,e)})),e.wysiwyg.triggerRemoveComment(e),Ae(e),e[e.currentMode].element.scrollHeight-T>Math.min(e[e.currentMode].element.clientHeight,window.innerHeight)/2&&Ge(e),[2]}})})},Ml=function(e,t,n){return Oo(void 0,void 0,void 0,function(){var o,a,s,m,C,x,T,P,W,ce,te,ne,Q,ce,le,ee;return Ho(this,function(ge){switch(ge.label){case 0:if(!n)return[2];if(o=/{\\pict[\s\S]+?\\bliptag-?\d+(\\blipupi-?\d+)?({\\\*\\blipuid\s?[\da-fA-F]+)?[\s}]*?/,a=new RegExp("(?:("+o.source+"))([\\da-fA-F\\s]+)\\}","g"),s=n.match(a),m=[],s)for(C=0,x=s;C<x.length;C++)T=x[C],P=void 0,T.includes("\\pngblip")?P="image/png":T.includes("\\jpegblip")&&(P="image/jpeg"),P&&m.push({hex:T.replace(o,"").replace(/[^\da-fA-F]/g,""),type:P});for(W=[],Mi(t,function(ue){if(ue.tagName==="V:SHAPE")return Mi(ue,function(Ee){Ee.tagName==="V:IMAGEDATA"&&W.push({shape:ue,img:Ee})}),!1}),ce=0;ce<W.length;ce++)te=document.createElement("img"),ne="data:"+m[ce].type+";base64,"+btoa((m[ce].hex.match(/\w{2}/g)||[]).map(function(ue){return String.fromCharCode(parseInt(ue,16))}).join("")),te.src=ne,te.title=W[ce].img.getAttribute("title"),W[ce].shape.parentNode.replaceChild(te,W[ce].shape);Q=t.querySelectorAll("img"),ce=0,ge.label=1;case 1:return ce<Q.length?(le=Q[ce].src||"",le?(ee=Q[ce],[4,e.options.upload.base64ToLink(le)]):[3,3]):[3,4];case 2:ee.src=ge.sent(),ge.label=3;case 3:return ce++,[3,1];case 4:return[2]}})})},Mi=function(e,t){var n=t(e);if(n!==!1)for(var o=0;o<e.children.length;o++)Mi(e.children[o],t)},Yo,Qo=function(e){var t,n;e.hint.render(e);var o=(0,F.zh)(e).startContainer,a=(0,u.a1)(o,"data-type","code-block-info");if(a)if(a.textContent.replace(h.g.ZWSP,"")===""&&e.hint.recentLanguage){a.textContent=h.g.ZWSP+e.hint.recentLanguage;var s=(0,F.zh)(e);s.selectNodeContents(a)}else{var m=[],C=a.textContent.substring(0,(0,F.im)(a,e.ir.element).start).replace(h.g.ZWSP,"");(e.options.preview.hljs.langs||h.g.ALIAS_CODE_LANGUAGES.concat(((n=(t=window.hljs)===null||t===void 0?void 0:t.listLanguages())!==null&&n!==void 0?n:[]).sort())).forEach(function(x){x.indexOf(C.toLowerCase())>-1&&m.push({html:x,value:x})}),e.hint.genHTML(m,C,e)}},Vt=function(e,t){t===void 0&&(t={enableAddUndoStack:!0,enableHint:!1,enableInput:!0}),t.enableHint&&Qo(e),clearTimeout(e.ir.processTimeoutId),e.ir.processTimeoutId=window.setTimeout(function(){if(!e.ir.composingLock){var n=H(e);typeof e.options.input=="function"&&t.enableInput&&e.options.input(n),e.options.counter.enable&&e.counter.render(e,n),e.options.cache.enable&&(0,d.pK)()&&(localStorage.setItem(e.options.cache.id,n),e.options.cache.after&&e.options.cache.after(n)),e.devtools&&e.devtools.renderEchart(e),t.enableAddUndoStack&&e.undo.addToUndoStack(e)}},e.options.undoDelay)},Zn=function(e,t){var n=(0,F.zh)(e),o=(0,u.F9)(n.startContainer)||n.startContainer;if(o){var a=o.querySelector(".vditor-ir__marker--heading");a?a.innerHTML=t:(o.insertAdjacentText("afterbegin",t),n.selectNodeContents(o),n.collapse(!1)),Z(e,n.cloneRange()),be(e)}},Ar=function(e,t,n){var o=(0,u.a1)(e.startContainer,"data-type",n);if(o){o.firstElementChild.remove(),o.lastElementChild.remove(),e.insertNode(document.createElement("wbr"));var a=document.createElement("div");a.innerHTML=t.lute.SpinVditorIRDOM(o.outerHTML),o.outerHTML=a.firstElementChild.innerHTML.trim()}},Al=function(e,t,n,o){var a=(0,F.zh)(e),s=t.getAttribute("data-type"),m=a.startContainer;m.nodeType===3&&(m=m.parentElement);var C=!0;if(t.classList.contains("vditor-menu--current"))if(s==="quote"){var x=(0,u.lG)(m,"BLOCKQUOTE");x&&(a.insertNode(document.createElement("wbr")),x.outerHTML=x.innerHTML.trim()===""?'<p data-block="0">'.concat(x.innerHTML,"</p>"):x.innerHTML)}else if(s==="link"){var T=(0,u.a1)(a.startContainer,"data-type","a");if(T){var P=(0,u.fb)(a.startContainer,"vditor-ir__link");P?(a.insertNode(document.createElement("wbr")),T.outerHTML=P.innerHTML):T.outerHTML=T.querySelector(".vditor-ir__link").innerHTML+"<wbr>"}}else s==="italic"?Ar(a,e,"em"):s==="bold"?Ar(a,e,"strong"):s==="strike"?Ar(a,e,"s"):s==="inline-code"?Ar(a,e,"code"):(s==="check"||s==="list"||s==="ordered-list")&&(Tr(e,a,s),C=!1,t.classList.remove("vditor-menu--current"));else{e.ir.element.childNodes.length===0&&(e.ir.element.innerHTML='<p data-block="0"><wbr></p>',(0,F.ib)(e.ir.element,a));var W=(0,u.F9)(a.startContainer);if(s==="line"){if(W){var te=`<hr data-block="0"><p data-block="0"><wbr>
</p>`;W.innerHTML.trim()===""?W.outerHTML=te:W.insertAdjacentHTML("afterend",te)}}else if(s==="quote")W&&(a.insertNode(document.createElement("wbr")),W.outerHTML='<blockquote data-block="0">'.concat(W.outerHTML,"</blockquote>"),C=!1,t.classList.add("vditor-menu--current"));else if(s==="link"){var ne=void 0;a.toString()===""?ne="".concat(n,"<wbr>").concat(o):ne="".concat(n).concat(a.toString()).concat(o.replace(")","<wbr>)")),document.execCommand("insertHTML",!1,ne),C=!1,t.classList.add("vditor-menu--current")}else if(s==="italic"||s==="bold"||s==="strike"||s==="inline-code"||s==="code"||s==="table"){var ne=void 0;a.toString()===""?ne="".concat(n,"<wbr>").concat(o):(s==="code"?ne="".concat(n,`
`).concat(a.toString(),"<wbr>").concat(o):s==="table"?ne="".concat(n).concat(a.toString(),"<wbr>").concat(o):ne="".concat(n).concat(a.toString()).concat(o,"<wbr>"),a.deleteContents()),(s==="table"||s==="code")&&(ne=`
`+ne+`

`);var Q=document.createElement("span");Q.innerHTML=ne,a.insertNode(Q),Z(e,a),s==="table"&&(a.selectNodeContents(getSelection().getRangeAt(0).startContainer.parentElement),(0,F.Hc)(a))}else(s==="check"||s==="list"||s==="ordered-list")&&(Tr(e,a,s,!1),C=!1,E(e.toolbar.elements,["check","list","ordered-list"]),t.classList.add("vditor-menu--current"))}(0,F.ib)(e.ir.element,a),Vt(e),C&&be(e)},kl=function(e,t,n,o){function a(s){return s instanceof n?s:new n(function(m){m(s)})}return new(n||(n=Promise))(function(s,m){function C(P){try{T(o.next(P))}catch(W){m(W)}}function x(P){try{T(o.throw(P))}catch(W){m(W)}}function T(P){P.done?s(P.value):a(P.value).then(C,x)}T((o=o.apply(e,t||[])).next())})},xl=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},o,a,s,m;return m={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(m[Symbol.iterator]=function(){return this}),m;function C(T){return function(P){return x([T,P])}}function x(T){if(o)throw new TypeError("Generator is already executing.");for(;m&&(m=0,T[0]&&(n=0)),n;)try{if(o=1,a&&(s=T[0]&2?a.return:T[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,T[1])).done)return s;switch(a=0,s&&(T=[T[0]&2,s.value]),T[0]){case 0:case 1:s=T;break;case 4:return n.label++,{value:T[1],done:!1};case 5:n.label++,a=T[1],T=[0];continue;case 7:T=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(T[0]===6||T[0]===2)){n=0;continue}if(T[0]===3&&(!s||T[1]>s[0]&&T[1]<s[3])){n.label=T[1];break}if(T[0]===6&&n.label<s[1]){n.label=s[1],s=T;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(T);break}s[2]&&n.ops.pop(),n.trys.pop();continue}T=t.call(e,n)}catch(P){T=[6,P],a=0}finally{o=s=0}if(T[0]&5)throw T[1];return{value:T[0]?T[1]:void 0,done:!0}}},Dl=(function(){function e(t){var n=this;this.splitChar="",this.lastIndex=-1,this.fillEmoji=function(o,a){n.element.style.display="none";var s=decodeURIComponent(o.getAttribute("data-value")),m=window.getSelection().getRangeAt(0);if(a.currentMode==="ir"){var C=(0,u.a1)(m.startContainer,"data-type","code-block-info");if(C){C.textContent=h.g.ZWSP+s.trimRight(),m.selectNodeContents(C),m.collapse(!1),Vt(a),C.parentElement.querySelectorAll("code").forEach(function(W){W.className="language-"+s.trimRight()}),Ie(C.parentElement.querySelector(".vditor-ir__preview"),a),n.recentLanguage=s.trimRight();return}}if(a.currentMode==="wysiwyg"&&m.startContainer.nodeType!==3){var x=m.startContainer,T=void 0;if(x.classList.contains("vditor-input")?T=x:T=x.firstElementChild,T&&T.classList.contains("vditor-input")){T.value=s.trimRight(),m.selectNodeContents(T),m.collapse(!1),T.dispatchEvent(new CustomEvent("input",{detail:1})),n.recentLanguage=s.trimRight();return}}if(m.setStart(m.startContainer,n.lastIndex),m.deleteContents(),a.options.hint.parse?a.currentMode==="sv"?(0,F.oC)(a.lute.SpinVditorSVDOM(s),a):a.currentMode==="wysiwyg"?(0,F.oC)(a.lute.SpinVditorDOM(s),a):(0,F.oC)(a.lute.SpinVditorIRDOM(s),a):(0,F.oC)(s,a),n.splitChar===":"&&s.indexOf(":")>-1&&a.currentMode!=="sv"&&m.insertNode(document.createTextNode(" ")),m.collapse(!1),(0,F.Hc)(m),a.currentMode==="wysiwyg"){var P=(0,u.fb)(m.startContainer,"vditor-wysiwyg__block");P&&P.lastElementChild.classList.contains("vditor-wysiwyg__preview")&&(P.lastElementChild.innerHTML=P.firstElementChild.innerHTML,Ie(P.lastElementChild,a))}else if(a.currentMode==="ir"){var P=(0,u.fb)(m.startContainer,"vditor-ir__marker--pre");P&&P.nextElementSibling.classList.contains("vditor-ir__preview")&&(P.nextElementSibling.innerHTML=P.innerHTML,Ie(P.nextElementSibling,a))}Ae(a)},this.timeId=-1,this.element=document.createElement("div"),this.element.className="vditor-hint",this.recentLanguage="",t.push({key:":"})}return e.prototype.render=function(t){var n=this;if(window.getSelection().focusNode){var o,a=getSelection().getRangeAt(0);o=a.startContainer.textContent.substring(0,a.startOffset)||"";var s=this.getKey(o,t.options.hint.extend);if(typeof s>"u")this.element.style.display="none",clearTimeout(this.timeId);else if(this.splitChar===":"){var m=s===""?t.options.hint.emoji:t.lute.GetEmojis(),C=[];Object.keys(m).forEach(function(x){x.indexOf(s.toLowerCase())===0&&(m[x].indexOf(".")>-1?C.push({html:'<img src="'.concat(m[x],'" title=":').concat(x,':"/> :').concat(x,":"),value:":".concat(x,":")}):C.push({html:'<span class="vditor-hint__emoji">'.concat(m[x],"</span>").concat(x),value:m[x]}))}),this.genHTML(C,s,t)}else t.options.hint.extend.forEach(function(x){x.key===n.splitChar&&(clearTimeout(n.timeId),n.timeId=window.setTimeout(function(){return kl(n,void 0,void 0,function(){var T;return xl(this,function(P){switch(P.label){case 0:return T=this.genHTML,[4,x.hint(s)];case 1:return T.apply(this,[P.sent(),s,t]),[2]}})})},t.options.hint.delay))})}},e.prototype.genHTML=function(t,n,o){var a=this;if(t.length===0){this.element.style.display="none";return}var s=o[o.currentMode].element,m=(0,F.Ny)(s),C=m.left+(o.options.outline.position==="left"?o.outline.element.offsetWidth:0),x=m.top,T="";t.forEach(function(W,te){if(!(te>7)){var ne=W.html;if(n!==""){var Q=ne.lastIndexOf(">")+1,ce=ne.substr(Q),le=ce.toLowerCase().indexOf(n.toLowerCase());le>-1&&(ce=ce.substring(0,le)+"<b>"+ce.substring(le,le+n.length)+"</b>"+ce.substring(le+n.length),ne=ne.substr(0,Q)+ce)}T+='<button type="button" data-value="'.concat(encodeURIComponent(W.value),` "
`).concat(te===0?"class='vditor-hint--current'":"","> ").concat(ne,"</button>")}}),this.element.innerHTML=T;var P=parseInt(document.defaultView.getComputedStyle(s,null).getPropertyValue("line-height"),10);this.element.style.top="".concat(x+(P||22),"px"),this.element.style.left="".concat(C,"px"),this.element.style.display="block",this.element.style.right="auto",this.element.querySelectorAll("button").forEach(function(W){W.addEventListener("click",function(te){a.fillEmoji(W,o),te.preventDefault()})}),this.element.getBoundingClientRect().bottom>window.innerHeight&&(this.element.style.top="".concat(x-this.element.offsetHeight,"px")),this.element.getBoundingClientRect().right>window.innerWidth&&(this.element.style.left="auto",this.element.style.right="0")},e.prototype.select=function(t,n){if(this.element.querySelectorAll("button").length===0||this.element.style.display==="none")return!1;var o=this.element.querySelector(".vditor-hint--current");if(t.key==="ArrowDown")return t.preventDefault(),t.stopPropagation(),o.removeAttribute("class"),o.nextElementSibling?o.nextElementSibling.className="vditor-hint--current":this.element.children[0].className="vditor-hint--current",!0;if(t.key==="ArrowUp"){if(t.preventDefault(),t.stopPropagation(),o.removeAttribute("class"),o.previousElementSibling)o.previousElementSibling.className="vditor-hint--current";else{var a=this.element.children.length;this.element.children[a-1].className="vditor-hint--current"}return!0}else if(!(0,d.yl)(t)&&!t.shiftKey&&!t.altKey&&t.key==="Enter"&&!t.isComposing)return t.preventDefault(),t.stopPropagation(),this.fillEmoji(o,n),!0;return!1},e.prototype.getKey=function(t,n){var o=this;this.lastIndex=-1,this.splitChar="",n.forEach(function(T){var P=t.lastIndexOf(T.key);o.lastIndex<P&&(o.splitChar=T.key,o.lastIndex=P)});var a;if(this.lastIndex===-1)return a;var s=t.split(this.splitChar),m=s[s.length-1],C=32;if(s.length>1&&m.trim()===m)if(s.length===2&&s[0]===""&&s[1].length<C)a=s[1];else{var x=s[s.length-2].slice(-1);(0,y.X)(x)===" "&&m.length<C&&(a=m)}return a},e})(),Ol=(function(){function e(t){this.composingLock=!1;var n=document.createElement("div");n.className="vditor-ir",n.innerHTML='<pre class="vditor-reset" placeholder="'.concat(t.options.placeholder,`"
 contenteditable="true" spellcheck="false"></pre>`),this.element=n.firstElementChild,this.bindEvent(t),hi(t,this.element),Mo(t,this.element),mi(t,this.element),vi(t,this.element),wi(t,this.element),gi(t,this.element),yi(t,this.element,this.copy),bi(t,this.element,this.copy)}return e.prototype.copy=function(t,n){var o=getSelection().getRangeAt(0);if(o.toString()!==""){t.stopPropagation(),t.preventDefault();var a=document.createElement("div");a.appendChild(o.cloneContents()),t.clipboardData.setData("text/plain",n.lute.VditorIRDOM2Md(a.innerHTML).trim()),t.clipboardData.setData("text/html","")}},e.prototype.bindEvent=function(t){var n=this;this.element.addEventListener("paste",function(o){Mr(t,o,{pasteCode:function(a){document.execCommand("insertHTML",!1,a)}})}),this.element.addEventListener("scroll",function(){M(t,["hint"])}),this.element.addEventListener("compositionstart",function(o){n.composingLock=!0}),this.element.addEventListener("compositionend",function(o){(0,d.vU)()||Z(t,getSelection().getRangeAt(0).cloneRange()),n.composingLock=!1}),this.element.addEventListener("input",function(o){if(!(o.inputType==="deleteByDrag"||o.inputType==="insertFromDrop")){if(n.preventInput){n.preventInput=!1,Vt(t,{enableAddUndoStack:!0,enableHint:!0,enableInput:!0});return}n.composingLock||o.data==="‘"||o.data==="“"||o.data==="《"||Z(t,getSelection().getRangeAt(0).cloneRange(),!1,o)}}),this.element.addEventListener("click",function(o){if(o.target.tagName==="INPUT"){o.target.checked?o.target.setAttribute("checked","checked"):o.target.removeAttribute("checked"),n.preventInput=!0,Vt(t);return}var a=(0,F.zh)(t),s=(0,u.fb)(o.target,"vditor-ir__preview");if(s||(s=(0,u.fb)(a.startContainer,"vditor-ir__preview")),s&&(s.previousElementSibling.firstElementChild?a.selectNodeContents(s.previousElementSibling.firstElementChild):a.selectNodeContents(s.previousElementSibling),a.collapse(!0),(0,F.Hc)(a),Ge(t)),o.target.tagName==="IMG"){var m=o.target.parentElement.querySelector(".vditor-ir__marker--link");m&&(a.selectNode(m),(0,F.Hc)(a))}var C=(0,u.a1)(o.target,"data-type","a");if(C&&!C.classList.contains("vditor-ir__node--expand")){t.options.link.click?t.options.link.click(C.querySelector(":scope > .vditor-ir__marker--link")):t.options.link.isOpen&&window.open(C.querySelector(":scope > .vditor-ir__marker--link").textContent);return}if(o.target.isEqualNode(n.element)&&n.element.lastElementChild&&a.collapsed){var x=n.element.lastElementChild.getBoundingClientRect();o.y>x.top+x.height&&(n.element.lastElementChild.tagName==="P"&&n.element.lastElementChild.textContent.trim().replace(h.g.ZWSP,"")===""?(a.selectNodeContents(n.element.lastElementChild),a.collapse(!1)):(n.element.insertAdjacentHTML("beforeend",'<p data-block="0">'.concat(h.g.ZWSP,"<wbr></p>")),(0,F.ib)(n.element,a)))}a.toString()===""?$(a,t):setTimeout(function(){$((0,F.zh)(t),t)}),nn(o,t),be(t)}),this.element.addEventListener("keyup",function(o){if(!(o.isComposing||(0,d.yl)(o))){if(o.key==="Enter"&&Ge(t),be(t),(o.key==="Backspace"||o.key==="Delete")&&t.ir.element.innerHTML!==""&&t.ir.element.childNodes.length===1&&t.ir.element.firstElementChild&&t.ir.element.firstElementChild.tagName==="P"&&t.ir.element.firstElementChild.childElementCount===0&&(t.ir.element.textContent===""||t.ir.element.textContent===`
`)){t.ir.element.innerHTML="";return}var a=(0,F.zh)(t);o.key==="Backspace"?((0,d.vU)()&&a.startContainer.textContent===`
`&&a.startOffset===1&&(a.startContainer.textContent="",$(a,t)),n.element.querySelectorAll(".language-math").forEach(function(m){var C=m.querySelector("br");C&&C.remove()})):o.key.indexOf("Arrow")>-1?((o.key==="ArrowLeft"||o.key==="ArrowRight")&&Qo(t),$(a,t)):o.keyCode===229&&o.code===""&&o.key==="Unidentified"&&$(a,t);var s=(0,u.fb)(a.startContainer,"vditor-ir__preview");if(s){if(o.key==="ArrowUp"||o.key==="ArrowLeft")return s.previousElementSibling.firstElementChild?a.selectNodeContents(s.previousElementSibling.firstElementChild):a.selectNodeContents(s.previousElementSibling),a.collapse(!1),o.preventDefault(),!0;if(s.tagName==="SPAN"&&(o.key==="ArrowDown"||o.key==="ArrowRight"))return s.parentElement.getAttribute("data-type")==="html-entity"?(s.parentElement.insertAdjacentText("afterend",h.g.ZWSP),a.setStart(s.parentElement.nextSibling,1)):a.selectNodeContents(s.parentElement.lastElementChild),a.collapse(!1),o.preventDefault(),!0}}})},e})(),ea=function(e){if(e.currentMode==="sv")return e.lute.Md2HTML(H(e));if(e.currentMode==="wysiwyg")return e.lute.VditorDOM2HTML(e.wysiwyg.element.innerHTML);if(e.currentMode==="ir")return e.lute.VditorIRDOM2HTML(e.ir.element.innerHTML)},Hl=f(214),ta=f(436),Nl=(function(){function e(t){this.element=document.createElement("div"),this.element.className="vditor-outline",this.element.innerHTML='<div class="vditor-outline__title">'.concat(t,`</div>
<div class="vditor-outline__content"></div>`)}return e.prototype.render=function(t){var n="";return t.preview.element.style.display==="block"?n=(0,ta.k)(t.preview.previewElement,this.element.lastElementChild,t):n=(0,ta.k)(t[t.currentMode].element,this.element.lastElementChild,t),n},e.prototype.toggle=function(t,n,o){var a;n===void 0&&(n=!0),o===void 0&&(o=!0);var s=(a=t.toolbar.elements.outline)===null||a===void 0?void 0:a.firstElementChild;if(n&&window.innerWidth>=h.g.MOBILE_WIDTH?(this.element.style.display="block",this.render(t),s?.classList.add("vditor-menu--current")):(this.element.style.display="none",s?.classList.remove("vditor-menu--current")),o&&getSelection().rangeCount>0){var m=getSelection().getRangeAt(0);t[t.currentMode].element.contains(m.startContainer)&&(0,F.Hc)(m)}ie(t)},e})(),Pl=f(280),Il=(function(){function e(t){var n=this;this.element=document.createElement("div"),this.element.className="vditor-preview",this.previewElement=document.createElement("div"),this.previewElement.className="vditor-reset",t.options.classes.preview&&this.previewElement.classList.add(t.options.classes.preview),this.previewElement.style.maxWidth=t.options.preview.maxWidth+"px",this.previewElement.addEventListener("copy",function(x){if(x.target.tagName!=="TEXTAREA"){var T=document.createElement("div");T.className="vditor-reset",T.appendChild(getSelection().getRangeAt(0).cloneContents()),n.copyToX(t,T,"default"),x.preventDefault()}}),this.previewElement.addEventListener("click",function(x){var T=(0,u.lG)(x.target,"SPAN");if(T&&(0,u.fb)(T,"vditor-toc")){var P=n.previewElement.querySelector("#"+T.getAttribute("data-target-id"));P&&(n.element.scrollTop=P.offsetTop);return}if(x.target.tagName==="A"){t.options.link.click?t.options.link.click(x.target):t.options.link.isOpen&&window.open(x.target.getAttribute("href")),x.preventDefault();return}x.target.tagName==="IMG"&&(t.options.image.preview?t.options.image.preview(x.target):t.options.image.isPreview&&(0,O.E)(x.target,t.options.lang,t.options.theme))}),this.element.appendChild(this.previewElement);var o=t.options.preview.actions;if(o.length!==0){var a=document.createElement("div");a.className="vditor-preview__action";for(var s=[],m=0;m<o.length;m++){var C=o[m];if(typeof C=="object"){s.push('<button type="button" data-type="'.concat(C.key,'" class="').concat(C.className,'"').concat(C.tooltip?' aria-label="'.concat(C.tooltip,'"'):"",'">').concat(C.text,"</button>"));continue}switch(C){case"desktop":s.push('<button type="button" class="vditor-preview__action--current" data-type="desktop">Desktop</button>');break;case"tablet":s.push('<button type="button" data-type="tablet">Tablet</button>');break;case"mobile":s.push('<button type="button" data-type="mobile">Mobile/Wechat</button>');break;case"mp-wechat":s.push('<button type="button" data-type="mp-wechat" class="vditor-tooltipped vditor-tooltipped__w" aria-label="复制到公众号"><svg><use xlink:href="#vditor-icon-mp-wechat"></use></svg></button>');break;case"zhihu":s.push('<button type="button" data-type="zhihu" class="vditor-tooltipped vditor-tooltipped__w" aria-label="复制到知乎"><svg><use xlink:href="#vditor-icon-zhihu"></use></svg></button>');break}}a.innerHTML=s.join(""),a.addEventListener((0,d.Le)(),function(x){var T=(0,k.S)(x.target,"BUTTON");if(T){var P=T.getAttribute("data-type"),W=o.find(function(te){return te?.key===P});if(W){W.click(P);return}if(P==="mp-wechat"||P==="zhihu"){n.copyToX(t,n.previewElement.cloneNode(!0),P);return}P==="desktop"?n.previewElement.style.width="auto":P==="tablet"?n.previewElement.style.width="780px":n.previewElement.style.width="360px",n.previewElement.scrollWidth>n.previewElement.parentElement.clientWidth&&(n.previewElement.style.width="auto"),n.render(t),a.querySelectorAll("button").forEach(function(te){te.classList.remove("vditor-preview__action--current")}),T.classList.add("vditor-preview__action--current")}}),this.element.insertBefore(a,this.previewElement)}}return e.prototype.render=function(t,n){var o=this;if(clearTimeout(this.mdTimeoutId),this.element.style.display==="none"){this.element.getAttribute("data-type")==="renderPerformance"&&t.tip.hide();return}if(n){this.previewElement.innerHTML=n;return}if(H(t).replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")===""){this.previewElement.innerHTML="";return}var a=new Date().getTime(),s=H(t);this.mdTimeoutId=window.setTimeout(function(){if(t.options.preview.url){var m=new XMLHttpRequest;m.open("POST",t.options.preview.url),m.setRequestHeader("Content-Type","application/json;charset=UTF-8"),m.onreadystatechange=function(){if(m.readyState===XMLHttpRequest.DONE)if(m.status===200){var x=JSON.parse(m.responseText);if(x.code!==0){t.tip.show(x.msg);return}t.options.preview.transform&&(x.data=t.options.preview.transform(x.data)),o.previewElement.innerHTML=x.data,o.afterRender(t,a)}else{var T=t.lute.Md2HTML(s);t.options.preview.transform&&(T=t.options.preview.transform(T)),o.previewElement.innerHTML=T,o.afterRender(t,a)}},m.send(JSON.stringify({markdownText:s}))}else{var C=t.lute.Md2HTML(s);t.options.preview.transform&&(C=t.options.preview.transform(C)),o.previewElement.innerHTML=C,o.afterRender(t,a)}},t.options.preview.delay)},e.prototype.afterRender=function(t,n){t.options.preview.parse&&t.options.preview.parse(this.element);var o=new Date().getTime()-n;new Date().getTime()-n>2600?(t.tip.show(window.VditorI18n.performanceTip.replace("${x}",o.toString())),t.preview.element.setAttribute("data-type","renderPerformance")):t.preview.element.getAttribute("data-type")==="renderPerformance"&&(t.tip.hide(),t.preview.element.removeAttribute("data-type"));var a=t.preview.element.querySelector(".vditor-comment--focus");a&&a.classList.remove("vditor-comment--focus"),(0,B.O)(t.preview.previewElement,t.options.preview.hljs),(0,se.s)(t.options.preview.hljs,t.preview.previewElement,t.options.cdn),(0,Ce.i)(t.preview.previewElement,t.options.cdn,t.options.theme),(0,Le.K)(t.preview.previewElement,t.options.cdn),(0,Pe.J)(t.preview.previewElement,t.options.cdn,t.options.theme),(0,q.P)(t.preview.previewElement,t.options.cdn),(0,J.v)(t.preview.previewElement,t.options.cdn),(0,N.p)(t.preview.previewElement,t.options.cdn,t.options.theme),(0,Se.P)(t.preview.previewElement,t.options.cdn,t.options.theme),(0,ye.B)(t.preview.previewElement,t.options.cdn),(0,R.Q)(t.preview.previewElement,t.options.cdn),t.options.preview.render.media.enable&&(0,Pl.Y)(t.preview.previewElement),t.options.customRenders.forEach(function(C){C.render(t.preview.previewElement,t)});var s=t.preview.element,m=t.outline.render(t);m===""&&(m="[ToC]"),s.querySelectorAll('[data-type="toc-block"]').forEach(function(C){C.innerHTML=m,(0,he.H)(C,{cdn:t.options.cdn,math:t.options.preview.math})}),(0,he.H)(t.preview.previewElement,{cdn:t.options.cdn,math:t.options.preview.math})},e.prototype.copyToX=function(t,n,o){o===void 0&&(o="mp-wechat"),o!=="zhihu"?n.querySelectorAll(".katex-html .base").forEach(function(s){s.style.display="initial"}):n.querySelectorAll(".language-math").forEach(function(s){s.outerHTML='<img class="Formula-image" data-eeimg="true" src="//www.zhihu.com/equation?tex=" alt="'.concat(s.getAttribute("data-math"),'\\" style="display: block; margin: 0 auto; max-width: 100%;">')}),n.style.backgroundColor="#fff",n.querySelectorAll("code").forEach(function(s){s.style.backgroundImage="none"}),this.element.append(n);var a=n.ownerDocument.createRange();a.selectNode(n),(0,F.Hc)(a),document.execCommand("copy"),n.remove(),t.tip.show(["zhihu","mp-wechat"].includes(o)?"已复制，可到".concat(o==="zhihu"?"知乎":"微信公众号平台","进行粘贴"):"已复制到剪切板")},e})(),Rl=(function(){function e(t){this.element=document.createElement("div"),this.element.className="vditor-resize vditor-resize--".concat(t.options.resize.position),this.element.innerHTML='<div><svg><use xlink:href="#vditor-icon-resize"></use></svg></div>',this.bindEvent(t)}return e.prototype.bindEvent=function(t){var n=this;this.element.addEventListener("mousedown",function(o){var a=document,s=o.clientY,m=t.element.offsetHeight,C=63+t.element.querySelector(".vditor-toolbar").clientHeight;a.ondragstart=function(){return!1},window.captureEvents&&window.captureEvents(),n.element.classList.add("vditor-resize--selected"),a.onmousemove=function(x){t.options.resize.position==="top"?t.element.style.height=Math.max(C,m+(s-x.clientY))+"px":t.element.style.height=Math.max(C,m+(x.clientY-s))+"px",t.options.typewriterMode&&(t.sv.element.style.paddingBottom=t.sv.element.parentElement.offsetHeight/2+"px")},a.onmouseup=function(){t.options.resize.after&&t.options.resize.after(t.element.offsetHeight-m),window.captureEvents&&window.captureEvents(),a.onmousemove=null,a.onmouseup=null,a.ondragstart=null,a.onselectstart=null,a.onselect=null,n.element.classList.remove("vditor-resize--selected")}})},e})(),jl=(function(){function e(t){this.composingLock=!1,this.element=document.createElement("pre"),this.element.className="vditor-sv vditor-reset",this.element.setAttribute("placeholder",t.options.placeholder),this.element.setAttribute("contenteditable","true"),this.element.setAttribute("spellcheck","false"),this.bindEvent(t),hi(t,this.element),mi(t,this.element),vi(t,this.element),wi(t,this.element),gi(t,this.element),yi(t,this.element,this.copy),bi(t,this.element,this.copy)}return e.prototype.copy=function(t,n){t.stopPropagation(),t.preventDefault(),t.clipboardData.setData("text/plain",zn(n[n.currentMode].element))},e.prototype.bindEvent=function(t){var n=this;this.element.addEventListener("paste",function(o){Mr(t,o,{pasteCode:function(a){document.execCommand("insertHTML",!1,a)}})}),this.element.addEventListener("scroll",function(){if(t.preview.element.style.display==="block"){var o=n.element.scrollTop,a=n.element.clientHeight,s=n.element.scrollHeight-parseFloat(n.element.style.paddingBottom||"0"),m=t.preview.element;o/a>.5?m.scrollTop=(o+a)*m.scrollHeight/s-a:m.scrollTop=o*m.scrollHeight/s}}),this.element.addEventListener("compositionstart",function(o){n.composingLock=!0}),this.element.addEventListener("compositionend",function(o){(0,d.vU)()||V(t,o),n.composingLock=!1}),this.element.addEventListener("input",function(o){if(!(o.inputType==="deleteByDrag"||o.inputType==="insertFromDrop")&&!(n.composingLock||o.data==="‘"||o.data==="“"||o.data==="《")){if(n.preventInput){n.preventInput=!1,Xe(t,{enableAddUndoStack:!0,enableHint:!0,enableInput:!0});return}V(t,o)}}),this.element.addEventListener("keyup",function(o){if(!(o.isComposing||(0,d.yl)(o))){if((o.key==="Backspace"||o.key==="Delete")&&t.sv.element.innerHTML!==""&&t.sv.element.childNodes.length===1&&t.sv.element.firstElementChild&&t.sv.element.firstElementChild.tagName==="DIV"&&t.sv.element.firstElementChild.childElementCount===2&&(t.sv.element.firstElementChild.textContent===""||t.sv.element.textContent===`
`)){t.sv.element.innerHTML="";return}o.key==="Enter"&&Ge(t)}})},e})(),na=(function(){function e(){this.element=document.createElement("div"),this.element.className="vditor-tip"}return e.prototype.show=function(t,n){var o=this;n===void 0&&(n=6e3),this.element.className="vditor-tip vditor-tip--show",n===0?(this.element.innerHTML='<div class="vditor-tip__content">'.concat(t,`
<div class="vditor-tip__close">X</div></div>`),this.element.querySelector(".vditor-tip__close").addEventListener("click",function(){o.hide()})):(this.element.innerHTML='<div class="vditor-tip__content">'.concat(t,"</div>"),setTimeout(function(){o.hide()},n)),this.element.removeAttribute("style"),setTimeout(function(){var a=o.element.getBoundingClientRect();a.top<46&&(o.element.style.position="fixed",o.element.style.top="46px")},150)},e.prototype.hide=function(){this.element.className="vditor-messageElementtip",this.element.innerHTML=""},e})(),Ai=function(e,t){if(t.options.preview.mode!==e){switch(t.options.preview.mode=e,e){case"both":t.sv.element.style.display="block",t.preview.element.style.display="block",t.preview.render(t),v(t.toolbar.elements,["both"]);break;case"editor":t.sv.element.style.display="block",t.preview.element.style.display="none",E(t.toolbar.elements,["both"]);break}t.devtools&&t.devtools.renderEchart(t)}},Bl=(function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,a){o.__proto__=a}||function(o,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(o[s]=a[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}})(),Fl=(function(e){Bl(t,e);function t(n,o){var a=e.call(this,n,o)||this;return n.options.preview.mode==="both"&&a.element.children[0].classList.add("vditor-menu--current"),a.element.children[0].addEventListener((0,d.Le)(),function(s){var m=a.element.firstElementChild;m.classList.contains(h.g.CLASS_MENU_DISABLED)||(s.preventDefault(),n.currentMode==="sv"&&(n.options.preview.mode==="both"?Ai("editor",n):Ai("both",n)))}),a}return t})($e),Ul=(function(){function e(){this.element=document.createElement("div"),this.element.className="vditor-toolbar__br"}return e})(),ra=f(580),Vl=(function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,a){o.__proto__=a}||function(o,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(o[s]=a[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}})(),Wl=(function(e){Vl(t,e);function t(n,o){var a=e.call(this,n,o)||this,s=a.element.children[0],m=document.createElement("div");m.className="vditor-hint".concat(o.level===2?"":" vditor-panel--arrow");var C="";return h.g.CODE_THEME.forEach(function(x){C+="<button>".concat(x,"</button>")}),m.innerHTML='<div style="overflow: auto;max-height:'.concat(window.innerHeight/2,'px">').concat(C,"</div>"),m.addEventListener((0,d.Le)(),function(x){x.target.tagName==="BUTTON"&&(M(n,["subToolbar"]),n.options.preview.hljs.style=x.target.textContent,(0,ra.Y)(x.target.textContent,n.options.cdn),x.preventDefault(),x.stopPropagation())}),a.element.appendChild(m),L(n,m,s,o.level),a}return t})($e),Kl=(function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,a){o.__proto__=a}||function(o,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(o[s]=a[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}})(),ql=(function(e){Kl(t,e);function t(n,o){var a=e.call(this,n,o)||this,s=a.element.children[0],m=document.createElement("div");m.className="vditor-hint".concat(o.level===2?"":" vditor-panel--arrow");var C="";return Object.keys(n.options.preview.theme.list).forEach(function(x){C+='<button data-type="'.concat(x,'">').concat(n.options.preview.theme.list[x],"</button>")}),m.innerHTML='<div style="overflow: auto;max-height:'.concat(window.innerHeight/2,'px">').concat(C,"</div>"),m.addEventListener((0,d.Le)(),function(x){x.target.tagName==="BUTTON"&&(M(n,["subToolbar"]),n.options.preview.theme.current=x.target.getAttribute("data-type"),(0,G.Z)(n.options.preview.theme.current,n.options.preview.theme.path),x.preventDefault(),x.stopPropagation())}),a.element.appendChild(m),L(n,m,s,o.level),a}return t})($e),$l=(function(){function e(t){this.element=document.createElement("span"),this.element.className="vditor-counter vditor-tooltipped vditor-tooltipped__nw",this.render(t,"")}return e.prototype.render=function(t,n){var o=n.endsWith(`
`)?n.length-1:n.length;if(t.options.counter.type==="text"&&t[t.currentMode]){var a=t[t.currentMode].element.cloneNode(!0);a.querySelectorAll(".vditor-wysiwyg__preview").forEach(function(s){s.remove()}),o=a.textContent.length}typeof t.options.counter.max=="number"?(o>t.options.counter.max?this.element.className="vditor-counter vditor-counter--error":this.element.className="vditor-counter",this.element.innerHTML="".concat(o,"/").concat(t.options.counter.max)):this.element.innerHTML="".concat(o),this.element.setAttribute("aria-label",t.options.counter.type),t.options.counter.after&&t.options.counter.after(o,{enable:t.options.counter.enable,max:t.options.counter.max,type:t.options.counter.type})},e})(),zl=(function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,a){o.__proto__=a}||function(o,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(o[s]=a[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}})(),Gl=(function(e){zl(t,e);function t(n,o){var a=e.call(this,n,o)||this;return a.element.children[0].innerHTML=o.icon,a.element.children[0].addEventListener((0,d.Le)(),function(s){s.preventDefault(),!s.currentTarget.classList.contains(h.g.CLASS_MENU_DISABLED)&&o.click(s,n)}),a}return t})($e),Jl=(function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,a){o.__proto__=a}||function(o,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(o[s]=a[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}})(),Zl=(function(e){Jl(t,e);function t(n,o){var a=e.call(this,n,o)||this;return a.element.firstElementChild.addEventListener((0,d.Le)(),function(s){var m=a.element.firstElementChild;m.classList.contains(h.g.CLASS_MENU_DISABLED)||(s.preventDefault(),m.classList.contains("vditor-menu--current")?(m.classList.remove("vditor-menu--current"),n.devtools.element.style.display="none",ie(n)):(m.classList.add("vditor-menu--current"),n.devtools.element.style.display="block",ie(n),n.devtools.renderEchart(n)))}),a}return t})($e),Xl=(function(){function e(){this.element=document.createElement("div"),this.element.className="vditor-toolbar__divider"}return e})(),Yl=(function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,a){o.__proto__=a}||function(o,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(o[s]=a[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}})(),Ql=(function(e){Yl(t,e);function t(n,o){var a=e.call(this,n,o)||this,s=document.createElement("div");s.className="vditor-panel vditor-panel--arrow";var m="";return Object.keys(n.options.hint.emoji).forEach(function(C){var x=n.options.hint.emoji[C];x.indexOf(".")>-1?m+='<button data-value=":'.concat(C,': " data-key=":').concat(C,`:"><img
data-value=":`).concat(C,': " data-key=":').concat(C,':" class="vditor-emojis__icon" src="').concat(x,'"/></button>'):m+='<button data-value="'.concat(x,` "
 data-key="`).concat(C,'"><span class="vditor-emojis__icon">').concat(x,"</span></button>")}),s.innerHTML='<div class="vditor-emojis" style="max-height: '.concat(n.options.height==="auto"?"auto":n.options.height-80,'px">').concat(m,`</div><div class="vditor-emojis__tail">
    <span class="vditor-emojis__tip"></span><span>`).concat(n.options.hint.emojiTail||"",`</span>
</div>`),a.element.appendChild(s),L(n,s,a.element.firstElementChild,o.level),a.bindEvent(n),a}return t.prototype.bindEvent=function(n){var o=this;this.element.lastElementChild.addEventListener((0,d.Le)(),function(a){var s=(0,k.S)(a.target,"BUTTON");if(s){a.preventDefault();var m=s.getAttribute("data-value"),C=(0,F.zh)(n),x=m;if(n.currentMode==="wysiwyg"?x=n.lute.SpinVditorDOM(m):n.currentMode==="ir"&&(x=n.lute.SpinVditorIRDOM(m)),m.indexOf(":")>-1&&n.currentMode!=="sv"){var T=document.createElement("div");T.innerHTML=x,x=T.firstElementChild.firstElementChild.outerHTML+" ",(0,F.oC)(x,n)}else C.extractContents(),C.insertNode(document.createTextNode(m)),(0,u.F9)(C.startContainer)||yt(n,C);C.collapse(!1),(0,F.Hc)(C),o.element.lastElementChild.style.display="none",Ae(n)}}),this.element.lastElementChild.addEventListener("mouseover",function(a){var s=(0,k.S)(a.target,"BUTTON");s&&(o.element.querySelector(".vditor-emojis__tip").innerHTML=s.getAttribute("data-key"))})},t})($e),ia=function(e,t,n){var o=document.createElement("a");"download"in o?(o.download=n,o.style.display="none",o.href=URL.createObjectURL(new Blob([t])),document.body.appendChild(o),o.click(),o.remove()):e.tip.show(window.VditorI18n.downloadTip,0)},ec=function(e){var t=H(e);ia(e,t,t.substr(0,10)+".md")},tc=function(e){e.tip.show(window.VditorI18n.generate,3800);var t=document.querySelector("#vditorExportIframe");t.contentDocument.open(),t.contentDocument.write('<link rel="stylesheet" href="'.concat(e.options.cdn,`/dist/index.css"/>
<script src="`).concat(e.options.cdn,`/dist/method.min.js"><\/script>
<div id="preview" style="width: 800px"></div>
<script>
window.addEventListener("message", (e) => {
  if(!e.data) {
    return;
  }
  Vditor.preview(document.getElementById('preview'), e.data, {
    cdn: "`).concat(e.options.cdn,`",
    markdown: {
      theme: `).concat(JSON.stringify(e.options.preview.theme),`
    },
    hljs: {
      style: "`).concat(e.options.preview.hljs.style,`"
    }
  });
  setTimeout(() => {
        window.print();
    }, 3600);
}, false);
<\/script>`)),t.contentDocument.close(),setTimeout(function(){t.contentWindow.postMessage(H(e),"*")},200)},nc=function(e){var t=ea(e),n='<html><head><link rel="stylesheet" type="text/css" href="'.concat(e.options.cdn,`/dist/index.css"/>
<script src="`).concat(e.options.cdn,"/dist/js/i18n/").concat(e.options.lang,`.js"><\/script>
<script src="`).concat(e.options.cdn,`/dist/method.min.js"><\/script></head>
<body><div class="vditor-reset" id="preview">`).concat(t,`</div>
<script>
    const previewElement = document.getElementById('preview')
    Vditor.setContentTheme('`).concat(e.options.preview.theme.current,"', '").concat(e.options.preview.theme.path,`');
    Vditor.codeRender(previewElement);
    Vditor.highlightRender(`).concat(JSON.stringify(e.options.preview.hljs),", previewElement, '").concat(e.options.cdn,`');
    Vditor.mathRender(previewElement, {
        cdn: '`).concat(e.options.cdn,`',
        math: `).concat(JSON.stringify(e.options.preview.math),`,
    });
    Vditor.mermaidRender(previewElement, '`).concat(e.options.cdn,"', '").concat(e.options.theme,`');
    Vditor.SMILESRender(previewElement, '`).concat(e.options.cdn,"', '").concat(e.options.theme,`');
    Vditor.markmapRender(previewElement, '`).concat(e.options.cdn,`');
    Vditor.flowchartRender(previewElement, '`).concat(e.options.cdn,`');
    Vditor.graphvizRender(previewElement, '`).concat(e.options.cdn,`');
    Vditor.chartRender(previewElement, '`).concat(e.options.cdn,"', '").concat(e.options.theme,`');
    Vditor.mindmapRender(previewElement, '`).concat(e.options.cdn,"', '").concat(e.options.theme,`');
    Vditor.abcRender(previewElement, '`).concat(e.options.cdn,`');
    `).concat(e.options.preview.render.media.enable?"Vditor.mediaRender(previewElement);":"",`
    Vditor.speechRender(previewElement);
<\/script>
<script src="`).concat(e.options.cdn,"/dist/js/icons/").concat(e.options.icon,'.js"><\/script></body></html>');ia(e,n,t.substr(0,10)+".html")},rc=(function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,a){o.__proto__=a}||function(o,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(o[s]=a[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}})(),ic=(function(e){rc(t,e);function t(n,o){var a=e.call(this,n,o)||this,s=a.element.children[0],m=document.createElement("div");return m.className="vditor-hint".concat(o.level===2?"":" vditor-panel--arrow"),m.innerHTML=`<button data-type="markdown">Markdown</button>
<button data-type="pdf">PDF</button>
<button data-type="html">HTML</button>`,m.addEventListener((0,d.Le)(),function(C){var x=C.target;if(x.tagName==="BUTTON"){switch(x.getAttribute("data-type")){case"markdown":ec(n);break;case"pdf":tc(n);break;case"html":nc(n);break}M(n,["subToolbar"]),C.preventDefault(),C.stopPropagation()}}),a.element.appendChild(m),L(n,m,s,o.level),a}return t})($e),oc=(function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,a){o.__proto__=a}||function(o,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(o[s]=a[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}})(),ac=(function(e){oc(t,e);function t(n,o){var a=e.call(this,n,o)||this;return a._bindEvent(n,o),a}return t.prototype._bindEvent=function(n,o){this.element.children[0].addEventListener((0,d.Le)(),function(a){a.preventDefault(),n.element.className.includes("vditor--fullscreen")?(o.level||(this.innerHTML=o.icon),n.element.style.zIndex="",document.body.style.overflow="",n.element.classList.remove("vditor--fullscreen"),Object.keys(n.toolbar.elements).forEach(function(s){var m=n.toolbar.elements[s].firstChild;m&&(m.className=m.className.replace("__s","__n"),n.options.toolbar.forEach(function(C){typeof C!="string"&&C.tipPosition&&C.name===m.dataset.type&&(m.className="vditor-tooltipped vditor-tooltipped__".concat(C.tipPosition))}))}),n.counter&&(n.counter.element.className=n.counter.element.className.replace("__s","__n"))):(o.level||(this.innerHTML='<svg><use xlink:href="#vditor-icon-contract"></use></svg>'),n.element.style.zIndex=n.options.fullscreen.index.toString(),document.body.style.overflow="hidden",n.element.classList.add("vditor--fullscreen"),Object.keys(n.toolbar.elements).forEach(function(s){var m=n.toolbar.elements[s].firstChild;m&&(m.className=m.className.replace("__n","__s"))}),n.counter&&(n.counter.element.className=n.counter.element.className.replace("__n","__s"))),n.devtools&&n.devtools.renderEchart(n),o.click&&o.click(a,n),ie(n),ae(n)})},t})($e),sc=(function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,a){o.__proto__=a}||function(o,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(o[s]=a[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}})(),lc=(function(e){sc(t,e);function t(n,o){var a=e.call(this,n,o)||this,s=document.createElement("div");return s.className="vditor-hint vditor-panel--arrow",s.innerHTML='<button data-tag="h1" data-value="# ">'.concat(window.VditorI18n.heading1," ").concat((0,d.ns)("&lt;⌥⌘1>"),`</button>
<button data-tag="h2" data-value="## ">`).concat(window.VditorI18n.heading2," &lt;").concat((0,d.ns)("⌥⌘2"),`></button>
<button data-tag="h3" data-value="### ">`).concat(window.VditorI18n.heading3," &lt;").concat((0,d.ns)("⌥⌘3"),`></button>
<button data-tag="h4" data-value="#### ">`).concat(window.VditorI18n.heading4," &lt;").concat((0,d.ns)("⌥⌘4"),`></button>
<button data-tag="h5" data-value="##### ">`).concat(window.VditorI18n.heading5," &lt;").concat((0,d.ns)("⌥⌘5"),`></button>
<button data-tag="h6" data-value="###### ">`).concat(window.VditorI18n.heading6," &lt;").concat((0,d.ns)("⌥⌘6"),"></button>"),a.element.appendChild(s),a._bindEvent(n,s),a}return t.prototype._bindEvent=function(n,o){var a=this.element.children[0];a.addEventListener((0,d.Le)(),function(m){m.preventDefault(),clearTimeout(n.wysiwyg.afterRenderTimeoutId),clearTimeout(n.ir.processTimeoutId),clearTimeout(n.sv.processTimeoutId),!a.classList.contains(h.g.CLASS_MENU_DISABLED)&&(a.blur(),a.classList.contains("vditor-menu--current")?(n.currentMode==="wysiwyg"?(Ln(n),fe(n)):n.currentMode==="ir"&&Zn(n,""),a.classList.remove("vditor-menu--current")):(M(n,["subToolbar"]),o.style.display="block"))});for(var s=0;s<6;s++)o.children.item(s).addEventListener((0,d.Le)(),function(m){m.preventDefault(),n.currentMode==="wysiwyg"?(Nt(n,m.target.getAttribute("data-tag")),fe(n),a.classList.add("vditor-menu--current")):n.currentMode==="ir"?(Zn(n,m.target.getAttribute("data-value")),a.classList.add("vditor-menu--current")):ko(n,m.target.getAttribute("data-value")),o.style.display="none"})},t})($e),cc=(function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,a){o.__proto__=a}||function(o,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(o[s]=a[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}})(),uc=(function(e){cc(t,e);function t(n,o){var a=e.call(this,n,o)||this;return a.element.children[0].addEventListener((0,d.Le)(),function(s){s.preventDefault(),n.tip.show(`<div style="margin-bottom:14px;font-size: 14px;line-height: 22px;min-width:300px;max-width: 360px;display: flex;">
<div style="margin-top: 14px;flex: 1">
    <div>Markdown 使用指南</div>
    <ul style="list-style: none">
        <li><a href="https://ld246.com/article/1583308420519" target="_blank">语法速查手册</a></li>
        <li><a href="https://ld246.com/article/1583129520165" target="_blank">基础语法</a></li>
        <li><a href="https://ld246.com/article/1583305480675" target="_blank">扩展语法</a></li>
        <li><a href="https://ld246.com/article/1582778815353" target="_blank">键盘快捷键</a></li>
    </ul>
</div>
<div style="margin-top: 14px;flex: 1">
    <div>Vditor 支持</div>
    <ul style="list-style: none">
        <li><a href="https://github.com/Vanessa219/vditor/issues" target="_blank">Issues</a></li>
        <li><a href="https://ld246.com/tag/vditor" target="_blank">官方讨论区</a></li>
        <li><a href="https://ld246.com/article/1549638745630" target="_blank">开发手册</a></li>
        <li><a href="https://ld246.com/guide/markdown" target="_blank">演示地址</a></li>
    </ul>
</div></div>`,0)}),a}return t})($e),fc=(function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,a){o.__proto__=a}||function(o,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(o[s]=a[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}})(),dc=(function(e){fc(t,e);function t(n,o){var a=e.call(this,n,o)||this;return a.element.children[0].addEventListener((0,d.Le)(),function(s){if(s.preventDefault(),!(a.element.firstElementChild.classList.contains(h.g.CLASS_MENU_DISABLED)||n.currentMode==="sv")){var m=(0,F.zh)(n),C=(0,u.lG)(m.startContainer,"LI");C&&jo(n,C,m)}}),a}return t})($e),pc=(function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,a){o.__proto__=a}||function(o,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(o[s]=a[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}})(),hc=(function(e){pc(t,e);function t(n,o){var a=e.call(this,n,o)||this;return a.element.children[0].addEventListener((0,d.Le)(),function(s){s.preventDefault(),n.tip.show(`<div style="max-width: 520px; font-size: 14px;line-height: 22px;margin-bottom: 14px;">
<p style="text-align: center;margin: 14px 0">
    <em>下一代的 Markdown 编辑器，为未来而构建</em>
</p>
<div style="display: flex;margin-bottom: 14px;flex-wrap: wrap;align-items: center">
    <img src="https://unpkg.com/vditor/dist/images/logo.png" style="margin: 0 auto;height: 68px"/>
    <div>&nbsp;&nbsp;</div>
    <div style="flex: 1;min-width: 250px">
        Vditor 是一款浏览器端的 Markdown 编辑器，支持所见即所得、即时渲染（类似 Typora）和分屏预览模式。
        它使用 TypeScript 实现，支持原生 JavaScript 以及 Vue、React、Angular 和 Svelte 等框架。
    </div>
</div>
<div style="display: flex;flex-wrap: wrap;">
    <ul style="list-style: none;flex: 1;min-width:148px">
        <li>
        项目地址：<a href="https://b3log.org/vditor" target="_blank">b3log.org/vditor</a>
        </li>
        <li>
        开源协议：MIT
        </li>
    </ul>
    <ul style="list-style: none;margin-right: 18px">
        <li>
        组件版本：Vditor v`.concat(h.H," / Lute v").concat(Lute.Version,`
        </li>
        <li>
        赞助捐赠：<a href="https://ld246.com/sponsor" target="_blank">https://ld246.com/sponsor</a>
        </li>
    </ul>
</div>
</div>`),0)}),a}return t})($e),mc=(function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,a){o.__proto__=a}||function(o,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(o[s]=a[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}})(),gc=(function(e){mc(t,e);function t(n,o){var a=e.call(this,n,o)||this;return a.element.children[0].addEventListener((0,d.Le)(),function(s){s.preventDefault(),!(a.element.firstElementChild.classList.contains(h.g.CLASS_MENU_DISABLED)||n.currentMode==="sv")&&Gn(n,"afterend")}),a}return t})($e),yc=(function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,a){o.__proto__=a}||function(o,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(o[s]=a[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}})(),bc=(function(e){yc(t,e);function t(n,o){var a=e.call(this,n,o)||this;return a.element.children[0].addEventListener((0,d.Le)(),function(s){s.preventDefault(),!(a.element.firstElementChild.classList.contains(h.g.CLASS_MENU_DISABLED)||n.currentMode==="sv")&&Gn(n,"beforebegin")}),a}return t})($e),vc=(function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,a){o.__proto__=a}||function(o,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(o[s]=a[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}})(),wc=(function(e){vc(t,e);function t(n,o){var a=e.call(this,n,o)||this;return a.element.children[0].addEventListener((0,d.Le)(),function(s){if(s.preventDefault(),!(a.element.firstElementChild.classList.contains(h.g.CLASS_MENU_DISABLED)||n.currentMode==="sv")){var m=(0,F.zh)(n),C=(0,u.lG)(m.startContainer,"LI");C&&Ci(n,C,m,C.parentElement)}}),a}return t})($e),Ec=(function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,a){o.__proto__=a}||function(o,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(o[s]=a[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}})(),Sc=(function(e){Ec(t,e);function t(n,o){var a=e.call(this,n,o)||this;return n.options.outline&&a.element.firstElementChild.classList.add("vditor-menu--current"),a.element.children[0].addEventListener((0,d.Le)(),function(s){s.preventDefault();var m=n.toolbar.elements.outline.firstElementChild;m.classList.contains(h.g.CLASS_MENU_DISABLED)||(n.options.outline.enable=!a.element.firstElementChild.classList.contains("vditor-menu--current"),n.outline.toggle(n,n.options.outline.enable))}),a}return t})($e),Cc=(function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,a){o.__proto__=a}||function(o,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(o[s]=a[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}})(),Tc=(function(e){Cc(t,e);function t(n,o){var a=e.call(this,n,o)||this;return a._bindEvent(n),a}return t.prototype._bindEvent=function(n){var o=this;this.element.children[0].addEventListener((0,d.Le)(),function(a){a.preventDefault();var s=o.element.firstElementChild;if(!s.classList.contains(h.g.CLASS_MENU_DISABLED)){var m=h.g.EDIT_TOOLBARS.concat(["both","edit-mode","devtools"]);s.classList.contains("vditor-menu--current")?(s.classList.remove("vditor-menu--current"),n.currentMode==="sv"?(n.sv.element.style.display="block",n.options.preview.mode==="both"?n.preview.element.style.display="block":n.preview.element.style.display="none"):(n[n.currentMode].element.parentElement.style.display="block",n.preview.element.style.display="none"),S(n.toolbar.elements,m),n.outline.render(n)):(w(n.toolbar.elements,m),n.preview.element.style.display="block",n.currentMode==="sv"?n.sv.element.style.display="none":n[n.currentMode].element.parentElement.style.display="none",n.preview.render(n),s.classList.add("vditor-menu--current"),M(n,["subToolbar","hint","popover"]),setTimeout(function(){n.outline.render(n)},n.options.preview.delay+10)),ie(n)}})},t})($e),_c=(function(){function e(t){this.SAMPLE_RATE=5e3,this.isRecording=!1,this.readyFlag=!1,this.leftChannel=[],this.rightChannel=[],this.recordingLength=0;var n;if(typeof AudioContext<"u")n=new AudioContext;else if(webkitAudioContext)n=new webkitAudioContext;else return;this.DEFAULT_SAMPLE_RATE=n.sampleRate;var o=n.createGain(),a=n.createMediaStreamSource(t);a.connect(o),this.recorder=n.createScriptProcessor(2048,2,1),this.recorder.onaudioprocess=null,o.connect(this.recorder),this.recorder.connect(n.destination),this.readyFlag=!0}return e.prototype.cloneChannelData=function(t,n){this.leftChannel.push(new Float32Array(t)),this.rightChannel.push(new Float32Array(n)),this.recordingLength+=2048},e.prototype.startRecordingNewWavFile=function(){this.readyFlag&&(this.isRecording=!0,this.leftChannel.length=this.rightChannel.length=0,this.recordingLength=0)},e.prototype.stopRecording=function(){this.isRecording=!1},e.prototype.buildWavFileBlob=function(){for(var t=this.mergeBuffers(this.leftChannel),n=this.mergeBuffers(this.rightChannel),o=new Float32Array(t.length),a=0;a<t.length;++a)o[a]=.5*(t[a]+n[a]);this.DEFAULT_SAMPLE_RATE>this.SAMPLE_RATE&&(o=this.downSampleBuffer(o,this.SAMPLE_RATE));var s=44+o.length*2,m=new ArrayBuffer(s),C=new DataView(m);this.writeUTFBytes(C,0,"RIFF"),C.setUint32(4,s,!0),this.writeUTFBytes(C,8,"WAVE"),this.writeUTFBytes(C,12,"fmt "),C.setUint32(16,16,!0),C.setUint16(20,1,!0),C.setUint16(22,1,!0),C.setUint32(24,this.SAMPLE_RATE,!0),C.setUint32(28,this.SAMPLE_RATE*2,!0),C.setUint16(32,2,!0),C.setUint16(34,16,!0);var x=o.length*2;this.writeUTFBytes(C,36,"data"),C.setUint32(40,x,!0);for(var T=o.length,P=44,W=1,te=0;te<T;te++)C.setInt16(P,o[te]*(32767*W),!0),P+=2;return new Blob([C],{type:"audio/wav"})},e.prototype.downSampleBuffer=function(t,n){if(n===this.DEFAULT_SAMPLE_RATE||n>this.DEFAULT_SAMPLE_RATE)return t;for(var o=this.DEFAULT_SAMPLE_RATE/n,a=Math.round(t.length/o),s=new Float32Array(a),m=0,C=0;m<s.length;){for(var x=Math.round((m+1)*o),T=0,P=0,W=C;W<x&&W<t.length;W++)T+=t[W],P++;s[m]=T/P,m++,C=x}return s},e.prototype.mergeBuffers=function(t){for(var n=new Float32Array(this.recordingLength),o=0,a=t.length,s=0;s<a;++s){var m=t[s];n.set(m,o),o+=m.length}return n},e.prototype.writeUTFBytes=function(t,n,o){for(var a=o.length,s=0;s<a;s++)t.setUint8(n+s,o.charCodeAt(s))},e})(),Lc=(function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,a){o.__proto__=a}||function(o,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(o[s]=a[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}})(),Mc=(function(e){Lc(t,e);function t(n,o){var a=e.call(this,n,o)||this;return a._bindEvent(n),a}return t.prototype._bindEvent=function(n){var o=this,a;this.element.children[0].addEventListener((0,d.Le)(),function(s){if(s.preventDefault(),!o.element.firstElementChild.classList.contains(h.g.CLASS_MENU_DISABLED)){var m=n[n.currentMode].element;if(!a){navigator.mediaDevices.getUserMedia({audio:!0}).then(function(x){a=new _c(x),a.recorder.onaudioprocess=function(T){if(a.isRecording){var P=T.inputBuffer.getChannelData(0),W=T.inputBuffer.getChannelData(1);a.cloneChannelData(P,W)}},a.startRecordingNewWavFile(),n.tip.show(window.VditorI18n.recording),m.setAttribute("contenteditable","false"),o.element.children[0].classList.add("vditor-menu--current")}).catch(function(){n.tip.show(window.VditorI18n["record-tip"])});return}if(a.isRecording){a.stopRecording(),n.tip.hide();var C=new File([a.buildWavFileBlob()],"record".concat(new Date().getTime(),".wav"),{type:"video/webm"});Si(n,[C]),o.element.children[0].classList.remove("vditor-menu--current")}else n.tip.show(window.VditorI18n.recording),m.setAttribute("contenteditable","false"),a.startRecordingNewWavFile(),o.element.children[0].classList.add("vditor-menu--current")}})},t})($e),Ac=(function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,a){o.__proto__=a}||function(o,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(o[s]=a[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}})(),kc=(function(e){Ac(t,e);function t(n,o){var a=e.call(this,n,o)||this;return w({redo:a.element},["redo"]),a.element.children[0].addEventListener((0,d.Le)(),function(s){s.preventDefault(),!a.element.firstElementChild.classList.contains(h.g.CLASS_MENU_DISABLED)&&n.undo.redo(n)}),a}return t})($e),xc=(function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,a){o.__proto__=a}||function(o,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(o[s]=a[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}})(),Dc=(function(e){xc(t,e);function t(n,o){var a=e.call(this,n,o)||this;return w({undo:a.element},["undo"]),a.element.children[0].addEventListener((0,d.Le)(),function(s){s.preventDefault(),!a.element.firstElementChild.classList.contains(h.g.CLASS_MENU_DISABLED)&&n.undo.undo(n)}),a}return t})($e),Oc=(function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,a){o.__proto__=a}||function(o,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(o[s]=a[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}})(),Hc=(function(e){Oc(t,e);function t(n,o){var a=e.call(this,n,o)||this,s='<input type="file"';return n.options.upload.multiple&&(s+=' multiple="multiple"'),n.options.upload.accept&&(s+=' accept="'.concat(n.options.upload.accept,'"')),a.element.children[0].innerHTML="".concat(o.icon||'<svg><use xlink:href="#vditor-icon-upload"></use></svg>').concat(s,">"),a._bindEvent(n),a}return t.prototype._bindEvent=function(n){var o=this;this.element.children[0].addEventListener((0,d.Le)(),function(a){if(o.element.firstElementChild.classList.contains(h.g.CLASS_MENU_DISABLED)){a.stopPropagation(),a.preventDefault();return}}),this.element.querySelector("input").addEventListener("change",function(a){if(o.element.firstElementChild.classList.contains(h.g.CLASS_MENU_DISABLED)){a.stopPropagation(),a.preventDefault();return}a.target.files.length!==0&&Si(n,a.target.files,a.target)})},t})($e),Nc=(function(){function e(t){var n=this,o=t.options;this.elements={},this.element=document.createElement("div"),this.element.className="vditor-toolbar",o.toolbar.forEach(function(a,s){var m=n.genItem(t,a,s);if(n.element.appendChild(m),a.toolbar){var C=document.createElement("div");C.className="vditor-hint vditor-panel--arrow",C.addEventListener((0,d.Le)(),function(x){C.style.display="none"}),a.toolbar.forEach(function(x,T){x.level=2,C.appendChild(n.genItem(t,x,s+T))}),m.appendChild(C),L(t,C,m.children[0])}}),t.options.toolbarConfig.hide&&this.element.classList.add("vditor-toolbar--hide"),t.options.toolbarConfig.pin&&this.element.classList.add("vditor-toolbar--pin"),t.options.counter.enable&&(t.counter=new $l(t),this.element.appendChild(t.counter.element))}return e.prototype.updateConfig=function(t,n){t.options.toolbarConfig=Object.assign({hide:!1,pin:!1},n),t.options.toolbarConfig.hide?this.element.classList.add("vditor-toolbar--hide"):this.element.classList.remove("vditor-toolbar--hide"),t.options.toolbarConfig.pin?this.element.classList.add("vditor-toolbar--pin"):this.element.classList.remove("vditor-toolbar--pin")},e.prototype.genItem=function(t,n,o){var a;switch(n.name){case"bold":case"italic":case"more":case"strike":case"line":case"quote":case"list":case"ordered-list":case"check":case"code":case"inline-code":case"link":case"table":a=new $e(t,n);break;case"emoji":a=new Ql(t,n);break;case"headings":a=new lc(t,n);break;case"|":a=new Xl;break;case"br":a=new Ul;break;case"undo":a=new Dc(t,n);break;case"redo":a=new kc(t,n);break;case"help":a=new uc(t,n);break;case"both":a=new Fl(t,n);break;case"preview":a=new Tc(t,n);break;case"fullscreen":a=new ac(t,n);break;case"upload":a=new Hc(t,n);break;case"record":a=new Mc(t,n);break;case"info":a=new hc(t,n);break;case"edit-mode":a=new gl(t,n);break;case"devtools":a=new Zl(t,n);break;case"outdent":a=new wc(t,n);break;case"indent":a=new dc(t,n);break;case"outline":a=new Sc(t,n);break;case"insert-after":a=new gc(t,n);break;case"insert-before":a=new bc(t,n);break;case"code-theme":a=new Wl(t,n);break;case"content-theme":a=new ql(t,n);break;case"export":a=new ic(t,n);break;default:a=new Gl(t,n);break}if(a){var s=n.name;return(s==="br"||s==="|")&&(s=s+o),this.elements[s]=a.element,a.element}},e})(),Pc=f(173),Ic=(function(){function e(){this.stackSize=50,this.resetStack(),this.dmp=new Pc}return e.prototype.clearStack=function(t){this.resetStack(),this.resetIcon(t)},e.prototype.resetIcon=function(t){t.toolbar&&(this[t.currentMode].undoStack.length>1?S(t.toolbar.elements,["undo"]):w(t.toolbar.elements,["undo"]),this[t.currentMode].redoStack.length!==0?S(t.toolbar.elements,["redo"]):w(t.toolbar.elements,["redo"]))},e.prototype.undo=function(t){if(t[t.currentMode].element.getAttribute("contenteditable")!=="false"&&!(this[t.currentMode].undoStack.length<2)){var n=this[t.currentMode].undoStack.pop();n&&(this[t.currentMode].redoStack.push(n),this.renderDiff(n,t),this[t.currentMode].hasUndo=!0,M(t,["hint"]))}},e.prototype.redo=function(t){if(t[t.currentMode].element.getAttribute("contenteditable")!=="false"){var n=this[t.currentMode].redoStack.pop();n&&(this[t.currentMode].undoStack.push(n),this.renderDiff(n,t,!0))}},e.prototype.recordFirstPosition=function(t,n){if(getSelection().rangeCount!==0&&!(this[t.currentMode].undoStack.length!==1||this[t.currentMode].undoStack[0].length===0||this[t.currentMode].redoStack.length>0)&&!((0,d.vU)()&&n.key==="Backspace")&&!(0,d.G6)()){var o=this.addCaret(t);o.replace("<wbr>","").replace(" vditor-ir__node--expand","")===this[t.currentMode].undoStack[0][0].diffs[0][1].replace("<wbr>","")&&(this[t.currentMode].undoStack[0][0].diffs[0][1]=o,this[t.currentMode].lastText=o)}},e.prototype.addToUndoStack=function(t){var n=this.addCaret(t,!0),o=this.dmp.diff_main(n,this[t.currentMode].lastText,!0),a=this.dmp.patch_make(n,this[t.currentMode].lastText,o);a.length===0&&this[t.currentMode].undoStack.length>0||(this[t.currentMode].lastText=n,this[t.currentMode].undoStack.push(a),this[t.currentMode].undoStack.length>this.stackSize&&this[t.currentMode].undoStack.shift(),this[t.currentMode].hasUndo&&(this[t.currentMode].redoStack=[],this[t.currentMode].hasUndo=!1,w(t.toolbar.elements,["redo"])),this[t.currentMode].undoStack.length>1&&S(t.toolbar.elements,["undo"]))},e.prototype.renderDiff=function(t,n,o){o===void 0&&(o=!1);var a;if(o){var s=this.dmp.patch_deepCopy(t).reverse();s.forEach(function(C){C.diffs.forEach(function(x){x[0]=-x[0]})}),a=this.dmp.patch_apply(s,this[n.currentMode].lastText)[0]}else a=this.dmp.patch_apply(t,this[n.currentMode].lastText)[0];if(this[n.currentMode].lastText=a,n[n.currentMode].element.innerHTML=a,n.currentMode!=="sv"&&(n[n.currentMode].element.querySelectorAll(".vditor-".concat(n.currentMode,"__preview")).forEach(function(C){C.parentElement.querySelector(".language-echarts")&&(n.currentMode==="ir"?C.parentElement.outerHTML=n.lute.SpinVditorIRDOM(C.parentElement.outerHTML):C.parentElement.outerHTML=n.lute.SpinVditorDOM(C.parentElement.outerHTML))}),n[n.currentMode].element.querySelectorAll(".vditor-".concat(n.currentMode,"__preview[data-render='2']")).forEach(function(C){Ie(C,n)})),n[n.currentMode].element.querySelector("wbr"))(0,F.ib)(n[n.currentMode].element,n[n.currentMode].element.ownerDocument.createRange()),Ge(n);else{var m=getSelection().getRangeAt(0);m.setEndBefore(n[n.currentMode].element),m.collapse(!1)}pt(n),Ae(n,{enableAddUndoStack:!1,enableHint:!1,enableInput:!0}),kn(n),n[n.currentMode].element.querySelectorAll(".vditor-".concat(n.currentMode,"__preview[data-render='2']")).forEach(function(C){Ie(C,n)}),this[n.currentMode].undoStack.length>1?S(n.toolbar.elements,["undo"]):w(n.toolbar.elements,["undo"]),this[n.currentMode].redoStack.length!==0?S(n.toolbar.elements,["redo"]):w(n.toolbar.elements,["redo"])},e.prototype.resetStack=function(){this.ir={hasUndo:!1,lastText:"",redoStack:[],undoStack:[]},this.sv={hasUndo:!1,lastText:"",redoStack:[],undoStack:[]},this.wysiwyg={hasUndo:!1,lastText:"",redoStack:[],undoStack:[]}},e.prototype.addCaret=function(t,n){n===void 0&&(n=!1);var o;if(getSelection().rangeCount!==0&&!t[t.currentMode].element.querySelector("wbr")){var a=getSelection().getRangeAt(0);if(t[t.currentMode].element.contains(a.startContainer)){o=a.cloneRange();var s=document.createElement("span");s.className="vditor-wbr",a.insertNode(s)}}var m=t[t.currentMode].element.cloneNode(!0);m.querySelectorAll(".vditor-".concat(t.currentMode,"__preview[data-render='1']")).forEach(function(x){x.firstElementChild&&(x.firstElementChild.classList.contains("language-echarts")||x.firstElementChild.classList.contains("language-plantuml")||x.firstElementChild.classList.contains("language-mindmap")?(x.firstElementChild.removeAttribute("_echarts_instance_"),x.firstElementChild.removeAttribute("data-processed"),x.firstElementChild.innerHTML=x.previousElementSibling.firstElementChild.innerHTML,x.setAttribute("data-render","2")):x.firstElementChild.classList.contains("language-math")&&(x.setAttribute("data-render","2"),x.firstElementChild.textContent=x.firstElementChild.getAttribute("data-math"),x.firstElementChild.removeAttribute("data-math")))});var C=m.innerHTML;return t[t.currentMode].element.querySelectorAll(".vditor-wbr").forEach(function(x){x.remove()}),n&&o&&(0,F.Hc)(o),C.replace('<span class="vditor-wbr"></span>',"<wbr>")},e})(),Rc=f(673),jc=(function(){function e(t){this.defaultOptions={rtl:!1,after:void 0,cache:{enable:!0},cdn:h.g.CDN,classes:{preview:""},comment:{enable:!1},counter:{enable:!1,type:"markdown"},customRenders:[],debugger:!1,fullscreen:{index:90},height:"auto",hint:{delay:200,emoji:{"+1":"👍","-1":"👎",confused:"😕",eyes:"👀️",heart:"❤️",rocket:"🚀️",smile:"😄",tada:"🎉️"},emojiPath:"".concat(h.g.CDN,"/dist/images/emoji"),extend:[],parse:!0},icon:"ant",lang:"zh_CN",mode:"ir",outline:{enable:!1,position:"left"},placeholder:"",preview:{actions:["desktop","tablet","mobile","mp-wechat","zhihu"],delay:1e3,hljs:h.g.HLJS_OPTIONS,markdown:h.g.MARKDOWN_OPTIONS,math:h.g.MATH_OPTIONS,maxWidth:800,mode:"both",theme:h.g.THEME_OPTIONS,render:{media:{enable:!0}}},link:{isOpen:!0},image:{isPreview:!0},resize:{enable:!1,position:"bottom"},theme:"classic",toolbar:["emoji","headings","bold","italic","strike","link","|","list","ordered-list","check","outdent","indent","|","quote","line","code","inline-code","insert-before","insert-after","|","upload","record","table","|","undo","redo","|","fullscreen","edit-mode",{name:"more",toolbar:["both","code-theme","content-theme","export","outline","preview","devtools","info","help"]}],toolbarConfig:{hide:!1,pin:!1},typewriterMode:!1,undoDelay:800,upload:{extraData:{},fieldName:"file[]",filename:function(n){return n.replace(/\W/g,"")},linkToImgUrl:"",max:10*1024*1024,multiple:!0,url:"",withCredentials:!1},value:"",width:"auto"},this.options=t}return e.prototype.merge=function(){var t,n,o,a,s,m,C,x,T;this.options&&(this.options.toolbar?this.options.toolbar=this.mergeToolbar(this.options.toolbar):this.options.toolbar=this.mergeToolbar(this.defaultOptions.toolbar),!((n=(t=this.options.preview)===null||t===void 0?void 0:t.theme)===null||n===void 0)&&n.list&&(this.defaultOptions.preview.theme.list=this.options.preview.theme.list),!((s=(a=(o=this.options.preview)===null||o===void 0?void 0:o.render)===null||a===void 0?void 0:a.media)===null||s===void 0)&&s.enable&&(this.defaultOptions.preview.render.media.enable=this.options.preview.render.media.enable),!((m=this.options.hint)===null||m===void 0)&&m.emoji&&(this.defaultOptions.hint.emoji=this.options.hint.emoji),this.options.comment&&(this.defaultOptions.comment=this.options.comment),this.options.cdn&&(!((x=(C=this.options.preview)===null||C===void 0?void 0:C.theme)===null||x===void 0)&&x.path||(this.defaultOptions.preview.theme.path="".concat(this.options.cdn,"/dist/css/content-theme")),!((T=this.options.hint)===null||T===void 0)&&T.emojiPath||(this.defaultOptions.hint.emojiPath="".concat(this.options.cdn,"/dist/images/emoji"))));var P=(0,Rc.T)(this.defaultOptions,this.options);if(P.cache.enable&&!P.cache.id)throw new Error("need options.cache.id, see https://ld246.com/article/1549638745630#options");return P},e.prototype.mergeToolbar=function(t){var n=this,o=[{icon:'<svg><use xlink:href="#vditor-icon-export"></use></svg>',name:"export",tipPosition:"ne"},{hotkey:"⌘E",icon:'<svg><use xlink:href="#vditor-icon-emoji"></use></svg>',name:"emoji",tipPosition:"ne"},{hotkey:"⌘H",icon:'<svg><use xlink:href="#vditor-icon-headings"></use></svg>',name:"headings",tipPosition:"ne"},{hotkey:"⌘B",icon:'<svg><use xlink:href="#vditor-icon-bold"></use></svg>',name:"bold",prefix:"**",suffix:"**",tipPosition:"ne"},{hotkey:"⌘I",icon:'<svg><use xlink:href="#vditor-icon-italic"></use></svg>',name:"italic",prefix:"*",suffix:"*",tipPosition:"ne"},{hotkey:"⌘D",icon:'<svg><use xlink:href="#vditor-icon-strike"></use></svg>',name:"strike",prefix:"~~",suffix:"~~",tipPosition:"ne"},{hotkey:"⌘K",icon:'<svg><use xlink:href="#vditor-icon-link"></use></svg>',name:"link",prefix:"[",suffix:"](https://)",tipPosition:"n"},{name:"|"},{hotkey:"⌘L",icon:'<svg><use xlink:href="#vditor-icon-list"></use></svg>',name:"list",prefix:"* ",tipPosition:"n"},{hotkey:"⌘O",icon:'<svg><use xlink:href="#vditor-icon-ordered-list"></use></svg>',name:"ordered-list",prefix:"1. ",tipPosition:"n"},{hotkey:"⌘J",icon:'<svg><use xlink:href="#vditor-icon-check"></use></svg>',name:"check",prefix:"* [ ] ",tipPosition:"n"},{hotkey:"⇧⌘I",icon:'<svg><use xlink:href="#vditor-icon-outdent"></use></svg>',name:"outdent",tipPosition:"n"},{hotkey:"⇧⌘O",icon:'<svg><use xlink:href="#vditor-icon-indent"></use></svg>',name:"indent",tipPosition:"n"},{name:"|"},{hotkey:"⌘;",icon:'<svg><use xlink:href="#vditor-icon-quote"></use></svg>',name:"quote",prefix:"> ",tipPosition:"n"},{hotkey:"⇧⌘H",icon:'<svg><use xlink:href="#vditor-icon-line"></use></svg>',name:"line",prefix:"---",tipPosition:"n"},{hotkey:"⌘U",icon:'<svg><use xlink:href="#vditor-icon-code"></use></svg>',name:"code",prefix:"```",suffix:"\n```",tipPosition:"n"},{hotkey:"⌘G",icon:'<svg><use xlink:href="#vditor-icon-inline-code"></use></svg>',name:"inline-code",prefix:"`",suffix:"`",tipPosition:"n"},{hotkey:"⇧⌘B",icon:'<svg><use xlink:href="#vditor-icon-before"></use></svg>',name:"insert-before",tipPosition:"n"},{hotkey:"⇧⌘E",icon:'<svg><use xlink:href="#vditor-icon-after"></use></svg>',name:"insert-after",tipPosition:"n"},{name:"|"},{icon:'<svg><use xlink:href="#vditor-icon-upload"></use></svg>',name:"upload",tipPosition:"n"},{icon:'<svg><use xlink:href="#vditor-icon-record"></use></svg>',name:"record",tipPosition:"n"},{hotkey:"⌘M",icon:'<svg><use xlink:href="#vditor-icon-table"></use></svg>',name:"table",prefix:"| col1",suffix:` | col2 | col3 |
| --- | --- | --- |
|  |  |  |
|  |  |  |`,tipPosition:"n"},{name:"|"},{hotkey:"⌘Z",icon:'<svg><use xlink:href="#vditor-icon-undo"></use></svg>',name:"undo",tipPosition:"nw"},{hotkey:"⌘Y",icon:'<svg><use xlink:href="#vditor-icon-redo"></use></svg>',name:"redo",tipPosition:"nw"},{name:"|"},{icon:'<svg><use xlink:href="#vditor-icon-more"></use></svg>',name:"more",tipPosition:"e"},{hotkey:"⌘'",icon:'<svg><use xlink:href="#vditor-icon-fullscreen"></use></svg>',name:"fullscreen",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-edit"></use></svg>',name:"edit-mode",tipPosition:"nw"},{hotkey:"⌘P",icon:'<svg><use xlink:href="#vditor-icon-both"></use></svg>',name:"both",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-preview"></use></svg>',name:"preview",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-align-center"></use></svg>',name:"outline",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-theme"></use></svg>',name:"content-theme",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-code-theme"></use></svg>',name:"code-theme",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-bug"></use></svg>',name:"devtools",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-info"></use></svg>',name:"info",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-help"></use></svg>',name:"help",tipPosition:"nw"},{name:"br"}],a=[];return t.forEach(function(s){var m=s;o.forEach(function(C){typeof s=="string"&&C.name===s&&(m=C),typeof s=="object"&&C.name===s.name&&(m=Object.assign({},C,s))}),s.toolbar&&(m.toolbar=n.mergeToolbar(s.toolbar)),a.push(m)}),a},e})(),Bc=(function(){function e(t){var n=this;this.composingLock=!1,this.commentIds=[];var o=document.createElement("div");o.className="vditor-wysiwyg",o.innerHTML='<pre class="vditor-reset" placeholder="'.concat(t.options.placeholder,`"
 contenteditable="true" spellcheck="false"></pre>
<div class="vditor-panel vditor-panel--none"></div>
<div class="vditor-panel vditor-panel--none">
    <button type="button" aria-label="`).concat(window.VditorI18n.comment,`" class="vditor-icon vditor-tooltipped vditor-tooltipped__n">
        <svg><use xlink:href="#vditor-icon-comment"></use></svg>
    </button>
</div>`),this.element=o.firstElementChild,this.popover=o.firstElementChild.nextElementSibling,this.selectPopover=o.lastElementChild,this.bindEvent(t),hi(t,this.element),Mo(t,this.element),mi(t,this.element),vi(t,this.element),wi(t,this.element),gi(t,this.element),yi(t,this.element,this.copy),bi(t,this.element,this.copy),t.options.comment.enable&&(this.selectPopover.querySelector("button").onclick=function(){var a=Lute.NewNodeID(),s=getSelection().getRangeAt(0),m=s.cloneRange(),C=s.extractContents(),x,T,P=!1,W=!1;C.childNodes.forEach(function(Q,ce){var le=!1;if(Q.nodeType===3?le=!0:Q.classList.contains("vditor-comment")?Q.classList.contains("vditor-comment")&&Q.setAttribute("data-cmtids",Q.getAttribute("data-cmtids")+" "+a):le=!0,le)if(Q.nodeType!==3&&Q.getAttribute("data-block")==="0"&&ce===0&&m.startOffset>0)Q.innerHTML='<span class="vditor-comment" data-cmtids="'.concat(a,'">').concat(Q.innerHTML,"</span>"),x=Q;else if(Q.nodeType!==3&&Q.getAttribute("data-block")==="0"&&ce===C.childNodes.length-1&&m.endOffset<m.endContainer.textContent.length)Q.innerHTML='<span class="vditor-comment" data-cmtids="'.concat(a,'">').concat(Q.innerHTML,"</span>"),T=Q;else if(Q.nodeType!==3&&Q.getAttribute("data-block")==="0")ce===0?P=!0:ce===C.childNodes.length-1&&(W=!0),Q.innerHTML='<span class="vditor-comment" data-cmtids="'.concat(a,'">').concat(Q.innerHTML,"</span>");else{var ee=document.createElement("span");ee.classList.add("vditor-comment"),ee.setAttribute("data-cmtids",a),Q.parentNode.insertBefore(ee,Q),ee.appendChild(Q)}});var te=(0,u.F9)(m.startContainer);te&&(x?(te.insertAdjacentHTML("beforeend",x.innerHTML),x.remove()):te.textContent.trim().replace(h.g.ZWSP,"")===""&&P&&te.remove());var ne=(0,u.F9)(m.endContainer);ne&&(T?(ne.insertAdjacentHTML("afterbegin",T.innerHTML),T.remove()):ne.textContent.trim().replace(h.g.ZWSP,"")===""&&W&&ne.remove()),s.insertNode(C),t.options.comment.add(a,s.toString(),n.getComments(t,!0)),fe(t,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1}),n.hideComment()})}return e.prototype.getComments=function(t,n){var o=this;if(n===void 0&&(n=!1),t.currentMode==="wysiwyg"&&t.options.comment.enable){this.commentIds=[],this.element.querySelectorAll(".vditor-comment").forEach(function(s){o.commentIds=o.commentIds.concat(s.getAttribute("data-cmtids").split(" "))}),this.commentIds=Array.from(new Set(this.commentIds));var a=[];if(n)return this.commentIds.forEach(function(s){a.push({id:s,top:o.element.querySelector('.vditor-comment[data-cmtids="'.concat(s,'"]')).offsetTop})}),a}else return[]},e.prototype.triggerRemoveComment=function(t){var n=function(s,m){var C=new Set(m);return s.filter(function(x){return!C.has(x)})};if(t.currentMode==="wysiwyg"&&t.options.comment.enable&&t.wysiwyg.commentIds.length>0){var o=JSON.parse(JSON.stringify(this.commentIds));this.getComments(t);var a=n(o,this.commentIds);a.length>0&&t.options.comment.remove(a)}},e.prototype.showComment=function(){var t=(0,F.Ny)(this.element);this.selectPopover.setAttribute("style","left:".concat(t.left,"px;display:block;top:").concat(Math.max(-8,t.top-21),"px"))},e.prototype.hideComment=function(){this.selectPopover.setAttribute("style","display:none")},e.prototype.unbindListener=function(){window.removeEventListener("scroll",this.scrollListener)},e.prototype.copy=function(t,n){var o=getSelection().getRangeAt(0);if(o.toString()!==""){t.stopPropagation(),t.preventDefault();var a=(0,u.lG)(o.startContainer,"CODE"),s=(0,u.lG)(o.endContainer,"CODE");if(a&&s&&s.isSameNode(a)){var m="";a.parentElement.tagName==="PRE"?m=o.toString():m="`"+o.toString()+"`",t.clipboardData.setData("text/plain",m),t.clipboardData.setData("text/html","");return}var C=(0,u.lG)(o.startContainer,"A"),x=(0,u.lG)(o.endContainer,"A");if(C&&x&&x.isSameNode(C)){var T=C.getAttribute("title")||"";T&&(T=' "'.concat(T,'"')),t.clipboardData.setData("text/plain","[".concat(o.toString(),"](").concat(C.getAttribute("href")).concat(T,")")),t.clipboardData.setData("text/html","");return}var P=document.createElement("div");P.appendChild(o.cloneContents()),t.clipboardData.setData("text/plain",n.lute.VditorDOM2Md(P.innerHTML).trim()),t.clipboardData.setData("text/html","")}},e.prototype.bindEvent=function(t){var n=this;this.unbindListener(),window.addEventListener("scroll",this.scrollListener=function(){if(M(t,["hint"]),!(n.popover.style.display!=="block"||n.selectPopover.style.display!=="block")){var o=parseInt(n.popover.getAttribute("data-top"),10);if(t.options.height!=="auto"){if(t.options.toolbarConfig.pin&&t.toolbar.element.getBoundingClientRect().top===0){var a=Math.max(window.scrollY-t.element.offsetTop-8,Math.min(o-t.wysiwyg.element.scrollTop,n.element.clientHeight-21))+"px";n.popover.style.display==="block"&&(n.popover.style.top=a),n.selectPopover.style.display==="block"&&(n.selectPopover.style.top=a)}return}else if(!t.options.toolbarConfig.pin)return;var s=Math.max(o,window.scrollY-t.element.offsetTop-8)+"px";n.popover.style.display==="block"&&(n.popover.style.top=s),n.selectPopover.style.display==="block"&&(n.selectPopover.style.top=s)}}),this.element.addEventListener("scroll",function(){if(M(t,["hint"]),t.options.comment&&t.options.comment.enable&&t.options.comment.scroll&&t.options.comment.scroll(t.wysiwyg.element.scrollTop),n.popover.style.display==="block"){var o=parseInt(n.popover.getAttribute("data-top"),10)-t.wysiwyg.element.scrollTop,a=-8;t.options.toolbarConfig.pin&&t.toolbar.element.getBoundingClientRect().top===0&&(a=window.scrollY-t.element.offsetTop+a);var s=Math.max(a,Math.min(o,n.element.clientHeight-21))+"px";n.popover.style.top=s,n.selectPopover.style.top=s}}),this.element.addEventListener("paste",function(o){Mr(t,o,{pasteCode:function(a){var s=(0,F.zh)(t),m=document.createElement("template");m.innerHTML=a,s.insertNode(m.content.cloneNode(!0));var C=(0,u.a1)(s.startContainer,"data-block","0");C?C.outerHTML=t.lute.SpinVditorDOM(C.outerHTML):t.wysiwyg.element.innerHTML=t.lute.SpinVditorDOM(t.wysiwyg.element.innerHTML),(0,F.ib)(t.wysiwyg.element,s)}})}),this.element.addEventListener("compositionstart",function(){n.composingLock=!0}),this.element.addEventListener("compositionend",function(o){var a=(0,k.W)(getSelection().getRangeAt(0).startContainer);if(a&&a.textContent===""){pt(t);return}(0,d.vU)()||Cr(t,getSelection().getRangeAt(0).cloneRange(),o),n.composingLock=!1}),this.element.addEventListener("input",function(o){if(!(o.inputType==="deleteByDrag"||o.inputType==="insertFromDrop")){if(n.preventInput){n.preventInput=!1,fe(t);return}if(n.composingLock||o.data==="‘"||o.data==="“"||o.data==="《"){fe(t);return}var a=getSelection().getRangeAt(0),s=(0,u.F9)(a.startContainer);if(s||(yt(t,a),s=(0,u.F9)(a.startContainer)),!!s){for(var m=(0,F.im)(s,t.wysiwyg.element,a).start,C=!0,x=m-1;x>s.textContent.substr(0,m).lastIndexOf(`
`);x--)if(s.textContent.charAt(x)!==" "&&s.textContent.charAt(x)!=="	"){C=!1;break}m===0&&(C=!1);for(var T=!0,x=m-1;x<s.textContent.length;x++)if(s.textContent.charAt(x)!==" "&&s.textContent.charAt(x)!==`
`){T=!1;break}T&&/^#{1,6} $/.test(s.textContent)&&(T=!1);var P=(0,k.W)(getSelection().getRangeAt(0).startContainer);if(P&&P.textContent===""&&(pt(t),P.remove()),C&&s.getAttribute("data-type")!=="code-block"||T||_i(s.innerHTML)||Ti(s.innerHTML)&&s.previousElementSibling){typeof t.options.input=="function"&&t.options.input(H(t));return}o.inputType==="insertParagraph"&&n.element.innerHTML==="<p><br></p><p><br></p>"&&s.previousElementSibling.remove(),Cr(t,a,o)}}}),this.element.addEventListener("click",function(o){if(o.target.tagName==="INPUT"){var a=o.target;a.checked?a.setAttribute("checked","checked"):a.removeAttribute("checked"),n.preventInput=!0,getSelection().rangeCount>0&&(0,F.Hc)(getSelection().getRangeAt(0)),fe(t);return}if(o.target.tagName==="IMG"&&!o.target.parentElement.classList.contains("vditor-wysiwyg__preview")){o.target.getAttribute("data-type")==="link-ref"?_o(t,o.target):dl(o,t);return}var s=(0,u.lG)(o.target,"A");if(s){t.options.link.click?t.options.link.click(s):t.options.link.isOpen&&window.open(s.getAttribute("href")),o.preventDefault();return}var m=(0,F.zh)(t);if(o.target.isEqualNode(n.element)&&n.element.lastElementChild&&m.collapsed){var C=n.element.lastElementChild.getBoundingClientRect();o.y>C.top+C.height&&(n.element.lastElementChild.tagName==="P"&&n.element.lastElementChild.textContent.trim().replace(h.g.ZWSP,"")===""?(m.selectNodeContents(n.element.lastElementChild),m.collapse(!1)):(n.element.insertAdjacentHTML("beforeend",'<p data-block="0">'.concat(h.g.ZWSP,"<wbr></p>")),(0,F.ib)(n.element,m)))}Pt(t);var x=(0,u.fb)(o.target,"vditor-wysiwyg__preview");x||(x=(0,u.fb)((0,F.zh)(t).startContainer,"vditor-wysiwyg__preview")),x&&Ze(x,t),nn(o,t)}),this.element.addEventListener("keyup",function(o){if(!(o.isComposing||(0,d.yl)(o))){o.key==="Enter"&&Ge(t),(o.key==="Backspace"||o.key==="Delete")&&t.wysiwyg.element.innerHTML!==""&&t.wysiwyg.element.childNodes.length===1&&t.wysiwyg.element.firstElementChild&&t.wysiwyg.element.firstElementChild.tagName==="P"&&t.wysiwyg.element.firstElementChild.childElementCount===0&&(t.wysiwyg.element.textContent===""||t.wysiwyg.element.textContent===`
`)&&(t.wysiwyg.element.innerHTML="");var a=(0,F.zh)(t);if(o.key==="Backspace"&&(0,d.vU)()&&a.startContainer.textContent===`
`&&a.startOffset===1&&(a.startContainer.textContent=""),yt(t,a),Pt(t),!(o.key!=="ArrowDown"&&o.key!=="ArrowRight"&&o.key!=="Backspace"&&o.key!=="ArrowLeft"&&o.key!=="ArrowUp")){(o.key==="ArrowLeft"||o.key==="ArrowRight")&&t.hint.render(t);var s=(0,u.fb)(a.startContainer,"vditor-wysiwyg__preview");if(!s&&a.startContainer.nodeType!==3&&a.startOffset>0){var m=a.startContainer;m.classList.contains("vditor-wysiwyg__block")&&(s=m.lastElementChild)}if(s){var C=s.previousElementSibling;if(C.style.display==="none"){o.key==="ArrowDown"||o.key==="ArrowRight"?Ze(s,t):Ze(s,t,!1);return}var x=s.previousElementSibling;if(x.tagName==="PRE"&&(x=x.firstElementChild),o.key==="ArrowDown"||o.key==="ArrowRight"){var m=s.parentElement,T=at(m);if(T&&T.nodeType!==3){var P=T.querySelector(".vditor-wysiwyg__preview");if(P){Ze(P,t);return}}if(T.nodeType===3){for(;T.textContent.length===0&&T.nextSibling;)T=T.nextSibling;a.setStart(T,1)}else a.setStart(T.firstChild,0)}else a.selectNodeContents(x),a.collapse(!1)}}}})},e})(),Fc=(function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,a){o.__proto__=a}||function(o,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(o[s]=a[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}})(),Uc=(function(e){Fc(t,e);function t(n,o){var a=e.call(this)||this;if(a.isDestroyed=!1,a.version=h.H,typeof n=="string"){if(o?o.cache?o.cache.id||(o.cache.id="vditor".concat(n)):o.cache={id:"vditor".concat(n)}:o={cache:{id:"vditor".concat(n)}},!document.getElementById(n))return a.showErrorTip("Failed to get element by id: ".concat(n)),a;n=document.getElementById(n)}var s=new jc(o),m=s.merge();if(m.i18n)window.VditorI18n=m.i18n,a.init(n,m);else if(["de_DE","en_US","es_ES","fr_FR","ja_JP","ko_KR","pt_BR","ru_RU","sv_SE","vi_VN","zh_CN","zh_TW"].includes(m.lang)){var C="vditorI18nScript",x=C+m.lang;document.querySelectorAll('head script[id^="'.concat(C,'"]')).forEach(function(T){T.id!==x&&document.head.removeChild(T)}),(0,_.G)("".concat(m.cdn,"/dist/js/i18n/").concat(m.lang,".js"),x).then(function(){a.init(n,m)}).catch(function(T){a.showErrorTip("GET ".concat(m.cdn,"/dist/js/i18n/").concat(m.lang,".js net::ERR_ABORTED 404 (Not Found)"))})}else throw new Error("options.lang error, see https://ld246.com/article/1549638745630#options");return a}return t.prototype.showErrorTip=function(n){var o=new na;document.body.appendChild(o.element),o.show(n,0)},t.prototype.updateToolbarConfig=function(n){this.vditor.toolbar.updateConfig(this.vditor,n)},t.prototype.setTheme=function(n,o,a,s){this.vditor.options.theme=n,X(this.vditor),o&&(this.vditor.options.preview.theme.current=o,(0,G.Z)(o,s||this.vditor.options.preview.theme.path)),a&&(this.vditor.options.preview.hljs.style=a,(0,ra.Y)(a,this.vditor.options.cdn))},t.prototype.getValue=function(){return H(this.vditor)},t.prototype.getCurrentMode=function(){return this.vditor.currentMode},t.prototype.focus=function(){this.vditor.currentMode==="sv"?this.vditor.sv.element.focus():this.vditor.currentMode==="wysiwyg"?this.vditor.wysiwyg.element.focus():this.vditor.currentMode==="ir"&&this.vditor.ir.element.focus()},t.prototype.blur=function(){this.vditor.currentMode==="sv"?this.vditor.sv.element.blur():this.vditor.currentMode==="wysiwyg"?this.vditor.wysiwyg.element.blur():this.vditor.currentMode==="ir"&&this.vditor.ir.element.blur()},t.prototype.disabled=function(){M(this.vditor,["subToolbar","hint","popover"]),w(this.vditor.toolbar.elements,h.g.EDIT_TOOLBARS.concat(["undo","redo","fullscreen","edit-mode"])),this.vditor[this.vditor.currentMode].element.setAttribute("contenteditable","false")},t.prototype.enable=function(){S(this.vditor.toolbar.elements,h.g.EDIT_TOOLBARS.concat(["undo","redo","fullscreen","edit-mode"])),this.vditor.undo.resetIcon(this.vditor),this.vditor[this.vditor.currentMode].element.setAttribute("contenteditable","true")},t.prototype.getSelection=function(){if(this.vditor.currentMode==="wysiwyg")return zn(this.vditor.wysiwyg.element);if(this.vditor.currentMode==="sv")return zn(this.vditor.sv.element);if(this.vditor.currentMode==="ir")return zn(this.vditor.ir.element)},t.prototype.renderPreview=function(n){this.vditor.preview.render(this.vditor,n)},t.prototype.getCursorPosition=function(){return(0,F.Ny)(this.vditor[this.vditor.currentMode].element)},t.prototype.isUploading=function(){return this.vditor.upload.isUploading},t.prototype.clearCache=function(){this.vditor.options.cache.enable&&(0,d.pK)()&&localStorage.removeItem(this.vditor.options.cache.id)},t.prototype.disabledCache=function(){this.vditor.options.cache.enable=!1},t.prototype.enableCache=function(){if(!this.vditor.options.cache.id)throw new Error("need options.cache.id, see https://ld246.com/article/1549638745630#options");this.vditor.options.cache.enable=!0},t.prototype.html2md=function(n){return this.vditor.lute.HTML2Md(n)},t.prototype.exportJSON=function(n){return this.vditor.lute.RenderJSON(n)},t.prototype.getHTML=function(){return ea(this.vditor)},t.prototype.tip=function(n,o){this.vditor.tip.show(n,o)},t.prototype.setPreviewMode=function(n){Ai(n,this.vditor)},t.prototype.deleteValue=function(){window.getSelection().isCollapsed||document.execCommand("delete",!1)},t.prototype.updateValue=function(n){document.execCommand("insertHTML",!1,n)},t.prototype.insertValue=function(n,o){o===void 0&&(o=!0);var a=(0,F.zh)(this.vditor);a.collapse(!0);var s=document.createElement("template");s.innerHTML=n,a.insertNode(s.content.cloneNode(!0)),a.collapse(!1),this.vditor.currentMode==="sv"?(this.vditor.sv.preventInput=!0,o&&V(this.vditor)):this.vditor.currentMode==="wysiwyg"?o&&Cr(this.vditor,getSelection().getRangeAt(0)):this.vditor.currentMode==="ir"&&(this.vditor.ir.preventInput=!0,o&&Z(this.vditor,getSelection().getRangeAt(0),!0))},t.prototype.insertMD=function(n){this.vditor.currentMode==="ir"?(0,F.oC)(this.vditor.lute.Md2VditorIRDOM(n),this.vditor):this.vditor.currentMode==="wysiwyg"?(0,F.oC)(this.vditor.lute.Md2VditorDOM(n),this.vditor):Ei(this.vditor,n),this.vditor.outline.render(this.vditor),Ae(this.vditor)},t.prototype.setValue=function(n,o){var a=this;o===void 0&&(o=!1),this.vditor.currentMode==="sv"?(this.vditor.sv.element.innerHTML="<div data-block='0'>".concat(this.vditor.lute.SpinVditorSVDOM(n),"</div>"),Xe(this.vditor,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1})):this.vditor.currentMode==="wysiwyg"?Lo(this.vditor,n,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1}):(this.vditor.ir.element.innerHTML=this.vditor.lute.Md2VditorIRDOM(n),this.vditor.ir.element.querySelectorAll(".vditor-ir__preview[data-render='2']").forEach(function(s){Ie(s,a.vditor)}),Vt(this.vditor,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1})),this.vditor.outline.render(this.vditor),n||(M(this.vditor,["emoji","headings","submenu","hint"]),this.vditor.wysiwyg.popover&&(this.vditor.wysiwyg.popover.style.display="none"),this.clearCache()),o&&this.clearStack()},t.prototype.insertEmptyBlock=function(n){Gn(this.vditor,n)},t.prototype.clearStack=function(){this.vditor.undo.clearStack(this.vditor),this.vditor.undo.addToUndoStack(this.vditor)},t.prototype.destroy=function(){this.vditor.element.innerHTML=this.vditor.originalInnerHTML,this.vditor.element.classList.remove("vditor"),this.vditor.element.removeAttribute("style");var n=document.getElementById("vditorIconScript");n&&n.remove(),this.clearCache(),we(),this.vditor.wysiwyg.unbindListener(),this.vditor.options.after=void 0,this.isDestroyed=!0},t.prototype.getCommentIds=function(){return this.vditor.currentMode!=="wysiwyg"?[]:this.vditor.wysiwyg.getComments(this.vditor,!0)},t.prototype.hlCommentIds=function(n){if(this.vditor.currentMode==="wysiwyg"){var o=function(a){a.classList.remove("vditor-comment--hover"),n.forEach(function(s){a.getAttribute("data-cmtids").indexOf(s)>-1&&a.classList.add("vditor-comment--hover")})};this.vditor.wysiwyg.element.querySelectorAll(".vditor-comment").forEach(function(a){o(a)}),this.vditor.preview.element.style.display!=="none"&&this.vditor.preview.element.querySelectorAll(".vditor-comment").forEach(function(a){o(a)})}},t.prototype.unHlCommentIds=function(n){if(this.vditor.currentMode==="wysiwyg"){var o=function(a){n.forEach(function(s){a.getAttribute("data-cmtids").indexOf(s)>-1&&a.classList.remove("vditor-comment--hover")})};this.vditor.wysiwyg.element.querySelectorAll(".vditor-comment").forEach(function(a){o(a)}),this.vditor.preview.element.style.display!=="none"&&this.vditor.preview.element.querySelectorAll(".vditor-comment").forEach(function(a){o(a)})}},t.prototype.removeCommentIds=function(n){var o=this;if(this.vditor.currentMode==="wysiwyg"){var a=function(s,m){var C=s.getAttribute("data-cmtids").split(" ");C.find(function(x,T){if(x===m)return C.splice(T,1),!0}),C.length===0?(s.outerHTML=s.innerHTML,(0,F.zh)(o.vditor).collapse(!0)):s.setAttribute("data-cmtids",C.join(" "))};n.forEach(function(s){o.vditor.wysiwyg.element.querySelectorAll(".vditor-comment").forEach(function(m){a(m,s)}),o.vditor.preview.element.style.display!=="none"&&o.vditor.preview.element.querySelectorAll(".vditor-comment").forEach(function(m){a(m,s)})}),fe(this.vditor,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1})}},t.prototype.init=function(n,o){var a=this;this.isDestroyed||(this.vditor={currentMode:o.mode,element:n,hint:new Dl(o.hint.extend),lute:void 0,options:o,originalInnerHTML:n.innerHTML,outline:new Nl(window.VditorI18n.outline),tip:new na},this.vditor.sv=new jl(this.vditor),this.vditor.undo=new Ic,this.vditor.wysiwyg=new Bc(this.vditor),this.vditor.ir=new Ol(this.vditor),this.vditor.toolbar=new Nc(this.vditor),o.resize.enable&&(this.vditor.resize=new Rl(this.vditor)),this.vditor.toolbar.elements.devtools&&(this.vditor.devtools=new p),(o.upload.url||o.upload.handler)&&(this.vditor.upload=new El),(0,_.G)(o._lutePath||"".concat(o.cdn,"/dist/js/lute/lute.min.js"),"vditorLuteScript").then(function(){a.vditor.lute=(0,Hl.X)({autoSpace:a.vditor.options.preview.markdown.autoSpace,gfmAutoLink:a.vditor.options.preview.markdown.gfmAutoLink,codeBlockPreview:a.vditor.options.preview.markdown.codeBlockPreview,emojiSite:a.vditor.options.hint.emojiPath,emojis:a.vditor.options.hint.emoji,fixTermTypo:a.vditor.options.preview.markdown.fixTermTypo,footnotes:a.vditor.options.preview.markdown.footnotes,headingAnchor:!1,inlineMathDigit:a.vditor.options.preview.math.inlineDigit,linkBase:a.vditor.options.preview.markdown.linkBase,linkPrefix:a.vditor.options.preview.markdown.linkPrefix,listStyle:a.vditor.options.preview.markdown.listStyle,mark:a.vditor.options.preview.markdown.mark,mathBlockPreview:a.vditor.options.preview.markdown.mathBlockPreview,paragraphBeginningSpace:a.vditor.options.preview.markdown.paragraphBeginningSpace,sanitize:a.vditor.options.preview.markdown.sanitize,toc:a.vditor.options.preview.markdown.toc}),a.vditor.preview=new Il(a.vditor),oe(a.vditor),o.after&&o.after(),o.icon&&(0,_.J)("".concat(o.cdn,"/dist/js/icons/").concat(o.icon,".js"),"vditorIconScript")}))},t})(b.default);const Vc=Uc})(),g=g.default,g})()})})(Ur)),Ur.exports}var Zd=Jd();const Xd=zd(Zd),Yd={class:"markdown-editor"},Qd=Kn({__name:"BlockEditor",props:{note:{},isSidebarCollapsed:{type:Boolean}},emits:["update","toggle-sidebar"],setup(r,{emit:i}){const l=r,c=i,f=ct();let g=null,b=null,h=!1,y=null,H=null;function _(){return{name:"sidebar-toggle",tipPosition:"s",tip:"切换侧边栏",className:"sidebar-toggle-btn",icon:l.isSidebarCollapsed?`<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
           <rect x="3" y="3" width="7" height="18" rx="1" stroke-width="2" />
           <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12h5m-2-2l2 2-2 2" />
         </svg>`:`<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
           <rect x="3" y="3" width="7" height="18" rx="1" stroke-width="2" />
           <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12h-5m2-2l-2 2 2 2" />
         </svg>`,click(){c("toggle-sidebar")}}}function p(){if(!g||!f.value)return;const R=f.value.querySelector(".vditor-toolbar");if(!R)return;const N=R.querySelector(".sidebar-toggle-btn button");if(!N)return;const B=l.isSidebarCollapsed?`<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
         <rect x="3" y="3" width="7" height="18" rx="1" stroke-width="2" />
         <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12h5m-2-2l2 2-2 2" />
       </svg>`:`<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
         <rect x="3" y="3" width="7" height="18" rx="1" stroke-width="2" />
         <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12h-5m2-2l-2 2 2 2" />
       </svg>`;N.innerHTML=B;const q="切换侧边栏",J=N.closest(".vditor-toolbar__item");J&&(J.setAttribute("aria-label",q),J.setAttribute("data-tip",q))}const d=["emoji","headings","bold","italic","strike","|","line","quote","list","ordered-list","check","|","code","inline-code","link","table","|","undo","redo","|","edit-mode","outline",_()],E={minimal:["bold","italic","list","link","undo","redo"],compact:["headings","bold","italic","list","ordered-list","code","link","undo","redo"],medium:["headings","bold","italic","strike","list","ordered-list","check","code","link","table","undo","redo"],full:["emoji","headings","bold","italic","strike","line","quote","list","ordered-list","check","code","inline-code","link","table","undo","redo","edit-mode","outline"]};function v(R){return R>=800?"full":R>=600?"medium":R>=400?"compact":"minimal"}function S(R){if(!f.value)return;const N=f.value.querySelector(".vditor-toolbar");if(!N)return;const B=new Set(E[R]);N.querySelectorAll(".vditor-toolbar__item").forEach(se=>{const he=se.querySelector("button[data-type]");if(he){const Ce=he.getAttribute("data-type");if(Ce==="sidebar-toggle"){se.style.display="";return}Ce&&B.has(Ce)?se.style.display="":se.style.display="none"}}),N.querySelectorAll(".vditor-toolbar__divider").forEach((se,he)=>{(R==="minimal"||R==="compact")&&he>1?se.style.display="none":se.style.display=""})}function w(R){return new Promise((N,B)=>{const q=new FileReader;q.onload=()=>N(q.result),q.onerror=B,q.readAsDataURL(R)})}async function D(){if(!g){console.log("convertLocalImagesToBase64: vditor 未初始化");return}const R=f.value?.querySelector(".vditor-ir");if(!R){console.log("convertLocalImagesToBase64: 未找到编辑器元素");return}const N=R.querySelectorAll("img");console.log("convertLocalImagesToBase64: 找到",N.length,"个图片元素");for(const B of Array.from(N)){const q=B.getAttribute("src");if(q&&(q.includes("\\images\\")||q.includes("/images/")||q.includes("notebook"))&&!q.startsWith("data:")){if(B.getAttribute("data-original-path")===q){console.log("图片已转换，跳过:",q);continue}try{console.log("开始转换本地图片:",q);const se=await window.naimo.system.getLocalImage(q);if(se){const he=q.split(".").pop()?.toLowerCase();let Ce="image/png";he==="jpg"||he==="jpeg"?Ce="image/jpeg":he==="gif"?Ce="image/gif":he==="webp"&&(Ce="image/webp");const Le=`data:${Ce};base64,${se}`;console.log("图片转换成功，更新显示"),B.src=Le,B.classList.add("local-image-loaded"),B.setAttribute("data-original-path",q)}else console.log("图片转换失败，返回空:",q),B.classList.add("local-image-error")}catch(se){console.error("转换本地图片失败:",q,se),B.classList.add("local-image-error")}}}}function A(){if(!f.value)return null;const R=f.value.querySelector(".vditor-ir");if(!R)return null;const N=new MutationObserver(B=>{if(!g||!f.value)return;let q=!1;for(const J of B){if(J.addedNodes.length>0)for(const se of Array.from(J.addedNodes)){if(se.nodeName==="IMG"){q=!0;break}if(se.querySelectorAll?.("img").length>0){q=!0;break}}if(J.type==="attributes"&&J.attributeName==="src"){const se=J.target;if(se.tagName==="IMG"){const he=se.getAttribute("src");he&&(he.includes("\\images\\")||he.includes("/images/")||he.includes("notebook"))&&!he.startsWith("data:")&&(q=!0)}}}q&&setTimeout(()=>{g&&f.value&&D()},100)});return N.observe(R,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["src"]}),N}let M=null;function L(R){if(!R||R.trim()==="")return"无标题";const N=R.split(`
`);for(const B of N){const q=B.trim();if(q){const J=q.match(/^#{1,6}\s+(.+)$/);return J?J[1].slice(0,50):q.slice(0,50)}}return"无标题"}function u(R){h||(b&&clearTimeout(b),b=setTimeout(()=>{const N=L(R);c("update",R,N)},500))}function k(){f.value&&(g||(g=new Xd(f.value,{height:"100%",mode:"ir",placeholder:"开始编写你的笔记...",theme:"classic",icon:"material",toolbarConfig:{pin:!0,hide:!1},hint:{emojiPath:"https://cdn.jsdelivr.net/npm/vditor@3.10.7/dist/images/emoji"},toolbar:d,counter:{enable:!0,type:"markdown"},cache:{enable:!1},upload:{handler:async R=>{console.log("上传处理开始，文件数量:",R.length);for(const N of R)try{const B=await w(N),q=await window.myPluginAPI.saveImageFromBase64(B);console.log("图片上传成功:",N.name,"路径:",q);const J=`![${N.name}](${q})
`;g?.insertValue(J),console.log("已插入图片路径到编辑器，准备转换显示"),setTimeout(()=>{D()},300)}catch(B){console.error("图片上传失败:",B)}return null}},after:()=>{h=!0,g?.setValue(l.note.content||""),setTimeout(()=>{h=!1,setTimeout(()=>{D()},500)},100)},input:R=>{u(R)},blur:R=>{b&&clearTimeout(b);const N=L(R);c("update",R,N)}})))}function U(){f.value&&(y=new ResizeObserver(R=>{H&&clearTimeout(H),H=setTimeout(()=>{for(const N of R){const B=N.contentRect.width,q=v(B);S(q)}},100)}),y.observe(f.value))}return cr(()=>l.note.id,()=>{M&&(M.disconnect(),M=null),g?(h=!0,g.setValue(l.note.content||""),setTimeout(()=>{h=!1,setTimeout(()=>{D(),M=A()},500)},100)):k()}),cr(()=>l.isSidebarCollapsed,()=>{p()}),wr(()=>{k(),U(),setTimeout(()=>{if(M=A(),f.value){const R=f.value.offsetWidth,N=v(R);S(N)}},1e3)}),wo(()=>{b&&clearTimeout(b),H&&clearTimeout(H),M&&(M.disconnect(),M=null),y&&(y.disconnect(),y=null),g&&(g.destroy(),g=null)}),(R,N)=>(De(),We("div",Yd,[ve("div",{id:"vditor",ref_key:"vditorRef",ref:f},null,512)]))}}),ep=qn(Qd,[["__scopeId","data-v-140be073"]]),tp={class:"dialog-header"},np={class:"dialog-title"},rp={class:"dialog-body"},ip={class:"dialog-message"},op={key:0,class:"dialog-details"},ap=Kn({__name:"ConfirmDialog",props:{show:{type:Boolean},title:{default:"确认操作"},message:{},details:{default:""}},emits:["confirm","cancel"],setup(r,{emit:i}){const l=i;function c(){l("confirm")}function f(){l("cancel")}return(g,b)=>(De(),Tn(Nu,{to:"body"},[Qe(Jf,{name:"dialog-fade"},{default:$r(()=>[r.show?(De(),We("div",{key:0,class:"dialog-overlay",onClick:f},[ve("div",{class:"dialog-container",onClick:b[0]||(b[0]=Rn(()=>{},["stop"]))},[ve("div",tp,[ve("div",np,En(r.title),1)]),ve("div",rp,[ve("div",ip,En(r.message),1),r.details?(De(),We("div",op,En(r.details),1)):Jt("",!0)]),ve("div",{class:"dialog-footer"},[ve("button",{class:"dialog-btn cancel",onClick:f}," 取消 "),ve("button",{class:"dialog-btn confirm",onClick:c}," 确定 ")])])])):Jt("",!0)]),_:1})]))}}),sp=qn(ap,[["__scopeId","data-v-f3b5ad10"]]),lp=Kn({__name:"SplitPane",props:{defaultWidth:{type:Number,default:240},minWidth:{type:Number,default:180},maxWidth:{type:Number,default:500}},setup(r,{expose:i}){const l=r,c=ct(null),f=ct(l.defaultWidth),g=ct(!1),b=ct(!1);function h(H){g.value=!0,document.body.style.cursor="col-resize",document.body.style.userSelect="none";const _=d=>{if(!g.value||!c.value)return;const E=c.value.getBoundingClientRect(),v=d.clientX-E.left;v>=l.minWidth&&v<=l.maxWidth&&(f.value=v)},p=()=>{g.value=!1,document.body.style.cursor="",document.body.style.userSelect="",document.removeEventListener("mousemove",_),document.removeEventListener("mouseup",p)};document.addEventListener("mousemove",_),document.addEventListener("mouseup",p)}function y(){b.value=!b.value}return i({toggleCollapse:y,isCollapsed:b}),wr(()=>{const H=localStorage.getItem("split-pane-width");H&&(f.value=parseInt(H))}),ci(()=>{localStorage.setItem("split-pane-width",f.value.toString())}),(H,_)=>(De(),We("div",{class:"split-pane",ref_key:"containerRef",ref:c},[zr(ve("div",{class:"split-pane-left",style:Cn({width:f.value+"px"})},[wa(H.$slots,"left",{},void 0)],4),[[Ba,!b.value]]),zr(ve("div",{class:"split-divider",onMousedown:h},[..._[0]||(_[0]=[ve("div",{class:"divider-line"},null,-1)])],544),[[Ba,!b.value]]),ve("div",{class:"split-pane-right",style:Cn({flex:b.value?1:"auto"})},[wa(H.$slots,"right",{},void 0)],4)],512))}}),cp=qn(lp,[["__scopeId","data-v-b497bfd1"]]),up={class:"app-container"},fp={class:"editor-container"},dp={key:1,class:"empty-state"},pp=Kn({__name:"App",setup(r){const i=ct(null),l=Yr(()=>i.value?.isCollapsed||!1),c=ct([]),f=ct(null),g=ct(!1),b=ct({show:!1,title:"",message:"",details:"",folderId:""}),h=Yr(()=>{for(const Z of c.value){const j=y(Z,f.value);if(j){if(!window.myPluginAPI)return console.warn("myPluginAPI 不可用"),{...j,content:""};const z=window.myPluginAPI.loadNoteFromFile(j.filePath);return{...j,content:z}}}return null});function y(Z,j){if(!j)return null;const z=Z.notes.find(K=>K.id===j);if(z)return z;if(Z.subfolders)for(const K of Z.subfolders){const $=y(K,j);if($)return $}return null}async function H(){try{console.log(">>> loadData 开始加载...");const Z=await window.naimo.db.get("notebook_data");if(Z&&Z.folders)c.value=Z.folders,console.log(">>> loadData 加载完成，文件夹数:",c.value.length);else{console.log(">>> loadData 首次运行，创建默认数据");const j=Date.now().toString(),K=await window.myPluginAPI.saveNoteToFile(j,`# 欢迎使用笔记本

这是一个现代化的块级编辑器，支持即时转换 Markdown 语法。

## ✨ 核心特性

- 📝 块级编辑 - 每个内容块独立编辑
- ⚡ 即时转换 - 输入语法后按回车立即渲染
- 🎨 语法高亮 - 支持多种编程语言
- 🗂️ 文件管理 - VSCode 风格的树形结构

## 🚀 快速开始

### 创建标题
输入 # 后跟空格，按回车创建标题
### 代码块
输入 \`\`\`语言名 按回车创建代码块

\`\`\`javascript
// 这是一个代码块示例
const greeting = "Hello, World!";
console.log(greeting);
\`\`\`

### 列表
输入 - 或 * 后跟空格创建无序列表
输入 1. 后跟空格创建有序列表

- 无序列表项 1
- 无序列表项 2

### 引用
输入 > 后跟空格创建引用

> 这是一条引用内容

### 分割线
输入 --- 按回车创建分割线

---

## 💡 使用技巧

- 按 Enter 创建新块
- 按 Backspace 删除空块  
- 点击左侧图标切换块类型
- 支持上下箭头键在块间导航

开始创作你的笔记吧！`);c.value=[{id:"root",name:"我的笔记",expanded:!0,notes:[{id:j,title:"欢迎使用笔记本",filePath:K,createdAt:Date.now(),updatedAt:Date.now()}],subfolders:[]}],await _()}g.value=!0,console.log(">>> loadData 完成，isDataLoaded =",g.value)}catch(Z){console.error("加载数据失败:",Z),g.value=!0}}async function _(){try{console.log(">>> saveData 开始"),console.log(">>> folders.value 数量:",c.value.length);const Z=JSON.parse(JSON.stringify(He(c.value)));console.log(">>> 序列化后的 folders 数量:",Z.length);const j=Z.find(me=>me.name==="小记");j?(console.log(">>> 小记文件夹找到，笔记数:",j.notes.length),console.log(">>> 小记文件夹内容:",JSON.stringify(j,null,2))):console.log(">>> 小记文件夹未找到");let z={_id:"notebook_data"};try{const me=await window.naimo.db.get("notebook_data");me&&(z._rev=me._rev,console.log(">>> 现有文档 _rev:",z._rev))}catch{console.log(">>> 首次保存数据，无 _rev")}z.folders=Z,console.log(">>> 准备调用 db.put，文档内容:",JSON.stringify(z,null,2).substring(0,500));const K=await window.naimo.db.put(z);console.log(">>> 数据库保存成功，结果:",K);const $=await window.naimo.db.get("notebook_data");if($&&$.folders){const me=$.folders.find(O=>O.name==="小记");console.log(">>> 验证：数据库中小记文件夹笔记数:",me?.notes.length||0)}}catch(Z){console.error(">>> 保存数据失败:",Z)}}async function p(Z){const j=J(c.value,Z);if(!j)return;j.expanded=!0;const z=Date.now().toString(),K=await window.myPluginAPI.saveNoteToFile(z,""),$={id:z,title:"新笔记",filePath:K,folderId:Z,createdAt:Date.now(),updatedAt:Date.now()};j.notes.unshift($),f.value=$.id,await _()}function d(Z){const j={id:Date.now().toString(),name:"新文件夹",expanded:!0,notes:[],subfolders:[]};if(Z){const z=J(c.value,Z);z&&(z.subfolders||(z.subfolders=[]),z.subfolders.push(j))}else c.value.push(j);_()}function E(Z){f.value=Z}async function v(Z,j){if(!h.value)return;let z=null;for(const K of c.value){const $=y(K,h.value.id);if($){z=$;break}}z&&(window.myPluginAPI.updateNoteFile(z.filePath,Z),z.title=j,z.updatedAt=Date.now(),await _())}async function S(Z){let j=null;for(const $ of c.value){const me=y($,Z);if(me){j=me;break}}if(!j)return;const z=window.myPluginAPI?.loadNoteFromFile(j.filePath)||"";if(await window.myPluginAPI?.hasImages(z)){const $=await window.myPluginAPI?.extractImagePaths(z)||[];b.value={show:!0,title:"删除笔记",message:`确定要删除笔记"${j.title}"吗？`,details:`此笔记包含 ${$.length} 张图片，删除笔记时将同时删除这些图片文件。`,folderId:Z}}else w(Z)}async function w(Z){let j=null;for(const z of c.value){const K=y(z,Z);if(K){j=K;break}}if(j&&window.myPluginAPI){const z=window.myPluginAPI.loadNoteFromFile(j.filePath);if(z){const K=await window.myPluginAPI.extractImagePaths(z);for(const $ of K)try{window.myPluginAPI.deleteImage($)}catch(me){console.error("删除图片文件失败:",$,me)}}try{window.myPluginAPI.deleteNoteFile(j.filePath)}catch(K){console.error("删除笔记文件失败:",K)}}for(const z of c.value)if(D(z,Z)){f.value===Z&&(f.value=null),await _();break}}function D(Z,j){const z=Z.notes.findIndex(K=>K.id===j);if(z>-1)return Z.notes.splice(z,1),!0;if(Z.subfolders){for(const K of Z.subfolders)if(D(K,j))return!0}return!1}function A(Z){const j=J(c.value,Z);if(!j)return;const{noteCount:z,subfolderCount:K}=M(j);if(z>0||K>0){const $=[];z>0&&$.push(`${z} 个笔记`),K>0&&$.push(`${K} 个子文件夹`),b.value={show:!0,title:"删除文件夹",message:`确定要删除文件夹"${j.name}"吗？`,details:`此操作将同时删除：${$.join("、")}`,folderId:Z}}else k(Z)}function M(Z){let j=Z.notes.length,z=Z.subfolders?.length||0;if(Z.subfolders)for(const K of Z.subfolders){const $=M(K);j+=$.noteCount,z+=$.subfolderCount}return{noteCount:j,subfolderCount:z}}async function L(Z){if(!(!Z||!window.myPluginAPI)){for(const j of Z.notes)try{const z=window.myPluginAPI.loadNoteFromFile(j.filePath);if(z){const K=await window.myPluginAPI.extractImagePaths(z);for(const $ of K)try{window.myPluginAPI.deleteImage($),console.log("删除图片文件:",$)}catch(me){console.error("删除图片文件失败:",$,me)}}window.myPluginAPI.deleteNoteFile(j.filePath),console.log("删除笔记文件:",j.filePath)}catch(z){console.error("删除笔记文件失败:",j.filePath,z)}if(Z.subfolders)for(const j of Z.subfolders)await L(j)}}function u(Z,j){if(Z.notes.some(z=>z.id===j))return!0;if(Z.subfolders){for(const z of Z.subfolders)if(u(z,j))return!0}return!1}async function k(Z){const j=J(c.value,Z);if(f.value&&j&&u(j,f.value)&&(f.value=null),j&&await L(j),Se(Z),c.value.length===0){const z={id:Date.now().toString(),name:"我的笔记",expanded:!0,notes:[],subfolders:[]};c.value.push(z)}await _()}function U(){const Z=b.value.folderId;b.value.title==="删除笔记"?w(Z):k(Z),b.value.show=!1}function R(){b.value.show=!1,b.value.folderId=""}function N(Z,j){const z=J(c.value,Z);z&&j.trim()&&(z.name=j.trim(),_())}function B(Z,j){for(const z of c.value){const K=y(z,Z);if(K&&j.trim()){K.title=j.trim(),K.updatedAt=Date.now(),_();break}}}function q(){i.value?.toggleCollapse()}function J(Z,j){for(const z of Z){if(z.id===j)return z;if(z.subfolders){const K=J(z.subfolders,j);if(K)return K}}return null}function se(Z,j,z){console.log("移动项目:",{dragType:Z.type,dragId:Z.id,targetType:j.type,targetId:j.id,position:z}),Z.type==="note"?he(Z.id,j.type,j.id,z):Z.type==="folder"&&Ce(Z.id,j.type,j.id,z),_()}function he(Z,j,z,K){const $=qe(Z);if(!$)return;const me=$.notes.find(O=>O.id===Z);if(me){if(Le(Z),j==="folder"){const O=ye(z);if(!O)return;O.notes.unshift(me),me.folderId=z}else if(j==="note"){const O=qe(z);if(!O)return;const I=O.notes.findIndex(Y=>Y.id===z),V=K==="before"?I:I+1;O.notes.splice(V,0,me),me.folderId=O.id}}}function Ce(Z,j,z,K){if(Ie(Z,z)){console.warn("不能将父文件夹移动到子文件夹");return}const $=ye(Z);if(!$)return;let me=null,O=null,I=null;if(j==="folder"){if(me=ye(z),K!=="inside"&&(O=Pe(z)),!me){console.error("无法找到目标文件夹");return}}else if(j==="note"&&(I=qe(z),!I)){console.error("无法找到目标文件所在的文件夹");return}if(Se(Z),j==="folder")if(K==="inside")me.subfolders||(me.subfolders=[]),me.subfolders.unshift($);else if(O){O.subfolders||(O.subfolders=[]);const V=O.subfolders.findIndex(G=>G.id===z),Y=K==="before"?V:V+1;O.subfolders.splice(Y,0,$)}else{const V=c.value.findIndex(G=>G.id===z),Y=K==="before"?V:V+1;c.value.splice(Y,0,$)}else j==="note"&&I&&(I.subfolders||(I.subfolders=[]),I.subfolders.unshift($),I.expanded=!0)}function Le(Z){function j(z){const K=z.notes.findIndex($=>$.id===Z);if(K>-1)return z.notes.splice(K,1),!0;if(z.subfolders){for(const $ of z.subfolders)if(j($))return!0}return!1}for(const z of c.value)j(z)}function Se(Z){const j=c.value.findIndex(K=>K.id===Z);if(j>-1){c.value.splice(j,1);return}function z(K){if(!K.subfolders)return!1;const $=K.subfolders.findIndex(me=>me.id===Z);if($>-1)return K.subfolders.splice($,1),!0;for(const me of K.subfolders)if(z(me))return!0;return!1}for(const K of c.value)z(K)}function ye(Z){return J(c.value,Z)}function Pe(Z){function j(z){for(const K of z){if(K.subfolders&&K.subfolders.some($=>$.id===Z))return K;if(K.subfolders){const $=j(K.subfolders);if($)return $}}return null}return j(c.value)}function qe(Z){function j(z){if(z.notes.some(K=>K.id===Z))return z;if(z.subfolders)for(const K of z.subfolders){const $=j(K);if($)return $}return null}for(const z of c.value){const K=j(z);if(K)return K}return null}function Ie(Z,j){const z=ye(Z);if(!z)return!1;function K($){if($.id===j)return!0;if($.subfolders){for(const me of $.subfolders)if(K(me))return!0}return!1}return K(z)}function F(Z){if(Z.ctrlKey&&Z.key==="Tab"){Z.preventDefault(),Z.stopPropagation(),q();return}Z.key==="Escape"&&(Z.preventDefault(),Z.stopPropagation())}function pt(){const Z=new Date,j=Z.getFullYear(),z=String(Z.getMonth()+1).padStart(2,"0"),K=String(Z.getDate()).padStart(2,"0"),$=String(Z.getHours()).padStart(2,"0"),me=String(Z.getMinutes()).padStart(2,"0"),O=String(Z.getSeconds()).padStart(2,"0");return`${j}${z}${K}${$}${me}${O}`}function nn(){let Z=c.value.find(j=>j.name==="小记");return Z?Z.expanded=!0:(Z={id:"quick-notes-"+Date.now().toString(),name:"小记",expanded:!0,notes:[],subfolders:[]},c.value.push(Z)),Z}function rn(){if(!window.naimo||!window.naimo.onEnter){console.warn("naimo.onEnter 不可用");return}window.naimo.onEnter(async Z=>{try{if(console.log("功能被触发:",Z),Z.fullPath&&Z.fullPath.endsWith("quick-note")){let j="";if(Z.files&&Z.files.length>0){const z=Z.files[0];try{j=window.myPluginAPI.readLocalTextFile(z.path)}catch(K){console.error("读取文件失败:",K),await window.naimo.system.notify("读取文件失败","错误");return}}else Z.searchText&&(j=Z.searchText);if(!j||j.trim()===""){console.log("小记内容为空，已忽略");return}try{if(console.log("=== 开始创建小记 ==="),!g.value){console.log("等待数据加载完成...");let I=0;for(;!g.value&&I<50;)await new Promise(V=>setTimeout(V,100)),I++;if(!g.value){console.error("数据加载超时");return}console.log("数据加载完成，继续创建小记")}console.log("当前 folders 数量:",c.value.length);const z=nn();console.log("小记文件夹 ID:",z.id),console.log("小记文件夹现有笔记数:",z.notes.length);const K=pt(),$=Date.now().toString();console.log("新笔记标题:",K),console.log("新笔记 ID:",$);const me=await window.myPluginAPI.saveNoteToFile($,j);console.log("文件保存路径:",me);const O={id:$,title:K,filePath:me,folderId:z.id,createdAt:Date.now(),updatedAt:Date.now()};z.notes.unshift(O),console.log("笔记已添加到文件夹，当前笔记数:",z.notes.length),console.log("folders.value 引用检查:",c.value.find(I=>I.id===z.id)?.notes.length),console.log("准备保存到数据库..."),await _(),console.log("saveData 调用完成"),await new Promise(I=>setTimeout(I,100)),f.value=O.id,console.log("=== 小记创建流程完成 ===",K)}catch(z){console.error("保存小记失败:",z)}}}catch(j){console.error("处理 onEnter 事件失败:",j)}})}return wr(()=>{document.addEventListener("keydown",F),rn(),H()}),ci(()=>{document.removeEventListener("keydown",F)}),(Z,j)=>(De(),We("div",up,[Qe(cp,{ref_key:"splitPaneRef",ref:i,defaultWidth:210,minWidth:180,maxWidth:500},{left:$r(()=>[Qe($d,{folders:c.value,currentNoteId:f.value,onCreateNote:p,onCreateFolder:d,onSelectNote:E,onDeleteNote:S,onDeleteFolder:A,onRenameFolder:N,onRenameNote:B,onMoveItem:se,onToggleCollapse:q},null,8,["folders","currentNoteId"])]),right:$r(()=>[ve("div",fp,[h.value?(De(),Tn(ep,{key:0,note:h.value,isSidebarCollapsed:l.value,onUpdate:v,onToggleSidebar:q},null,8,["note","isSidebarCollapsed"])):(De(),We("div",dp,[...j[0]||(j[0]=[ve("div",{class:"empty-icon"},"📝",-1),ve("div",{class:"empty-text"},"选择或创建一个笔记",-1)])]))])]),_:1},512),Qe(sp,{show:b.value.show,title:b.value.title,message:b.value.message,details:b.value.details,onConfirm:U,onCancel:R},null,8,["show","title","message","details"])]))}}),hp=qn(pp,[["__scopeId","data-v-04b43945"]]),mp=vd(hp);mp.mount("#app");console.log("📝 记事本插件启动成功");
